<!DOCTYPE html>
<html prefix="
" lang="de">
<head>
<meta charset="utf-8">
<meta name="description" content="import_gplus.py">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Merge and Destroy · import_gplus.py </title>
<link href="../assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700%7CAbril+Fatface">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.1.7/css/fork-awesome.min.css" integrity="sha256-gsmEoJAws/Kd3CjuOQzLie5Q3yshhvmo7YNtBG7aaEY=" crossorigin="anonymous">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS (de)" href="../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../en/rss.xml">
<link rel="canonical" href="https://encarsia.github.io/listings/import_gplus.py.html">
<link rel="icon" href="../files/favicon.ico" sizes="48x48">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body class="theme-custom">
    <a href="#content" class="sr-only sr-only-focusable">Springe zum Hauptinhalt</a>
    <div class="hsidebar">
        <div class="container sidebar-sticky">
            
                <nav id="menu" role="navigation" class="sidebar-nav"><a class="sidebar-nav-item" href="../index.html" title="Home"><i class="fa fa-home"></i>Home</a>
            <a class="sidebar-nav-item" href="../posts/tutorial-reihe-glade" title="Tutorials"><i class="fa fa-lightbulb-o"></i>Tutorials</a>
            <a class="sidebar-nav-item" href="../projects/index.html" title="Projects"><i class="fa fa-wrench"></i>Projects</a>
            <a class="sidebar-nav-item" href="https://octodon.social/@encarsia" title="Mastodon"><i class="fa fa-mastodon"></i>Mastodon</a>
            <a class="sidebar-nav-item" href="https://pixelfed.social/encarsia" title="Pixelfed"><i class="fa fa-pixelfed"></i>Pixelfed</a>
            <a class="sidebar-nav-item" href="https://twitter.com/encarsia_" title="Twitter"><i class="fa fa-twitter"></i>Twitter</a>
            <a class="sidebar-nav-item" href="https://github.com/encarsia" title="GitHub"><i class="fa fa-github"></i>GitHub</a>
            <a class="sidebar-nav-item" href="../pages/gplus_the_end" title="Google+"><i class="fa fa-google-plus-official"></i>Google+</a>
            <a class="sidebar-nav-item" href="../categories/index.html" title="Tags"><i class="fa fa-tags"></i>Tags</a>
            <a class="sidebar-nav-item" href="../archive.html" title="Archive"><i class="fa fa-folder-open"></i>Archive</a>
            <a class="sidebar-nav-item" href="../rss.xml" title="RSS"><i class="fa fa-feed"></i>RSS</a>
    
    
    </nav><footer id="footer"><span class="copyright">
              
<hr>
Contents © 2021 <a href="mailto:An.Ke@bahnfreikartoffelbrei.de">Anke (encarsia)</a>
<br> 
Powered by <a href="http://getnikola.com">Nikola</a> - 
Hybrid theme
<a rel="me" href="https://octodon.social/@encarsia"></a>

            </span>
            
            
        </footer>
</div>
    </div>
    <div class="content container" id="content">
<nav class="breadcrumbs"><ul class="breadcrumb">
<li><a href=".">listings</a></li>
                <li>import_gplus.py</li>
</ul></nav><h1>import_gplus.py
            <small><a href="import_gplus.py">(Source)</a></small>
        </h1>
    <div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-1"><code data-line-number="  1"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-1"></a><span class="c1"># -*- coding: utf-8 -*-</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-2"><code data-line-number="  2"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-2"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-3"><code data-line-number="  3"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-3"></a><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span><span class="p">,</span> <span class="n">print_function</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-4"><code data-line-number="  4"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-4"></a><span class="kn">import</span> <span class="nn">os</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-5"><code data-line-number="  5"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-5"></a><span class="kn">import</span> <span class="nn">shutil</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-6"><code data-line-number="  6"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-6"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-7"><code data-line-number="  7"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-7"></a><span class="k">try</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-8"><code data-line-number="  8"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-8"></a>    <span class="kn">import</span> <span class="nn">bs4</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-9"><code data-line-number="  9"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-9"></a><span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-10"><code data-line-number=" 10"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-10"></a>    <span class="k">raise</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-11"><code data-line-number=" 11"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-11"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-12"><code data-line-number=" 12"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-12"></a><span class="kn">from</span> <span class="nn">nikola.plugin_categories</span> <span class="kn">import</span> <span class="n">Command</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-13"><code data-line-number=" 13"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-13"></a><span class="kn">from</span> <span class="nn">nikola</span> <span class="kn">import</span> <span class="n">utils</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-14"><code data-line-number=" 14"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-14"></a><span class="kn">from</span> <span class="nn">nikola.utils</span> <span class="kn">import</span> <span class="n">req_missing</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-15"><code data-line-number=" 15"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-15"></a><span class="kn">from</span> <span class="nn">nikola.plugins.basic_import</span> <span class="kn">import</span> <span class="n">ImportMixin</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-16"><code data-line-number=" 16"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-16"></a><span class="kn">from</span> <span class="nn">nikola.plugins.command.init</span> <span class="kn">import</span> <span class="n">SAMPLE_CONF</span><span class="p">,</span> <span class="n">prepare_config</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-17"><code data-line-number=" 17"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-17"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-18"><code data-line-number=" 18"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-18"></a><span class="n">LOGGER</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="s1">'import_gplus'</span><span class="p">,</span> <span class="n">utils</span><span class="o">.</span><span class="n">STDERR_HANDLER</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-19"><code data-line-number=" 19"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-19"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-20"><code data-line-number=" 20"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-20"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-21"><code data-line-number=" 21"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-21"></a><span class="k">class</span> <span class="nc">CommandImportGplus</span><span class="p">(</span><span class="n">Command</span><span class="p">,</span> <span class="n">ImportMixin</span><span class="p">):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-22"><code data-line-number=" 22"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-22"></a>    <span class="sd">"""Import a Google+ dump."""</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-23"><code data-line-number=" 23"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-23"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-24"><code data-line-number=" 24"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-24"></a>    <span class="n">name</span> <span class="o">=</span> <span class="s2">"import_gplus"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-25"><code data-line-number=" 25"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-25"></a>    <span class="n">needs_config</span> <span class="o">=</span> <span class="kc">False</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-26"><code data-line-number=" 26"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-26"></a>    <span class="n">doc_usage</span> <span class="o">=</span> <span class="s2">"[options] extracted_dump_file_folder"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-27"><code data-line-number=" 27"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-27"></a>    <span class="n">doc_purpose</span> <span class="o">=</span> <span class="s2">"import a Google+ dump"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-28"><code data-line-number=" 28"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-28"></a>    <span class="n">cmd_options</span> <span class="o">=</span> <span class="n">ImportMixin</span><span class="o">.</span><span class="n">cmd_options</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-29"><code data-line-number=" 29"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-29"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-30"><code data-line-number=" 30"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-30"></a>    <span class="k">def</span> <span class="nf">_execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-31"><code data-line-number=" 31"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-31"></a>        <span class="sd">'''</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-32"><code data-line-number=" 32"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-32"></a><span class="sd">            Import Google+ dump</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-33"><code data-line-number=" 33"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-33"></a><span class="sd">        '''</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-34"><code data-line-number=" 34"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-34"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-35"><code data-line-number=" 35"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-35"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-36"><code data-line-number=" 36"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-36"></a>            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">help</span><span class="p">())</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-37"><code data-line-number=" 37"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-37"></a>            <span class="k">return</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-38"><code data-line-number=" 38"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-38"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-39"><code data-line-number=" 39"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-39"></a>        <span class="n">options</span><span class="p">[</span><span class="s1">'filename'</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-40"><code data-line-number=" 40"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-40"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s1">'filename'</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-41"><code data-line-number=" 41"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-41"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s1">'output_folder'</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-42"><code data-line-number=" 42"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-42"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">import_into_existing_site</span> <span class="o">=</span> <span class="kc">False</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-43"><code data-line-number=" 43"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-43"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">url_map</span> <span class="o">=</span> <span class="p">{}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-44"><code data-line-number=" 44"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-44"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-45"><code data-line-number=" 45"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-45"></a>        <span class="c1"># Google Takeout folder structure, adapt to your language settings</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-46"><code data-line-number=" 46"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-46"></a>        
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-47"><code data-line-number=" 47"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-47"></a>        <span class="c1"># Takeout/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-48"><code data-line-number=" 48"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-48"></a>        <span class="c1"># ├── +1/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-49"><code data-line-number=" 49"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-49"></a>        <span class="c1"># ├── Google+ stream/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-50"><code data-line-number=" 50"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-50"></a>        <span class="c1"># |   ├── Posts/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-51"><code data-line-number=" 51"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-51"></a>        <span class="c1"># |   ├── Photos/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-52"><code data-line-number=" 52"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-52"></a>        <span class="c1"># |   |   ├── Photos of posts/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-53"><code data-line-number=" 53"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-53"></a>        <span class="c1"># |   |   └── Photos of polls/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-54"><code data-line-number=" 54"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-54"></a>        <span class="c1"># |   ├── Activities/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-55"><code data-line-number=" 55"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-55"></a>        <span class="c1"># |   ├── Collections/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-56"><code data-line-number=" 56"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-56"></a>        <span class="c1"># |   └── Events/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-57"><code data-line-number=" 57"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-57"></a>        <span class="c1"># ├── Google+ Communities/</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-58"><code data-line-number=" 58"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-58"></a>        <span class="c1"># └── index.html</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-59"><code data-line-number=" 59"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-59"></a>        
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-60"><code data-line-number=" 60"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-60"></a>        <span class="n">gto_root</span> <span class="o">=</span> <span class="s2">"Takeout"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-61"><code data-line-number=" 61"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-61"></a>        <span class="n">gto_plus1</span> <span class="o">=</span> <span class="s2">"+1"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-62"><code data-line-number=" 62"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-62"></a>        <span class="n">gto_stream</span> <span class="o">=</span> <span class="s2">"Stream in Google+"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-63"><code data-line-number=" 63"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-63"></a>        <span class="n">gto_posts</span> <span class="o">=</span> <span class="s2">"Beiträge"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-64"><code data-line-number=" 64"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-64"></a>        <span class="n">gto_photos</span> <span class="o">=</span> <span class="s2">"Fotos"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-65"><code data-line-number=" 65"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-65"></a>        <span class="n">gto_photos_posts</span> <span class="o">=</span> <span class="s2">"Fotos von Beiträgen"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-66"><code data-line-number=" 66"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-66"></a>        <span class="n">gto_photos_polls</span> <span class="o">=</span> <span class="s2">"Umfragefotos"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-67"><code data-line-number=" 67"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-67"></a>        <span class="n">gto_activity</span> <span class="o">=</span> <span class="s2">"Aktivitätsprotokoll"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-68"><code data-line-number=" 68"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-68"></a>        <span class="n">gto_collections</span> <span class="o">=</span> <span class="s2">"Sammlungen"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-69"><code data-line-number=" 69"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-69"></a>        <span class="n">gto_events</span> <span class="o">=</span> <span class="s2">"Veranstaltungen"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-70"><code data-line-number=" 70"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-70"></a>        <span class="n">gto_communities</span> <span class="o">=</span> <span class="s2">"Google+ Communities"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-71"><code data-line-number=" 71"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-71"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-72"><code data-line-number=" 72"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-72"></a>        <span class="c1"># path to HTML formatted post files</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-73"><code data-line-number=" 73"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-73"></a>        <span class="n">post_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-74"><code data-line-number=" 74"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-74"></a>                                 <span class="n">gto_root</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-75"><code data-line-number=" 75"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-75"></a>                                 <span class="n">gto_stream</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-76"><code data-line-number=" 76"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-76"></a>                                 <span class="n">gto_posts</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-77"><code data-line-number=" 77"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-77"></a>        
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-78"><code data-line-number=" 78"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-78"></a>        <span class="c1"># collect all files</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-79"><code data-line-number=" 79"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-79"></a>        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">post_path</span><span class="p">))</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">post_path</span><span class="p">,</span> <span class="n">f</span><span class="p">))]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-80"><code data-line-number=" 80"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-80"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-81"><code data-line-number=" 81"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-81"></a>        <span class="c1"># filter relevant HTML files</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-82"><code data-line-number=" 82"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-82"></a>        <span class="n">html_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".html"</span><span class="p">)]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-83"><code data-line-number=" 83"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-83"></a>        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"</span><span class="si">{}</span><span class="s2"> posts ready for import"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">html_files</span><span class="p">)))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-84"><code data-line-number=" 84"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-84"></a>        
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-85"><code data-line-number=" 85"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-85"></a>        <span class="c1"># init new Nikola site "new_site", edit conf.py to your needs</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-86"><code data-line-number=" 86"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-86"></a>        <span class="c1"># change to this folder for the for build process</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-87"><code data-line-number=" 87"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-87"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">populate_context</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span><span class="p">,</span> <span class="n">html_files</span><span class="p">,</span> <span class="n">post_path</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-88"><code data-line-number=" 88"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-88"></a>        <span class="n">conf_template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_base_site</span><span class="p">()</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-89"><code data-line-number=" 89"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-89"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">write_configuration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_configuration_output_path</span><span class="p">(),</span> <span class="n">conf_template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">prepare_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">)))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-90"><code data-line-number=" 90"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">import_posts</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span><span class="p">,</span> <span class="n">html_files</span><span class="p">,</span> <span class="n">post_path</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-91"><code data-line-number=" 91"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-91"></a>        
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-92"><code data-line-number=" 92"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-92"></a>        <span class="c1"># In the Takeout archive photos are linked to the main working</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-93"><code data-line-number=" 93"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-93"></a>        <span class="c1"># directory although they do not necessarily exist there (Hello</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-94"><code data-line-number=" 94"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-94"></a>        <span class="c1"># deadlinks!). The image files are spread to several folders.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-95"><code data-line-number=" 95"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-95"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-96"><code data-line-number=" 96"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-96"></a>        <span class="c1"># All archive photos will be copied to the "images" folder.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-97"><code data-line-number=" 97"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-97"></a>        <span class="k">try</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-98"><code data-line-number=" 98"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-98"></a>            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-99"><code data-line-number=" 99"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-99"></a>            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Image folder ceated."</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-100"><code data-line-number="100"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-100"></a>        <span class="k">except</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-101"><code data-line-number="101"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-101"></a>            <span class="k">pass</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-102"><code data-line-number="102"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-102"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-103"><code data-line-number="103"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-103"></a>        <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span><span class="p">,</span> <span class="n">gto_root</span><span class="p">)):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-104"><code data-line-number="104"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-104"></a>            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-105"><code data-line-number="105"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-105"></a>                <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".jpg"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">f</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".jpeg"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">f</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".png"</span><span class="p">):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-106"><code data-line-number="106"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-106"></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">,</span><span class="n">f</span><span class="p">)):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-107"><code data-line-number="107"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-107"></a>                        <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-108"><code data-line-number="108"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-108"></a>                        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"</span><span class="si">{}</span><span class="s2"> copied to Nikola image folder."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-109"><code data-line-number="109"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-109"></a>        
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-110"><code data-line-number="110"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-110"></a>    <span class="nd">@staticmethod</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-111"><code data-line-number="111"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-111"></a>    <span class="k">def</span> <span class="nf">populate_context</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-112"><code data-line-number="112"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-112"></a>        <span class="c1"># We don't get much data here</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-113"><code data-line-number="113"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-113"></a>        <span class="n">context</span> <span class="o">=</span> <span class="n">SAMPLE_CONF</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-114"><code data-line-number="114"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-114"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'DEFAULT_LANG'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'de'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-115"><code data-line-number="115"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-115"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'BLOG_DESCRIPTION'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-116"><code data-line-number="116"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-116"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'SITE_URL'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'http://localhost:8000/'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-117"><code data-line-number="117"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-117"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'BLOG_EMAIL'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-118"><code data-line-number="118"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-118"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'BLOG_TITLE'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Static G+ stream archive"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-119"><code data-line-number="119"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-119"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-120"><code data-line-number="120"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-120"></a>        <span class="c1"># Get any random post, all have the same data</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-121"><code data-line-number="121"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-121"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-122"><code data-line-number="122"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-122"></a>            <span class="n">soup</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-123"><code data-line-number="123"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-123"></a>            <span class="n">context</span><span class="p">[</span><span class="s1">'BLOG_AUTHOR'</span><span class="p">]</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"author"</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-124"><code data-line-number="124"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-124"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-125"><code data-line-number="125"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-125"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'POSTS'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'''(</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-126"><code data-line-number="126"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-126"></a><span class="s1">            ("posts/*.html", "posts", "post.tmpl"),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-127"><code data-line-number="127"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-127"></a><span class="s1">            ("posts/*.rst", "posts", "post.tmpl"),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-128"><code data-line-number="128"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-128"></a><span class="s1">        )'''</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-129"><code data-line-number="129"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-129"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'COMPILERS'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'''{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-130"><code data-line-number="130"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-130"></a><span class="s1">        "rest": ('.txt', '.rst'),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-131"><code data-line-number="131"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-131"></a><span class="s1">        "html": ('.html', '.htm')</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-132"><code data-line-number="132"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-132"></a><span class="s1">        }</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-133"><code data-line-number="133"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-133"></a><span class="s1">        '''</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-134"><code data-line-number="134"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-134"></a>        <span class="k">return</span> <span class="n">context</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-135"><code data-line-number="135"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-135"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-136"><code data-line-number="136"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-136"></a>    <span class="k">def</span> <span class="nf">import_posts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-137"><code data-line-number="137"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-137"></a>        <span class="sd">"""Import all posts."""</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-138"><code data-line-number="138"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-138"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">out_folder</span> <span class="o">=</span> <span class="s1">'posts'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-139"><code data-line-number="139"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-139"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-140"><code data-line-number="140"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-140"></a>        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-141"><code data-line-number="141"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-141"></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-142"><code data-line-number="142"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-142"></a>                <span class="n">soup</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-143"><code data-line-number="143"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-143"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-144"><code data-line-number="144"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-144"></a>                <span class="n">description</span> <span class="o">=</span> <span class="s2">""</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-145"><code data-line-number="145"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-145"></a>                <span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-146"><code data-line-number="146"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-146"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-147"><code data-line-number="147"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-147"></a>                <span class="n">title_string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">string</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-148"><code data-line-number="148"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-148"></a>                <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prettify_title</span><span class="p">(</span><span class="n">title_string</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-149"><code data-line-number="149"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-149"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-150"><code data-line-number="150"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-150"></a>                <span class="c1"># post date is the 2nd link on the page</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-151"><code data-line-number="151"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-151"></a>                <span class="n">post_date</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-152"><code data-line-number="152"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-152"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-153"><code data-line-number="153"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-153"></a>                <span class="c1"># collect complete post content</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-154"><code data-line-number="154"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-154"></a>                <span class="n">post_text</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"main-content"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-155"><code data-line-number="155"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-155"></a>                <span class="n">link_embed</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"link-embed"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-156"><code data-line-number="156"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-156"></a>                <span class="n">media_link</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"media-link"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-157"><code data-line-number="157"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-157"></a>                <span class="n">album</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"album"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-158"><code data-line-number="158"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-158"></a>                <span class="n">video</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"video-placeholder"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-159"><code data-line-number="159"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-159"></a>                <span class="n">visibility</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"visibility"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-160"><code data-line-number="160"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-160"></a>                <span class="n">activity</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"post-activity"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-161"><code data-line-number="161"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-161"></a>                <span class="n">comments</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"comments"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-162"><code data-line-number="162"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-162"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-163"><code data-line-number="163"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-163"></a>                <span class="k">if</span> <span class="n">video</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-164"><code data-line-number="164"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-164"></a>                    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"video"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-165"><code data-line-number="165"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-165"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-166"><code data-line-number="166"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-166"></a>                <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">media_link</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-167"><code data-line-number="167"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-167"></a>                    <span class="c1"># link to image in image folder if not external link</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-168"><code data-line-number="168"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-168"></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">link</span><span class="p">[</span><span class="s2">"href"</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"http"</span><span class="p">):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-169"><code data-line-number="169"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-169"></a>                        <span class="n">filename</span> <span class="o">=</span> <span class="n">link</span><span class="p">[</span><span class="s2">"href"</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-170"><code data-line-number="170"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-170"></a>                        <span class="k">try</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-171"><code data-line-number="171"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-171"></a>                            <span class="n">link</span><span class="p">[</span><span class="s2">"href"</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">".."</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-172"><code data-line-number="172"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-172"></a>                            <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"photo"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-173"><code data-line-number="173"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-173"></a>                        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-174"><code data-line-number="174"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-174"></a>                            <span class="n">LOGGER</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">"No href attribute to convert link destination (</span><span class="si">{}</span><span class="s2">)"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">link</span><span class="p">))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-175"><code data-line-number="175"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-175"></a>                        <span class="k">try</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-176"><code data-line-number="176"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-176"></a>                            <span class="n">link</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">"src"</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">".."</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-177"><code data-line-number="177"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-177"></a>                        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-178"><code data-line-number="178"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-178"></a>                            <span class="n">LOGGER</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">"No src attribute to convert link destination (</span><span class="si">{}</span><span class="s2">)"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">link</span><span class="p">))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-179"><code data-line-number="179"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-179"></a>                    <span class="c1"># throw away redundant p tag filled with the post text</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-180"><code data-line-number="180"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-180"></a>                    <span class="k">try</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-181"><code data-line-number="181"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-181"></a>                        <span class="n">link</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-182"><code data-line-number="182"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-182"></a>                    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-183"><code data-line-number="183"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-183"></a>                        <span class="k">pass</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-184"><code data-line-number="184"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-184"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-185"><code data-line-number="185"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-185"></a>                <span class="c1"># multiple entries only in albums, so we only need first item</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-186"><code data-line-number="186"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-186"></a>                <span class="c1"># BeautifulSoup.find_all() always returns result, so media_link</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-187"><code data-line-number="187"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-187"></a>                <span class="c1"># is never None</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-188"><code data-line-number="188"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-188"></a>                <span class="k">try</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-189"><code data-line-number="189"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-189"></a>                    <span class="n">media_link</span> <span class="o">=</span> <span class="n">media_link</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-190"><code data-line-number="190"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-190"></a>                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-191"><code data-line-number="191"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-191"></a>                    <span class="n">media_link</span> <span class="o">=</span> <span class="kc">None</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-192"><code data-line-number="192"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-192"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-193"><code data-line-number="193"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-193"></a>                <span class="k">if</span> <span class="n">album</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-194"><code data-line-number="194"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-194"></a>                    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"photo_album"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-195"><code data-line-number="195"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-195"></a>                    <span class="c1"># we don't need media_link if album is available</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-196"><code data-line-number="196"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-196"></a>                    <span class="n">media_link</span> <span class="o">=</span> <span class="kc">None</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-197"><code data-line-number="197"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-197"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-198"><code data-line-number="198"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-198"></a>                <span class="k">if</span> <span class="n">link_embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-199"><code data-line-number="199"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-199"></a>                    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"link"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-200"><code data-line-number="200"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-200"></a>                    <span class="c1"># we don't need media_link if we got external link</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-201"><code data-line-number="201"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-201"></a>                    <span class="n">media_link</span> <span class="o">=</span> <span class="kc">None</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-202"><code data-line-number="202"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-202"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-203"><code data-line-number="203"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-203"></a>                <span class="n">content</span> <span class="o">=</span> <span class="s2">""</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-204"><code data-line-number="204"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-204"></a>                <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="p">[</span><span class="n">post_text</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-205"><code data-line-number="205"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-205"></a>                             <span class="n">link_embed</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-206"><code data-line-number="206"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-206"></a>                             <span class="n">album</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-207"><code data-line-number="207"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-207"></a>                             <span class="n">media_link</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-208"><code data-line-number="208"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-208"></a>                             <span class="n">visibility</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-209"><code data-line-number="209"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-209"></a>                             <span class="n">activity</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-210"><code data-line-number="210"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-210"></a>                             <span class="n">comments</span><span class="p">]:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-211"><code data-line-number="211"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-211"></a>                    <span class="k">if</span> <span class="n">part</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-212"><code data-line-number="212"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-212"></a>                        <span class="n">content</span> <span class="o">=</span> <span class="s2">"</span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-213"><code data-line-number="213"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-213"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-214"><code data-line-number="214"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-214"></a>                <span class="c1"># receive link from post date</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-215"><code data-line-number="215"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-215"></a>                <span class="n">link</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"href"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-216"><code data-line-number="216"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-216"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-217"><code data-line-number="217"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-217"></a>                <span class="n">slug</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">slugify</span><span class="p">(</span><span class="s2">"</span><span class="si">{}</span><span class="s2">_</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">post_date</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">title</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="s2">"de"</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-218"><code data-line-number="218"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-218"></a>                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-219"><code data-line-number="219"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-219"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">slug</span><span class="p">:</span>  <span class="c1"># should never happen</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-220"><code data-line-number="220"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-220"></a>                    <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Error converting post:"</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-221"><code data-line-number="221"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-221"></a>                    <span class="k">return</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-222"><code data-line-number="222"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-222"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-223"><code data-line-number="223"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-223"></a>                <span class="c1"># additional metadata</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-224"><code data-line-number="224"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-224"></a>                <span class="n">more</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"link"</span><span class="p">:</span> <span class="n">link</span><span class="p">,</span> <span class="c1"># original G+ post</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-225"><code data-line-number="225"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-225"></a>                        <span class="s2">"hidetitle"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="c1"># doesn't work for index pages</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-226"><code data-line-number="226"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-226"></a>                        <span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-227"><code data-line-number="227"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-227"></a>                                
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-228"><code data-line-number="228"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-228"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">write_metadata</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_folder</span><span class="p">,</span> <span class="n">slug</span> <span class="o">+</span> <span class="s2">".meta"</span><span class="p">),</span> <span class="n">title</span><span class="p">,</span> <span class="n">slug</span><span class="p">,</span> <span class="n">post_date</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">more</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-229"><code data-line-number="229"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-229"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">write_content</span><span class="p">(</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-230"><code data-line-number="230"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-230"></a>                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_folder</span><span class="p">,</span> <span class="n">slug</span> <span class="o">+</span> <span class="s2">".html"</span><span class="p">),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-231"><code data-line-number="231"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-231"></a>                    <span class="n">content</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-232"><code data-line-number="232"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-232"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-233"><code data-line-number="233"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-233"></a>    <span class="k">def</span> <span class="nf">write_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">slug</span><span class="p">,</span> <span class="n">post_date</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">more</span><span class="p">):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-234"><code data-line-number="234"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-234"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">CommandImportGplus</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">write_metadata</span><span class="p">(</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-235"><code data-line-number="235"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-235"></a>            <span class="n">filename</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-236"><code data-line-number="236"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-236"></a>            <span class="n">title</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-237"><code data-line-number="237"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-237"></a>            <span class="n">slug</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-238"><code data-line-number="238"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-238"></a>            <span class="n">post_date</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-239"><code data-line-number="239"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-239"></a>            <span class="n">description</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-240"><code data-line-number="240"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-240"></a>            <span class="n">tags</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-241"><code data-line-number="241"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-241"></a>            <span class="o">**</span><span class="n">more</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-242"><code data-line-number="242"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-242"></a>            <span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-243"><code data-line-number="243"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-243"></a>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-244"><code data-line-number="244"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-244"></a>    <span class="k">def</span> <span class="nf">prettify_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-245"><code data-line-number="245"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-245"></a>        <span class="sd">"""</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-246"><code data-line-number="246"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-246"></a><span class="sd">            Titles are generated from post text.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-247"><code data-line-number="247"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-247"></a><span class="sd">            Cut junk and shorten to one line</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-248"><code data-line-number="248"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-248"></a><span class="sd">            for readability and convenience.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-249"><code data-line-number="249"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-249"></a><span class="sd">        """</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-250"><code data-line-number="250"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-250"></a>        <span class="c1"># reduce title string to one line</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-251"><code data-line-number="251"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-251"></a>        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"&lt;br&gt;"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-252"><code data-line-number="252"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-252"></a>        <span class="c1"># link in title? just cut it out, ain't nobody got time for that</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-253"><code data-line-number="253"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-253"></a>        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"&lt;a "</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-254"><code data-line-number="254"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-254"></a>        <span class="c1"># same for user link</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-255"><code data-line-number="255"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-255"></a>        <span class="n">t</span><span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"span class="</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-256"><code data-line-number="256"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-256"></a>        <span class="c1"># cut trailing dots</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-257"><code data-line-number="257"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-257"></a>        <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"..."</span><span class="p">):</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-258"><code data-line-number="258"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-258"></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-259"><code data-line-number="259"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-259"></a>        <span class="c1"># cut html elements and fix quotation marks</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-260"><code data-line-number="260"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-260"></a>        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="p">[(</span><span class="s2">"&lt;b&gt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-261"><code data-line-number="261"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-261"></a>                     <span class="p">(</span><span class="s2">"&lt;/b&gt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-262"><code data-line-number="262"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-262"></a>                     <span class="p">(</span><span class="s2">"&amp;quot;"</span><span class="p">,</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">"</span><span class="p">),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-263"><code data-line-number="263"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-263"></a>                     <span class="p">(</span><span class="s2">"&amp;#39;"</span><span class="p">,</span> <span class="s2">"'"</span><span class="p">),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-264"><code data-line-number="264"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-264"></a>                     <span class="p">(</span><span class="s2">"&lt;b"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-265"><code data-line-number="265"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-265"></a>                     <span class="p">(</span><span class="s2">"&lt;/"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-266"><code data-line-number="266"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-266"></a>                     <span class="p">(</span><span class="s2">"&lt;i&gt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-267"><code data-line-number="267"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-267"></a>                     <span class="p">(</span><span class="s2">"&lt;/i&gt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-268"><code data-line-number="268"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-268"></a>                     <span class="p">(</span><span class="s2">"&lt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),]:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-269"><code data-line-number="269"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-269"></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tag</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-270"><code data-line-number="270"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-270"></a>        
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#listingsimport_gpluspy-271"><code data-line-number="271"></code></a></td>
<td class="code"><code><a name="listingsimport_gpluspy-271"></a>        <span class="k">return</span> <span class="n">t</span>
</code></td>
</tr>
</table></div>
    </div>
    
    
                <script src="../assets/js/all-nocdn.js" type="text/javascript"></script><!-- fancy dates --><script>
      moment.locale("de");
      fancydates(2, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
