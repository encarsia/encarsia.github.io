<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Merge and Destroy (Einträge über setuptools)</title><link>https://encarsia.github.io/</link><description></description><atom:link href="https://encarsia.github.io/categories/setuptools.xml" rel="self" type="application/rss+xml"></atom:link><language>de</language><lastBuildDate>Sun, 24 Jun 2018 19:54:35 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>GTK+-Anwendung mit setuptools packen</title><link>https://encarsia.github.io/posts/setuptools-spicker/</link><dc:creator>Anke (encarsia)</dc:creator><description>&lt;div&gt;&lt;div class="contents warning pull-right topic" id="inhalt"&gt;
&lt;p class="topic-title first"&gt;Inhalt&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://encarsia.github.io/posts/setuptools-spicker/#links" id="id1"&gt;Links&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://encarsia.github.io/posts/setuptools-spicker/#abhangigkeiten" id="id2"&gt;Abhängigkeiten&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://encarsia.github.io/posts/setuptools-spicker/#nicht-python-paketdateien" id="id3"&gt;Nicht Python-Paketdateien&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://encarsia.github.io/posts/setuptools-spicker/#desktop-dateien" id="id4"&gt;Desktop-Dateien&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://encarsia.github.io/posts/setuptools-spicker/#bestehendes-kommando-anpassen" id="id5"&gt;Bestehendes Kommando anpassen&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://encarsia.github.io/posts/setuptools-spicker/#neues-kommando-erstellen" id="id6"&gt;Neues Kommando erstellen&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Der einzige Zweck dieser Seite besteht darin, die Links in meiner setup.py zu entfernen.&lt;/strong&gt;&lt;/p&gt;
&lt;div class="section" id="links"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://encarsia.github.io/posts/setuptools-spicker/#id1"&gt;Links&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/kennethreitz/setup.py/blob/master/setup.py"&gt;example setup.py&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://stackoverflow.com/questions/25284879/install-desktop-file-with-setup-py"&gt;(stackoverflow) Install .desktop file with setup.py&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://seasonofcode.com/posts/how-to-add-custom-build-steps-and-commands-to-setuppy.html"&gt;How To Add Custom Build Steps and Commands To setup.py&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://stackoverflow.com/questions/36187264/how-to-get-installation-directory-using-setuptools-and-pkg-ressources"&gt;(stackoverflow) How to get installation directory using setuptools and pkg_ressources&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://coderwall.com/p/3q_czg/custom-subcommand-at-setup-py"&gt;Custom subcommand at setup.py&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://dankeder.com/posts/adding-custom-commands-to-setup-py/"&gt;Adding custom commands to setup.py&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://setuptools.readthedocs.io/en/latest/"&gt;setuptools documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/encarsia/non/blob/master/setup.py"&gt;setup.py of my GTK+ application with custom install and uninstall commands&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="abhangigkeiten"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://encarsia.github.io/posts/setuptools-spicker/#id2"&gt;Abhängigkeiten&lt;/a&gt;&lt;/h2&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_6dde2828f34d485f8e3b51f33a72d1b7-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;
&lt;a name="rest_code_6dde2828f34d485f8e3b51f33a72d1b7-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_6dde2828f34d485f8e3b51f33a72d1b7-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;REQUIRED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"PyGObject"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_6dde2828f34d485f8e3b51f33a72d1b7-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_6dde2828f34d485f8e3b51f33a72d1b7-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_6dde2828f34d485f8e3b51f33a72d1b7-6"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_6dde2828f34d485f8e3b51f33a72d1b7-7"&gt;&lt;/a&gt;    &lt;span class="n"&gt;install_requires&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;REQUIRED&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_6dde2828f34d485f8e3b51f33a72d1b7-8"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_6dde2828f34d485f8e3b51f33a72d1b7-9"&gt;&lt;/a&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Angabe des PyPI-Paketnamens, bei GTK+-Pythonprogrammen also mindestens die entsprechenden Bindings, da sonst &lt;tt class="docutils literal"&gt;import gi&lt;/tt&gt; scheitert.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="nicht-python-paketdateien"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://encarsia.github.io/posts/setuptools-spicker/#id3"&gt;Nicht Python-Paketdateien&lt;/a&gt;&lt;/h2&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;PACKAGES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"my_package"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;PACKAGE_DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;"my_package"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"my_package_dir"&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;PACKAGE_DATA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;"my_package"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"ui/*"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"logging.yaml"&lt;/span&gt;&lt;span class="p"&gt;]}&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-6"&gt;&lt;/a&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-7"&gt;&lt;/a&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-8"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-9"&gt;&lt;/a&gt;    &lt;span class="n"&gt;packages&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PACKAGES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-10"&gt;&lt;/a&gt;    &lt;span class="n"&gt;package_dir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PACKAGE_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-11"&gt;&lt;/a&gt;    &lt;span class="n"&gt;package_data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PACKAGE_DATA&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-12"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_c27c57e3886b4381a37dabea0b26e15a-13"&gt;&lt;/a&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Das Paket "my_package" wird aus dem Verzeichnis "my_package_dir" im Verzeichnis "my_package" gepackt.&lt;/p&gt;
&lt;p&gt;Die Dateien, die keinen Python-Code enthalten, also etwa Glade-Dateien, werden als Liste in &lt;tt class="docutils literal"&gt;package_data&lt;/tt&gt; übergeben. Im Beispiel werden alle Dateien im Unterverzeichnis "ui" sowie die Datei "logging.yaml" ins Paket integriert.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="desktop-dateien"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://encarsia.github.io/posts/setuptools-spicker/#id4"&gt;Desktop-Dateien&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Der Speicherort von .desktop-Dateien und Icons richtet sich nach den Freedesktop-Spezifikationen. .desktop-Dateien befinden sich zum Beispiel in den Verzeichnissen&lt;/p&gt;
&lt;pre class="code text"&gt;&lt;a name="rest_code_8021208efff94dec81b925a3ccf68f59-1"&gt;&lt;/a&gt;/usr/share/applications
&lt;a name="rest_code_8021208efff94dec81b925a3ccf68f59-2"&gt;&lt;/a&gt;/usr/local/share/applications
&lt;a name="rest_code_8021208efff94dec81b925a3ccf68f59-3"&gt;&lt;/a&gt;~/.local/share/applications
&lt;/pre&gt;&lt;p&gt;Während der Ausführung von &lt;tt class="docutils literal"&gt;install&lt;/tt&gt; wird das Präfix ermittelt, es ist also nur die Angabe des relativen Pfads in der &lt;tt class="docutils literal"&gt;data_files&lt;/tt&gt;-Option notwendig. Gleiches gilt für Icons.&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;rel_app_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"share/applications"&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;rel_icon_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"share/icons/hicolor/scalable/apps"&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-6"&gt;&lt;/a&gt;&lt;span class="n"&gt;DATAFILES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-7"&gt;&lt;/a&gt;            &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;destination_dir&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"list"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"of"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"files"&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-8"&gt;&lt;/a&gt;            &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rel_app_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"my_app.desktop"&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-9"&gt;&lt;/a&gt;            &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rel_icon_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"my_appicon.svg"&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-10"&gt;&lt;/a&gt;            &lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-11"&gt;&lt;/a&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-12"&gt;&lt;/a&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-13"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-14"&gt;&lt;/a&gt;    &lt;span class="n"&gt;data_files&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;DATAFILES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-15"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_3cdae1d9503c4e55a8f8de0ed2a609a6-16"&gt;&lt;/a&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Dieser Schritt kopiert nur die Dateien in die entsprechenden Zielverzeichnisse. Die korrekten Pfadangaben IN der .desktop-Datei werden durch eine eigene Funktion innerhalb des Install-Kommandos angepasst.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="bestehendes-kommando-anpassen"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://encarsia.github.io/posts/setuptools-spicker/#id5"&gt;Bestehendes Kommando anpassen&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Die .desktop-Datei enthält Pfadangaben zur auszuführenden Datei sowie zum dazugehörigen Icon. Da das Zielverzeichnis der Installation nicht vorhersehbar ist, müssen diese Pfade während der Installation an die Gegebenheiten angepasst werden.&lt;/p&gt;
&lt;p&gt;Um eigene Funktionen in bestehende Kommandos auszuführen, muss man eine eigene Instanz der entsprechenden Klasse (install, build, bdist etc.) generieren und die "run"-Funktion anpassen.&lt;/p&gt;
&lt;p&gt;Setuptools wird dann mit der Option &lt;tt class="docutils literal"&gt;cmd_class&lt;/tt&gt; auf diese eigene Klasse übergeben.&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools.command.install&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CustomInstall&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-6"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-7"&gt;&lt;/a&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;my_function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;here&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-8"&gt;&lt;/a&gt;        &lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-10"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;my_function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-11"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-12"&gt;&lt;/a&gt;            &lt;span class="n"&gt;do_some_shit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-13"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-14"&gt;&lt;/a&gt;            &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-15"&gt;&lt;/a&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-16"&gt;&lt;/a&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-17"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-18"&gt;&lt;/a&gt;    &lt;span class="n"&gt;cmdclass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;"install"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;CustomInstall&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-19"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_6d99fb46e7d747678f678cbc74a5668f-20"&gt;&lt;/a&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Eine Liste mit verfügbaren Kommandos erhält man durch&lt;/p&gt;
&lt;pre class="code console"&gt;&lt;a name="rest_code_cf6b013689934ed88e472bc65fa0e8cf-1"&gt;&lt;/a&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python setup.py --help-commands
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="neues-kommando-erstellen"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://encarsia.github.io/posts/setuptools-spicker/#id6"&gt;Neues Kommando erstellen&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Es ist einfach möglich, eigene Kommandos mit setuptools zu erzeugen. Möchte man beispielsweise die zuvor installierten Dateien, also das Python-Paket und die Desktop-Dateien, loswerden, muss dies manuell erfolgen. Dafür bietet es sich an, ein Uninstall-Kommando zu erstellen.&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;setuptools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Command&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UnInstall&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-5"&gt;&lt;/a&gt;    &lt;span class="n"&gt;description&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"description shown by setup.py --help-commands"&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-6"&gt;&lt;/a&gt;    &lt;span class="n"&gt;user_options&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="s2"&gt;"myoption"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-7"&gt;&lt;/a&gt;                     &lt;span class="s2"&gt;"m"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-8"&gt;&lt;/a&gt;                     &lt;span class="s2"&gt;"myoption description shown by setup.py cmd --help"&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-10"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;initialize_options&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-11"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# method must exist&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-12"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# define all options with default value&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-13"&gt;&lt;/a&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;myoption&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-14"&gt;&lt;/a&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-15"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;finalize_options&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-16"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# method must exist&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-17"&gt;&lt;/a&gt;        &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-18"&gt;&lt;/a&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-19"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-20"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# method must exist&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-21"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# code to be executed goes here&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-22"&gt;&lt;/a&gt;        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"This is a custom command."&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-23"&gt;&lt;/a&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-24"&gt;&lt;/a&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-25"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-26"&gt;&lt;/a&gt;    &lt;span class="n"&gt;cmdclass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;"uninstall"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;UnInstall&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-27"&gt;&lt;/a&gt;    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;a name="rest_code_825281a52b86410899050a5f34a67aab-28"&gt;&lt;/a&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</description><category>glade</category><category>python</category><category>setuptools</category><guid>https://encarsia.github.io/posts/setuptools-spicker/</guid><pubDate>Sun, 24 Jun 2018 16:55:10 GMT</pubDate></item></channel></rss>