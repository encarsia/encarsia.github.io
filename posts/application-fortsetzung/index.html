<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Desktopintegrationsbemühungen | Merge and Destroy</title>
<link href="../../assets/css/bitter.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/main.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (de)" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../en/rss.xml">
<link rel="canonical" href="https://encarsia.github.io/posts/application-fortsetzung/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Anke (encarsia)">
<meta property="og:site_name" content="Merge and Destroy">
<meta property="og:title" content="Desktopintegrationsbemühungen">
<meta property="og:url" content="https://encarsia.github.io/posts/application-fortsetzung/">
<meta property="og:description" content="Inhalt

Glade
Icon
Headerbar


Kommandozeilenoptionen
Optionen anlegen
Signal verbinden
Optionen verarbeiten
Optionen übergeben


Listings
Glade
Python




Desktopintegration: Icon, Headerbar, Kommand">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-01-15T13:51:29+01:00">
<meta property="article:tag" content="glade">
<meta property="article:tag" content="python">
<link rel="alternate" hreflang="en" href="../../en/posts/application-fortsetzung/">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://plus.google.com/105146352752269764996/posts" title="Google+"><i class="icon-google-plus"></i></a></li>
            <li><a href="https://github.com/encarsia" title="Github"><i class="icon-github"></i></a></li>
            <li><a href="https://twitter.com/encarsia_" title="Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="../../pages/about/index.html" title="About me"><i class="icon-user"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
    <div class="post">
    
    <h1 class="p-name entry-title" itemprop="headline name">Desktopintegrationsbemühungen</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2017-01-15T13:51:29+01:00">2017-01-15 13:51</time><a href="../../en/posts/application-fortsetzung/" rel="alternate" hreflang="en">
                English</a>

            
          |  
        <a href="index.rst" id="sourcelink">Source</a>

            </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div>
<div class="contents warning pull-right topic" id="inhalt">
<p class="topic-title first">Inhalt</p>
<ul class="simple">
<li>
<a class="reference internal" href="#glade" id="id3">Glade</a><ul>
<li><a class="reference internal" href="#icon" id="id4">Icon</a></li>
<li><a class="reference internal" href="#headerbar" id="id5">Headerbar</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="#kommandozeilenoptionen" id="id6">Kommandozeilenoptionen</a><ul>
<li><a class="reference internal" href="#optionen-anlegen" id="id7">Optionen anlegen</a></li>
<li><a class="reference internal" href="#signal-verbinden" id="id8">Signal verbinden</a></li>
<li><a class="reference internal" href="#optionen-verarbeiten" id="id9">Optionen verarbeiten</a></li>
<li><a class="reference internal" href="#optionen-ubergeben" id="id10">Optionen übergeben</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="#listings" id="id11">Listings</a><ul>
<li><a class="reference internal" href="#id2" id="id12">Glade</a></li>
<li><a class="reference internal" href="#python" id="id13">Python</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Desktopintegration: Icon, Headerbar, Kommandozeilenoptionen</strong></p>
<p>(Fortsetzung zum Artikel <a class="reference external" href="../application">GtkApplication</a>)</p>
<a class="reference external image-reference" href="../../images/15_application.png"><img alt="/images/15_application.thumbnail.png" src="../../images/15_application.thumbnail.png"></a>
<div class="section" id="glade">
<h2><a class="toc-backref" href="#id3">Glade</a></h2>
<div class="section" id="icon">
<h3><a class="toc-backref" href="#id4">Icon</a></h3>
<p>Einem Fenster lässt sich direkt in Glade unter <em>"Allgemein &gt; Darstellung &gt; Symboldatei"</em> ein Icon auswählen. Das Problem dabei ist, dass Glade Bilddateien nur anzeigt, wenn sie sich im selben Verzeichnis wie die Gladedatei selbst befinden, auch wenn man ein anderes Verzeichnis auswählt.</p>
<p>Am einfachsten behebt man dies, indem man die Gladedatei in einem Texteditor bearbeitet und den (relativen) Pfad zum <a class="reference external" href="https://openclipart.org/detail/22535/ducky-icon">Icon</a> angibt. Diese Einstellung bleibt auch erhalten, wenn die Datei später mit Glade bearbeitet und gespeichert wird:</p>
<pre class="code xml"><a name="rest_code_b9af2ace714741058c583bd8f2146d6b-1"></a><span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkApplicationWindow"</span> <span class="na">id=</span><span class="s">"window"</span><span class="nt">&gt;</span>
<a name="rest_code_b9af2ace714741058c583bd8f2146d6b-2"></a>  ...
<a name="rest_code_b9af2ace714741058c583bd8f2146d6b-3"></a>  <span class="c">&lt;!-- &lt;property name="icon"&gt;duckyou.svg&lt;/property&gt; --&gt;</span>
<a name="rest_code_b9af2ace714741058c583bd8f2146d6b-4"></a>  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"icon"</span><span class="nt">&gt;</span>../files/duckyou.svg<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_b9af2ace714741058c583bd8f2146d6b-5"></a>  ...
</pre>
</div>
<div class="section" id="headerbar">
<h3><a class="toc-backref" href="#id5">Headerbar</a></h3>
<p>Die Headerbar wurde mit GNOME 3.10 eingeführt und vereint Titelleiste und Toolbar in einem Widget, d.h neben Titel und Untertitel können rechts und/oder links verschiedene Widgets (Menüs, Buttons) angelegt sowie clientseitige Fensterkontrollknöpfe angezeigt werden.</p>
<p>Die Headerbar ist optional. Möchte man sie nutzen, muss in den Fenstereinstellungen <em>"Allgemein &gt; Darstellung &gt; Klienseitige Fensterdekoration"</em> ausgewählt werden. Daraufhin erscheint im oberen Bereich des Fensters ein reservierter Bereich, in dem die Headerbar platziert wird. Wird die Headerbar außerhalb davon platziert, wird weiterhin zusätzlich die normale Titelleiste angezeigt.</p>
<img alt="/images/15_headerbarglade.png" src="../../images/15_headerbarglade.png">
</div>
</div>
<div class="section" id="kommandozeilenoptionen">
<h2><a class="toc-backref" href="#id6">Kommandozeilenoptionen</a></h2>
<p><em>GtkApplication</em> stellt die erforderlichen Mittel für anwendungseigene Kommandozeilenoptionen zur Verfügung (<a class="reference external" href="https://wiki.gnome.org/HowDoI/GtkApplication/CommandLine">Handling command line options in GApplication</a>).</p>
<div class="section" id="optionen-anlegen">
<h3><a class="toc-backref" href="#id7">Optionen anlegen</a></h3>
<p>Verfügbare Optionen werden mit der Funktion <tt class="docutils literal">add_main_option_entries(entrylist)</tt> hinzugefügt. Diese Einträge haben das Format <em>GLib.OptionEntry</em>, welches allerlei Parameter besitzt.</p>
<pre class="code python"><a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-1"></a><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-2"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Application</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"org.application.test"</span><span class="p">,</span> <span class="n">Gio</span><span class="o">.</span><span class="n">ApplicationFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">add_main_option_entries</span><span class="p">([</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_option_entry</span><span class="p">(</span><span class="s2">"--version"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Show version numbers and exit"</span><span class="p">),</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_option_entry</span><span class="p">(</span><span class="s2">"--setlabel"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Set label widget"</span><span class="p">,</span><span class="n">arg</span><span class="o">=</span><span class="n">GLib</span><span class="o">.</span><span class="n">OptionArg</span><span class="o">.</span><span class="n">STRING</span><span class="p">,),</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_option_entry</span><span class="p">(</span><span class="s2">"--bollocks"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Additional test option - exit"</span><span class="p">),</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-7"></a>    <span class="p">])</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-8"></a>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-9"></a><span class="k">def</span> <span class="nf">create_option_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">long_name</span><span class="p">,</span> <span class="n">short_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">GLib</span><span class="o">.</span><span class="n">OptionArg</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span><span class="n">arg_data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">arg_description</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-10"></a>    <span class="n">option</span> <span class="o">=</span> <span class="n">GLib</span><span class="o">.</span><span class="n">OptionEntry</span><span class="p">()</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-11"></a>    <span class="n">option</span><span class="o">.</span><span class="n">long_name</span> <span class="o">=</span> <span class="n">long_name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-12"></a>    <span class="n">option</span><span class="o">.</span><span class="n">short_name</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_name</span> <span class="k">else</span> <span class="n">short_name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-13"></a>    <span class="n">option</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-14"></a>    <span class="n">option</span><span class="o">.</span><span class="n">arg</span> <span class="o">=</span> <span class="n">arg</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-15"></a>    <span class="n">option</span><span class="o">.</span><span class="n">arg_data</span> <span class="o">=</span> <span class="n">arg_data</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-16"></a>    <span class="n">option</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-17"></a>    <span class="n">option</span><span class="o">.</span><span class="n">arg_description</span> <span class="o">=</span> <span class="n">arg_description</span>
<a name="rest_code_00145f124f004dfa9fa60f81b35f5f29-18"></a>    <span class="k">return</span> <span class="n">option</span>
</pre>
</div>
<div class="section" id="signal-verbinden">
<h3><a class="toc-backref" href="#id8">Signal verbinden</a></h3>
<p>Der <em>GtkApplication</em>-eigene "handle-local-options"-Handler verarbeitet die Optionen. Sobald Optionen angelegt sind, wird dieses Signal noch vor dem "startup"-Signal ausgelöst</p>
<pre class="code python"><a name="rest_code_9ceb2fe5608a47f29422a074a57bf0ed-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"handle-local-options"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_local_option</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="optionen-verarbeiten">
<h3><a class="toc-backref" href="#id9">Optionen verarbeiten</a></h3>
<p>Die an die Handler-Funktion übergebene <tt class="docutils literal">option</tt> ist ein Element der Klasse <em>GLib.VariantDict</em>. Mit <tt class="docutils literal"><span class="pre">contains("option")</span></tt> lässt sich nach der übergebenen Option suchen.</p>
<pre class="code python"><a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-1"></a><span class="k">def</span> <span class="nf">on_local_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">,</span> <span class="n">option</span><span class="p">):</span>
<a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-2"></a>    <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"option1"</span><span class="p">):</span>
<a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-3"></a>        <span class="c1">#do something and exit normally</span>
<a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-4"></a>        <span class="k">return</span> <span class="mi">0</span>
<a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-5"></a>    <span class="k">elif</span> <span class="n">option</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"option2"</span><span class="p">):</span>
<a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-6"></a>        <span class="c1">#do something different and exit</span>
<a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-7"></a>        <span class="k">return</span> <span class="mi">0</span>
<a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-8"></a>    <span class="k">elif</span> <span class="n">option</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"option3"</span><span class="p">):</span>
<a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-9"></a>        <span class="c1">#do more and continue</span>
<a name="rest_code_5e02c3813d7e4a5d90084ba8832f4dc6-10"></a>    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</pre>
<p>Ein übergebener String kann extrahiert werden, indem <em>GLib.VariantDict</em> mit <tt class="docutils literal">end()</tt> in <em>GLib.Variant</em> konvertiert wird, das sich wiederum mit <tt class="docutils literal">keys()</tt> auslesen lässt:</p>
<pre class="code python"><a name="rest_code_8570f92e074140dd89a95caa746b4810-1"></a><span class="n">var</span> <span class="o">=</span> <span class="n">GLib</span><span class="o">.</span><span class="n">VariantDict</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
<a name="rest_code_8570f92e074140dd89a95caa746b4810-2"></a><span class="n">option_string</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span>
</pre>
<dl class="docutils">
<dt>Ein Return-Wert ist zwingend erforderlich, er entspricht dabei dem Exit-Status:</dt>
<dd><ul class="first last simple">
<li>
<strong>-1</strong>: Anwendung wird weiter ausgeführt</li>
<li>
<strong>0</strong>: erfolgreiche Ausführung, Anwendung wird beendet, "startup/activate" werden nicht ausgeführt</li>
<li>
<strong>1</strong> bzw. positiver Wert: nicht erfolgreiche Ausführung, Anwendung wird beendet</li>
</ul></dd>
</dl>
</div>
<div class="section" id="optionen-ubergeben">
<h3><a class="toc-backref" href="#id10">Optionen übergeben</a></h3>
<p>Die Option, die immer verfügbar ist, ist <tt class="docutils literal"><span class="pre">--help</span></tt>. Hier werden unter "Anwendungsoptionen" die angelegten Optionen samt Beschreibung aufgeführt. Die Optionen können wie definiert angegeben werden:</p>
<pre class="code console"><a name="rest_code_d9bbf99da4d14248aa20a617639ccb45-1"></a><span class="gp">$</span> python script.py --version
<a name="rest_code_d9bbf99da4d14248aa20a617639ccb45-2"></a><span class="go">Python: 3.6.0</span>
<a name="rest_code_d9bbf99da4d14248aa20a617639ccb45-3"></a><span class="go">GTK+:   3.22.6</span>
</pre>
<p>oder mit <tt class="docutils literal"><span class="pre">--setlabel</span></tt> einen String an <em>Gtk.Label</em> übergeben:</p>
<pre class="code console"><a name="rest_code_59f96d814d454228861fbc672a1dca07-1"></a><span class="gp">$</span> python script.py --setlabel <span class="s2">"I can haz options!"</span>
</pre>
<!-- TEASER_END -->
</div>
</div>
<div class="section" id="listings">
<h2><a class="toc-backref" href="#id11">Listings</a></h2>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id12">Glade</a></h3>
<p><a class="reference external" href="../../listings/15_application.glade.html">15_application.glade</a>  <a class="reference external" href="../../listings/15_application.glade">(Source)</a></p>
<pre class="code xml"><a name="rest_code_9e43beef794b4b1682782134bb13c45a-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-2"></a><span class="c">&lt;!-- Generated with glade 3.20.0 --&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-3"></a><span class="nt">&lt;interface&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-4"></a>  <span class="nt">&lt;requires</span> <span class="na">lib=</span><span class="s">"gtk+"</span> <span class="na">version=</span><span class="s">"3.20"</span><span class="nt">/&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-5"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkMenu"</span> <span class="na">id=</span><span class="s">"menu"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-6"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-7"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-8"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-9"></a>      <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkMenuItem"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-10"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-11"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-12"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"label"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>MenuItem 1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-13"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"use_underline"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-14"></a>      <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-15"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-16"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-17"></a>      <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkMenuItem"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-18"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-19"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-20"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"label"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>MenuItem 2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-21"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"use_underline"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-22"></a>      <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-23"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-24"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-25"></a>      <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkMenuItem"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-26"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-27"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-28"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"label"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>MenuItem 3<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-29"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"use_underline"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-30"></a>      <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-31"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-32"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-33"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkApplicationWindow"</span> <span class="na">id=</span><span class="s">"window"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-34"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"width_request"</span><span class="nt">&gt;</span>400<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-35"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"height_request"</span><span class="nt">&gt;</span>300<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-36"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-37"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"title"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>Titel<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-38"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"icon"</span><span class="nt">&gt;</span>../files/duckyou.svg<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-39"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"show_menubar"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-40"></a>    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"destroy"</span> <span class="na">handler=</span><span class="s">"on_window_destroy"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-41"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-42"></a>      <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkBox"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-43"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-44"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-45"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"orientation"</span><span class="nt">&gt;</span>vertical<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-46"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-47"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkImage"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-48"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-49"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-50"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"pixbuf"</span><span class="nt">&gt;</span>../files/duckyou.svg<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-51"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-52"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-53"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-54"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-55"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-56"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-57"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-58"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-59"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkLabel"</span> <span class="na">id=</span><span class="s">"label"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-60"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-61"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-62"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-63"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-64"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-65"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-66"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"pack_type"</span><span class="nt">&gt;</span>end<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-67"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-68"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-69"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-70"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-71"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkSeparator"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-72"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-73"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-74"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-75"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-76"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-77"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-78"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-79"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-80"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-81"></a>      <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-82"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-83"></a>    <span class="nt">&lt;child</span> <span class="na">type=</span><span class="s">"titlebar"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-84"></a>      <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkHeaderBar"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-85"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-86"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-87"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"title"</span><span class="nt">&gt;</span>Titel<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-88"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"subtitle"</span><span class="nt">&gt;</span>Untertitel<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-89"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"show_close_button"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-90"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-91"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkMenuButton"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-92"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-93"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-94"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-95"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"popup"</span><span class="nt">&gt;</span>menu<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-96"></a>            <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-97"></a>              <span class="nt">&lt;placeholder/&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-98"></a>            <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-99"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-100"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-101"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-102"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-103"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"label"</span><span class="nt">&gt;</span>gtk-no<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-104"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-105"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-106"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-107"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"use_stock"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-108"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"always_show_image"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-109"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-110"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-111"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"pack_type"</span><span class="nt">&gt;</span>end<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-112"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-113"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-114"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-115"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-116"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span><span class="nt">&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-117"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"label"</span><span class="nt">&gt;</span>gtk-yes<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-118"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-119"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-120"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-121"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"use_stock"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-122"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"always_show_image"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-123"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-124"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-125"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"pack_type"</span><span class="nt">&gt;</span>end<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-126"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-127"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-128"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-129"></a>      <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-130"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-131"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_9e43beef794b4b1682782134bb13c45a-132"></a><span class="nt">&lt;/interface&gt;</span>
</pre>
</div>
<div class="section" id="python">
<h3><a class="toc-backref" href="#id13">Python</a></h3>
<p><a class="reference external" href="../../listings/15_application.py.html">15_application.py</a>  <a class="reference external" href="../../listings/15_application.py">(Source)</a></p>
<pre class="code python"><a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-1"></a><span class="ch">#!/usr/bin/python</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-2"></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-3"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-4"></a><span class="kn">import</span> <span class="nn">sys</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-5"></a><span class="kn">import</span> <span class="nn">gi</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-6"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s1">'Gtk'</span><span class="p">,</span><span class="s1">'3.0'</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-7"></a><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">Gtk</span><span class="p">,</span> <span class="n">Gio</span><span class="p">,</span> <span class="n">GLib</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-8"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-9"></a><span class="k">class</span> <span class="nc">Handler</span><span class="p">:</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-10"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-11"></a>    <span class="k">def</span> <span class="nf">on_window_destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">window</span><span class="p">):</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-12"></a>        <span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-13"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-14"></a><span class="k">class</span> <span class="nc">ExampleApp</span><span class="p">:</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-15"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-16"></a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-17"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Application</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"org.application.test"</span><span class="p">,</span> <span class="n">Gio</span><span class="o">.</span><span class="n">ApplicationFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-19"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-20"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">add_main_option_entries</span><span class="p">([</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-21"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">create_option_entry</span><span class="p">(</span><span class="s2">"--version"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Show version numbers and exit"</span><span class="p">),</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-22"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">create_option_entry</span><span class="p">(</span><span class="s2">"--setlabel"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Set label widget"</span><span class="p">,</span><span class="n">arg</span><span class="o">=</span><span class="n">GLib</span><span class="o">.</span><span class="n">OptionArg</span><span class="o">.</span><span class="n">STRING</span><span class="p">),</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-23"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">create_option_entry</span><span class="p">(</span><span class="s2">"--bollocks"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Additional test option - exit"</span><span class="p">),</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-24"></a>        <span class="p">])</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-25"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-26"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"handle-local-options"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_local_option</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"activate"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_app_activate</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-28"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-29"></a>    <span class="k">def</span> <span class="nf">on_local_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">,</span> <span class="n">option</span><span class="p">):</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-30"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">option_string</span> <span class="o">=</span> <span class="s2">""</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-31"></a>        <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"version"</span><span class="p">):</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-32"></a>            <span class="n">var</span> <span class="o">=</span> <span class="n">GLib</span><span class="o">.</span><span class="n">VariantDict</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-33"></a>            <span class="k">print</span><span class="p">(</span><span class="s2">"Python: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">[:</span><span class="mi">5</span><span class="p">]))</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-34"></a>            <span class="k">print</span><span class="p">(</span><span class="s2">"GTK+:   {}.{}.{}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">MAJOR_VERSION</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">MINOR_VERSION</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">MICRO_VERSION</span><span class="p">))</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-35"></a>            <span class="k">return</span> <span class="mi">0</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-36"></a>        <span class="k">elif</span> <span class="n">option</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"bollocks"</span><span class="p">):</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-37"></a>            <span class="k">return</span> <span class="mi">1</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-38"></a>        <span class="k">elif</span> <span class="n">option</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"setlabel"</span><span class="p">):</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-39"></a>            <span class="n">var</span> <span class="o">=</span> <span class="n">GLib</span><span class="o">.</span><span class="n">VariantDict</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-40"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">option_string</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-41"></a>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-42"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-43"></a>    <span class="k">def</span> <span class="nf">create_option_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">long_name</span><span class="p">,</span> <span class="n">short_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">GLib</span><span class="o">.</span><span class="n">OptionArg</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span><span class="n">arg_data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">arg_description</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-44"></a>        <span class="n">option</span> <span class="o">=</span> <span class="n">GLib</span><span class="o">.</span><span class="n">OptionEntry</span><span class="p">()</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-45"></a>        <span class="n">option</span><span class="o">.</span><span class="n">long_name</span> <span class="o">=</span> <span class="n">long_name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-46"></a>        <span class="n">option</span><span class="o">.</span><span class="n">short_name</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_name</span> <span class="k">else</span> <span class="n">short_name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-47"></a>        <span class="n">option</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-48"></a>        <span class="n">option</span><span class="o">.</span><span class="n">arg</span> <span class="o">=</span> <span class="n">arg</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-49"></a>        <span class="n">option</span><span class="o">.</span><span class="n">arg_data</span> <span class="o">=</span> <span class="n">arg_data</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-50"></a>        <span class="n">option</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-51"></a>        <span class="n">option</span><span class="o">.</span><span class="n">arg_description</span> <span class="o">=</span> <span class="n">arg_description</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-52"></a>        <span class="k">return</span> <span class="n">option</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-53"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-54"></a>    <span class="k">def</span> <span class="nf">on_app_activate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-55"></a>        <span class="n">builder</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Builder</span><span class="p">()</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-56"></a>        <span class="n">builder</span><span class="o">.</span><span class="n">add_from_file</span><span class="p">(</span><span class="s2">"15_application.glade"</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-57"></a>        <span class="n">builder</span><span class="o">.</span><span class="n">connect_signals</span><span class="p">(</span><span class="n">Handler</span><span class="p">())</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-58"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_object</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-60"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">"window"</span><span class="p">)</span><span class="o">.</span><span class="n">set_application</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-61"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">"label"</span><span class="p">)</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option_string</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-62"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-63"></a>        <span class="c1">#display application name in upper panel of the GNOME Shell</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-64"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">"window"</span><span class="p">)</span><span class="o">.</span><span class="n">set_wmclass</span><span class="p">(</span><span class="s2">"Application test"</span><span class="p">,</span><span class="s2">"Application test"</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-65"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">"window"</span><span class="p">)</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-66"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-67"></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argv</span><span class="p">):</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-69"></a>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-70"></a><span class="n">app</span> <span class="o">=</span> <span class="n">ExampleApp</span><span class="p">()</span>
<a name="rest_code_74a1bdc3fca04d0ca6a9ccc0c8ac23c4-71"></a><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
</pre>
</div>
</div>
</div>
        </div>
        
        <ul class="pager hidden-print">
<li class="previous">
                <a href="../application/" rel="prev" title="Selbständig">Vorheriger Eintrag</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="bahnfreikartoffelbrei",
            disqus_url="https://encarsia.github.io/posts/application-fortsetzung/",
        disqus_title="Desktopintegrationsbem\u00fchungen",
        disqus_identifier="cache/posts/application-fortsetzung.html",
        disqus_config = function () {
            this.language = "de";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        

    </div>

        
       <script>var disqus_shortname="bahnfreikartoffelbrei";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2017 <a href="mailto:An.Ke@bahnfreikartoffelbrei.de">Anke (encarsia)</a> - 
Powered by <a href="http://getnikola.com">Nikola</a> - 
Zen theme based in <a href="https://github.com/arusahni/website-template">Arusahni's website-template</a><br></p>
            
        </footer>
</div>
    </section><script src="../../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="../../assets/js/jquery.timeago.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
