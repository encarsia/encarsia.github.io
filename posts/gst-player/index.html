<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Mediaplayer mit GStreamer | Merge and Destroy</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (de)" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../en/rss.xml">
<link rel="canonical" href="https://encarsia.github.io/posts/gst-player/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Anke (encarsia)">
<meta property="og:site_name" content="Merge and Destroy">
<meta property="og:title" content="Mediaplayer mit GStreamer">
<meta property="og:url" content="https://encarsia.github.io/posts/gst-player/">
<meta property="og:description" content="Inhalt

Glade
Python
Player einrichten
Elemente und Pipelines
Fertige Pipelines


Und los!
Fortschrittsanzeige


Möglichkeiten und Limitierungen
Links
Listings
Glade
Python
Beispieldateien




Mediapl">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-09-21T15:19:40+02:00">
<meta property="article:tag" content="glade">
<meta property="article:tag" content="python">
<link rel="alternate" hreflang="en" href="../../en/posts/gst-player/">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../index.html" title="Home"><i class="fa-home"></i></a></li>
            <li><a href="../tutorial-reihe-glade/index.html" title="Tutorials"><i class="fa-lightbulb-o"></i></a></li>
            <li><a href="https://plus.google.com/105146352752269764996/posts" title="Google+"><i class="fa-google-plus-official"></i></a></li>
            <li><a href="https://github.com/encarsia" title="Github"><i class="fa-github"></i></a></li>
            <li><a href="https://twitter.com/encarsia_" title="Twitter"><i class="fa-twitter"></i></a></li>
            <li><a href="../../categories/index.html" title="Tags"><i class="fa-tags"></i></a></li>
            <li><a href="../../rss.xml" title="RSS"><i class="fa-rss"></i></a></li>
            <li><a href="../../pages/about/index.html" title="About me"><i class="fa-user"></i></a></li>
            <li><a href="../../archive.html" title="Archives"><i class="fa-folder-open"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
    <div class="post">
    
    <h1 class="p-name entry-title" itemprop="headline name">Mediaplayer mit GStreamer</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2017-09-21T15:19:40+02:00">2017-09-21 15:19</time><a href="../../en/posts/gst-player/" rel="alternate" hreflang="en">
                English</a>

            
          |  
        <a href="index.rst" id="sourcelink">Source</a>

            </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div>
<div class="contents warning pull-right topic" id="inhalt">
<p class="topic-title first">Inhalt</p>
<ul class="simple">
<li><a class="reference internal" href="#glade" id="id5">Glade</a></li>
<li>
<a class="reference internal" href="#python" id="id6">Python</a><ul>
<li>
<a class="reference internal" href="#player-einrichten" id="id7">Player einrichten</a><ul>
<li><a class="reference internal" href="#elemente-und-pipelines" id="id8">Elemente und Pipelines</a></li>
<li><a class="reference internal" href="#fertige-pipelines" id="id9">Fertige Pipelines</a></li>
</ul>
</li>
<li><a class="reference internal" href="#und-los" id="id10">Und los!</a></li>
<li><a class="reference internal" href="#fortschrittsanzeige" id="id11">Fortschrittsanzeige</a></li>
</ul>
</li>
<li><a class="reference internal" href="#moglichkeiten-und-limitierungen" id="id12">Möglichkeiten und Limitierungen</a></li>
<li><a class="reference internal" href="#links" id="id13">Links</a></li>
<li>
<a class="reference internal" href="#listings" id="id14">Listings</a><ul>
<li><a class="reference internal" href="#id1" id="id15">Glade</a></li>
<li><a class="reference internal" href="#id2" id="id16">Python</a></li>
<li><a class="reference internal" href="#beispieldateien" id="id17">Beispieldateien</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Mediaplayer mit GStreamer 1.x realisieren</strong></p>
<p><a class="reference external" href="https://gstreamer.freedesktop.org/">GStreamer</a> ist ein Multimedia-Framework, das zum Anzeigen und (De-)Kodieren von Mediendateien verwendet werden kann.</p>
<a class="reference external image-reference" href="../../images/19_gst_player.png"><img alt="/images/19_gst_player.thumbnail.png" src="../../images/19_gst_player.thumbnail.png"></a>
<div class="section" id="glade">
<h2><a class="toc-backref" href="#id5">Glade</a></h2>
<blockquote>
<ul class="simple">
<li>
<strong>Darstellungsbereich der Mediendatei:</strong> Widget <em>Gtk.DrawingArea</em>
</li>
<li>
<strong>Steuerungselemente:</strong> Vor-/Zurückspulen (<em>Gtk.Button</em>), Pause (<em>Gtk.Togglebutton</em>)</li>
<li>
<strong>Medienauswahl:</strong> Buttons, um Video- oder Bilddatei anzuzeigen</li>
</ul>
</blockquote>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="#id6">Python</a></h2>
<div class="section" id="player-einrichten">
<h3><a class="toc-backref" href="#id7">Player einrichten</a></h3>
<div class="section" id="elemente-und-pipelines">
<h4><a class="toc-backref" href="#id8">Elemente und Pipelines</a></h4>
<p>GStreamer handhabt alle möglichen Arten von Medienflüssen. Jeder Schritt in dieser Verarbeitungskette wird per <em>Element</em> definiert und in <em>Pipelines</em> verbunden. Eine solche Pipeline besteht typischerweise aus "source"-, "filter"-/"decode"- und "sink"-Elementen.</p>
<pre class="code text"><a name="rest_code_4349303db40244f89c492eada9b5bee8-1"></a>------------------------------------------------------
<a name="rest_code_4349303db40244f89c492eada9b5bee8-2"></a>|  Pipeline                                          |
<a name="rest_code_4349303db40244f89c492eada9b5bee8-3"></a>|                                                    |
<a name="rest_code_4349303db40244f89c492eada9b5bee8-4"></a>|  -------------   ----------------   -------------- |
<a name="rest_code_4349303db40244f89c492eada9b5bee8-5"></a>|  | source    |   | filter       |   | sink       | |
<a name="rest_code_4349303db40244f89c492eada9b5bee8-6"></a>|  |           |-&gt;&gt;| decoder      |-&gt;&gt;|            | |
<a name="rest_code_4349303db40244f89c492eada9b5bee8-7"></a>|  | Quelle    |   | Verarbeitung |   | Ausgabe    | |
<a name="rest_code_4349303db40244f89c492eada9b5bee8-8"></a>|  -------------   ----------------   -------------- |
<a name="rest_code_4349303db40244f89c492eada9b5bee8-9"></a>------------------------------------------------------
</pre>
<p>Nach diesem Prinzip wird dies mittels <em>Gst</em>-Modul umgesetzt:</p>
<pre class="code python"><a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-1"></a><span class="c1">#init Gst and create pipeline</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-2"></a><span class="n">Gst</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-3"></a><span class="n">pipeline</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">Pipeline</span><span class="p">()</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-4"></a>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-5"></a><span class="c1">#create elements</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-6"></a><span class="n">src</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"filesrc"</span><span class="p">,</span><span class="s2">"source"</span><span class="p">)</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-7"></a><span class="n">decode</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"decodebin"</span><span class="p">,</span><span class="s2">"decode"</span><span class="p">)</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-8"></a><span class="n">sink</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"xvimagesink"</span><span class="p">)</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-9"></a>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-10"></a><span class="c1">#configure elements</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-11"></a><span class="n">src</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"location"</span><span class="p">,</span><span class="n">file_location</span><span class="p">)</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-12"></a>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-13"></a><span class="c1">#add elements to pipeline</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-14"></a><span class="n">pipeline</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-15"></a><span class="n">pipeline</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">decode</span><span class="p">)</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-16"></a><span class="n">pipeline</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sink</span><span class="p">)</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-17"></a>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-18"></a><span class="c1">#link elements together</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-19"></a><span class="n">src</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">decode</span><span class="p">)</span>
<a name="rest_code_ccd9eb92b7b744f386b7f5e42aa9234e-20"></a><span class="n">decode</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">sink</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="fertige-pipelines">
<h4><a class="toc-backref" href="#id9">Fertige Pipelines</a></h4>
<p>Es besteht auch beispielsweise die Möglichkeit, Audio- und Videosignale voneinander getrennt werden, indem jeweils ein "videosink" und ein "audiosink" erstellt usw. Auf der anderen Seite gibt es vorgefertigte Pipelines für Standardaufgaben wie etwa das Abspielen von Medien.
Ein solches Element ist "playbin", das den Code signifikant vereinfacht:</p>
<pre class="code python"><a name="rest_code_ec6ec0b7f9b34cb5b8f28c4cb0195615-1"></a><span class="n">Gst</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<a name="rest_code_ec6ec0b7f9b34cb5b8f28c4cb0195615-2"></a><span class="n">player</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"playbin"</span><span class="p">,</span><span class="s2">"player"</span><span class="p">)</span>
<a name="rest_code_ec6ec0b7f9b34cb5b8f28c4cb0195615-3"></a><span class="n">sink</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"xvimagesink"</span><span class="p">)</span>
<a name="rest_code_ec6ec0b7f9b34cb5b8f28c4cb0195615-4"></a><span class="n">player</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"uri"</span><span class="p">,</span><span class="n">uri_of_file</span><span class="p">)</span>
<a name="rest_code_ec6ec0b7f9b34cb5b8f28c4cb0195615-5"></a><span class="n">player</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"video-sink"</span><span class="p">,</span> <span class="n">sink</span><span class="p">)</span>
</pre>
</div>
</div>
<div class="section" id="und-los">
<h3><a class="toc-backref" href="#id10">Und los!</a></h3>
<p>Eine Pipeline oder ein "playbin"-Element können nun über <em>Gst.STATE</em> gesteuert werden:</p>
<pre class="code python"><a name="rest_code_77d5b60159d646068937d47fe2567be4-1"></a><span class="n">player</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">PLAYING</span><span class="p">)</span>
<a name="rest_code_77d5b60159d646068937d47fe2567be4-2"></a><span class="n">player</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">PAUSED</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="fortschrittsanzeige">
<h3><a class="toc-backref" href="#id11">Fortschrittsanzeige</a></h3>
<p>Die Fortschrittsanzeige ist an dieser Stelle keine <em>Gtk.ProgressBar</em> sondern eine horizontale <em>Gtk.Scale</em>. Mit diesem Widget lässt sich nicht nur eine Position anzeigen, sondern auch per Maus setzen. Für letzteres wird das Signal <em>value-changed</em> benötigt. Streng genommen ist das Signal <em>change-value</em> an dieser Stelle die sauberere Lösung, die <a class="reference external" href="../vlc-player">im nachfolgenden Beitrag</a> zur Umsetzung des Mediaplayers mit LibVLC verwendet wird.</p>
</div>
</div>
<div class="section" id="moglichkeiten-und-limitierungen">
<h2><a class="toc-backref" href="#id12">Möglichkeiten und Limitierungen</a></h2>
<p>Bei der Einarbeitung in GStreamer stolpert man (an dieser Stelle generalisiert die Autorin weitgehend und möglicherweise unbegründet) über diverse Hürden:</p>
<p>Es gibt eine Reihe von Tutorials. Die Umsetzung wird durch zwei Umstände erschwert:</p>
<ol class="arabic simple">
<li>Die primäre Sprache von und mit GStreamer ist C. Mit Python steht man eher auf experimentellem Boden.</li>
<li>Durch die Versionssprünge sowohl bei GStreamer (von 0.10 auf 1.x) als auch Python (2.x auf 3.x) funktionieren viele ältere Anleitungen nicht mehr ohne weiteres.</li>
</ol>
<p>Es gibt weiterhin Effekte, die sich mir nicht erschließen. Das in diesem Artikel aufgeführte Beispiel funktioniert nicht, wenn das Gtk-Fenster eine Headerbar enthält. Es sollte mit der Verwendung von "gtksink" lösbar sein, aber dies wiederum verweigert das Abspielen in einem zugewiesenen Widget.
Die Komplexität und Mächtigkeit von GStreamer ist massiv verwirrend.</p>
</div>
<div class="section" id="links">
<h2><a class="toc-backref" href="#id13">Links</a></h2>
<blockquote>
<ul class="simple">
<li><a class="reference external" href="http://brettviren.github.io/pygst-tutorial-org/">Tutorial on using GStreamer Python Bindings in org-mode</a></li>
<li><a class="reference external" href="https://github.com/hadware/gstreamer-python-player/blob/master/seek.py">gstreamer-python-player/seek.py example</a></li>
<li><a class="reference external" href="https://gstreamer.freedesktop.org/documentation/plugins.html">GStreamer List of Elements and Plugins</a></li>
<li><a class="reference external" href="https://gstreamer.freedesktop.org/documentation/index.html">GStreamer documentation</a></li>
<li><a class="reference external" href="https://adnanalamkhan.wordpress.com/2015/03/01/using-gstreamer-1-0-with-python/">Using GStreamer 1.0 with Python</a></li>
<li><a class="reference external" href="../vlc-player">Mediaplayer mit VLC</a></li>
</ul>
</blockquote>
<!-- TEASER_END -->
</div>
<div class="section" id="listings">
<h2><a class="toc-backref" href="#id14">Listings</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id15">Glade</a></h3>
<p><a class="reference external" href="../../listings/19_gst_player.glade.html">19_gst_player.glade</a>  <a class="reference external" href="../../listings/19_gst_player.glade">(Source)</a></p>
<pre class="code xml"><a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-2"></a><span class="c">&lt;!-- Generated with glade 3.20.0 --&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-3"></a><span class="nt">&lt;interface&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-4"></a>  <span class="nt">&lt;requires</span> <span class="na">lib=</span><span class="s">"gtk+"</span> <span class="na">version=</span><span class="s">"3.16"</span><span class="nt">/&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-5"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkAdjustment"</span> <span class="na">id=</span><span class="s">"adjustment"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-6"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"upper"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-7"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"step_increment"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-8"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"page_increment"</span><span class="nt">&gt;</span>10<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-9"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-10"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkImage"</span> <span class="na">id=</span><span class="s">"image1"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-11"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-12"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-13"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"stock"</span><span class="nt">&gt;</span>gtk-media-rewind<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-14"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-15"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkImage"</span> <span class="na">id=</span><span class="s">"image2"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-16"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-17"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-18"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"stock"</span><span class="nt">&gt;</span>gtk-media-forward<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-19"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-20"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkImage"</span> <span class="na">id=</span><span class="s">"image3"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-21"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-22"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-23"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"stock"</span><span class="nt">&gt;</span>gtk-media-pause<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-24"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-25"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkWindow"</span> <span class="na">id=</span><span class="s">"window"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-26"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-27"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"title"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>GStreamer media player<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-28"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"default_width"</span><span class="nt">&gt;</span>600<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-29"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"default_height"</span><span class="nt">&gt;</span>350<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-30"></a>    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"destroy"</span> <span class="na">handler=</span><span class="s">"on_window_destroy"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-31"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-32"></a>      <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkBox"</span> <span class="na">id=</span><span class="s">"box1"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-33"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-34"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-35"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"orientation"</span><span class="nt">&gt;</span>vertical<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-36"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-37"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkDrawingArea"</span> <span class="na">id=</span><span class="s">"play_here"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-38"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-39"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-40"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-41"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-42"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-43"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-44"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-45"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-46"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-47"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-48"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkSeparator"</span> <span class="na">id=</span><span class="s">"separator1"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-49"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-50"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-51"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-52"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-53"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-54"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-55"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-56"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-57"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-58"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-59"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkBox"</span> <span class="na">id=</span><span class="s">"box3"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-60"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-61"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-62"></a>            <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-63"></a>              <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButtonBox"</span> <span class="na">id=</span><span class="s">"buttonbox1"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-64"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-65"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-66"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"layout_style"</span><span class="nt">&gt;</span>start<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-67"></a>                <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-68"></a>                  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span> <span class="na">id=</span><span class="s">"backward"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-69"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-70"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-71"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-72"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"image"</span><span class="nt">&gt;</span>image1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-73"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"always_show_image"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-74"></a>                    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"clicked"</span> <span class="na">handler=</span><span class="s">"on_backward_clicked"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-75"></a>                  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-76"></a>                  <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-77"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-78"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-79"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-80"></a>                  <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-81"></a>                <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-82"></a>                <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-83"></a>                  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span> <span class="na">id=</span><span class="s">"forward"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-84"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-85"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-86"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-87"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"image"</span><span class="nt">&gt;</span>image2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-88"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"always_show_image"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-89"></a>                    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"clicked"</span> <span class="na">handler=</span><span class="s">"on_forward_clicked"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-90"></a>                  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-91"></a>                  <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-92"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-93"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-94"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-95"></a>                  <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-96"></a>                <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-97"></a>                <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-98"></a>                  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkToggleButton"</span> <span class="na">id=</span><span class="s">"playpause_togglebutton"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-99"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-100"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-101"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-102"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"image"</span><span class="nt">&gt;</span>image3<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-103"></a>                    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"toggled"</span> <span class="na">handler=</span><span class="s">"on_playpause_togglebutton_toggled"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-104"></a>                  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-105"></a>                  <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-106"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-107"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-108"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-109"></a>                  <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-110"></a>                <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-111"></a>              <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-112"></a>              <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-113"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-114"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-115"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-116"></a>              <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-117"></a>            <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-118"></a>            <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-119"></a>              <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkScale"</span> <span class="na">id=</span><span class="s">"progress"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-120"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"width_request"</span><span class="nt">&gt;</span>300<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-121"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-122"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-123"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"halign"</span><span class="nt">&gt;</span>center<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-124"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"margin_left"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-125"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"margin_right"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-126"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"adjustment"</span><span class="nt">&gt;</span>adjustment<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-127"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill_level"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-128"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"round_digits"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-129"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"draw_value"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-130"></a>              <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-131"></a>              <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-132"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-133"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-134"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-135"></a>              <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-136"></a>            <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-137"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-138"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-139"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-140"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-141"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-142"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-143"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-144"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-145"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkBox"</span> <span class="na">id=</span><span class="s">"box2"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-146"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-147"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-148"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"homogeneous"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-149"></a>            <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-150"></a>              <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span> <span class="na">id=</span><span class="s">"vbutton"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-151"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"label"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>Play video<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-152"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-153"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-154"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-155"></a>                <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"clicked"</span> <span class="na">handler=</span><span class="s">"on_vbutton_clicked"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-156"></a>              <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-157"></a>              <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-158"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-159"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-160"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-161"></a>              <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-162"></a>            <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-163"></a>            <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-164"></a>              <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span> <span class="na">id=</span><span class="s">"ibutton"</span><span class="nt">&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-165"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"label"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>Show image<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-166"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-167"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-168"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-169"></a>                <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"clicked"</span> <span class="na">handler=</span><span class="s">"on_ibutton_clicked"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-170"></a>              <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-171"></a>              <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-172"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-173"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-174"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-175"></a>              <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-176"></a>            <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-177"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-178"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-179"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-180"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-181"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-182"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-183"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-184"></a>      <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-185"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-186"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-187"></a>      <span class="nt">&lt;placeholder/&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-188"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-189"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_0f399ef33efe4c5a82e8dca1a66df4ff-190"></a><span class="nt">&lt;/interface&gt;</span>
</pre>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id16">Python</a></h3>
<p><a class="reference external" href="../../listings/19_gst_simpleplayer.py.html">19_gst_simpleplayer.py</a>  <a class="reference external" href="../../listings/19_gst_simpleplayer.py">(Source)</a></p>
<pre class="code python"><a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-1"></a><span class="ch">#!/usr/bin/env python</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-2"></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-3"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-4"></a><span class="kn">import</span> <span class="nn">os</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-5"></a><span class="kn">import</span> <span class="nn">time</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-6"></a><span class="kn">import</span> <span class="nn">gi</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-7"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-8"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s1">'Gtk'</span><span class="p">,</span><span class="s1">'3.0'</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-9"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s1">'Gst'</span><span class="p">,</span><span class="s1">'1.0'</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-10"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s1">'GstVideo'</span><span class="p">,</span><span class="s1">'1.0'</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-11"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-12"></a><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">Gst</span><span class="p">,</span> <span class="n">Gtk</span><span class="p">,</span> <span class="n">GLib</span><span class="p">,</span> <span class="n">GstVideo</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-13"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-14"></a><span class="k">class</span> <span class="nc">GenericException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-15"></a>    <span class="k">pass</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-16"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-17"></a><span class="k">class</span> <span class="nc">Handler</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-18"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-19"></a>    <span class="k">def</span> <span class="nf">on_window_destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-20"></a>        <span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-21"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-22"></a>    <span class="k">def</span> <span class="nf">on_playpause_togglebutton_toggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-23"></a>        <span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">playpause_button</span><span class="o">.</span><span class="n">get_active</span><span class="p">():</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-24"></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">new_from_stock</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_MEDIA_PLAY</span><span class="p">,</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IconSize</span><span class="o">.</span><span class="n">BUTTON</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-25"></a>            <span class="n">widget</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"image"</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-26"></a>            <span class="n">app</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-27"></a>        <span class="k">else</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-28"></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">new_from_stock</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_MEDIA_PAUSE</span><span class="p">,</span><span class="n">Gtk</span><span class="o">.</span><span class="n">IconSize</span><span class="o">.</span><span class="n">BUTTON</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-29"></a>            <span class="n">widget</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"image"</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-30"></a>            <span class="n">app</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-31"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-32"></a>    <span class="k">def</span> <span class="nf">on_forward_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-33"></a>        <span class="n">app</span><span class="o">.</span><span class="n">skip_time</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-34"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-35"></a>    <span class="k">def</span> <span class="nf">on_backward_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-36"></a>        <span class="n">app</span><span class="o">.</span><span class="n">skip_time</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-37"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-38"></a>    <span class="k">def</span> <span class="nf">on_progress_value_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-39"></a>        <span class="n">app</span><span class="o">.</span><span class="n">on_slider_seek</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-40"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-41"></a>    <span class="k">def</span> <span class="nf">on_vbutton_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-42"></a>        <span class="n">app</span><span class="o">.</span><span class="n">clear_playbin</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-43"></a>        <span class="n">app</span><span class="o">.</span><span class="n">setup_player</span><span class="p">(</span><span class="s2">"mediaplayer.avi"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-44"></a>        <span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">playpause_button</span><span class="o">.</span><span class="n">get_active</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-45"></a>            <span class="n">app</span><span class="o">.</span><span class="n">playpause_button</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-46"></a>        <span class="k">else</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-47"></a>            <span class="n">app</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-48"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-49"></a>    <span class="k">def</span> <span class="nf">on_ibutton_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-50"></a>        <span class="n">app</span><span class="o">.</span><span class="n">clear_playbin</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-51"></a>        <span class="n">app</span><span class="o">.</span><span class="n">setup_player</span><span class="p">(</span><span class="s2">"mediaplayer.jpg"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-52"></a>        <span class="n">app</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-53"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-54"></a><span class="k">class</span> <span class="nc">GstPlayer</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-55"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-56"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-57"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-58"></a>        <span class="c1">#init GStreamer</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-59"></a>        <span class="n">Gst</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-60"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-61"></a>        <span class="c1">#setting up builder</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-62"></a>        <span class="n">builder</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Builder</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-63"></a>        <span class="n">builder</span><span class="o">.</span><span class="n">add_from_file</span><span class="p">(</span><span class="s2">"19_gst_player.glade"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-64"></a>        <span class="n">builder</span><span class="o">.</span><span class="n">connect_signals</span><span class="p">(</span><span class="n">Handler</span><span class="p">())</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-65"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-66"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">movie_window</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"play_here"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-67"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">playpause_button</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"playpause_togglebutton"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">slider</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"progress"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">slider_handler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"value-changed"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_slider_seek</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-70"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-71"></a>        <span class="n">window</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"window"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-72"></a>        <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-73"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-74"></a>        <span class="c1">#setting up videoplayer</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-75"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"playbin"</span><span class="p">,</span><span class="s2">"player"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-76"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sink</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"xvimagesink"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-77"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sink</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"force-aspect-ratio"</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-78"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-79"></a>    <span class="k">def</span> <span class="nf">setup_player</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">f</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-80"></a>        <span class="c1">#file to play must be transmitted as uri</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-81"></a>        <span class="n">uri</span> <span class="o">=</span> <span class="s2">"file://"</span><span class="o">+</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-82"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"uri"</span><span class="p">,</span><span class="n">uri</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-83"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-84"></a>        <span class="c1">#make playbin play in specified DrawingArea widget instead of separate, GstVideo needed</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-85"></a>        <span class="n">win_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">movie_window</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s1">'window'</span><span class="p">)</span><span class="o">.</span><span class="n">get_xid</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-86"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sink</span><span class="o">.</span><span class="n">set_window_handle</span><span class="p">(</span><span class="n">win_id</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-87"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"video-sink"</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">sink</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-88"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-89"></a>    <span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_playing</span> <span class="o">=</span> <span class="bp">True</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">PLAYING</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-92"></a>        <span class="c1">#starting up a timer to check on the current playback value</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-93"></a>        <span class="n">GLib</span><span class="o">.</span><span class="n">timeout_add</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_slider</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-94"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-95"></a>    <span class="k">def</span> <span class="nf">pause</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-96"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_playing</span> <span class="o">=</span> <span class="bp">False</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-97"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">PAUSED</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-98"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-99"></a>    <span class="k">def</span> <span class="nf">current_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-100"></a>        <span class="n">status</span><span class="p">,</span><span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">query_position</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-101"></a>        <span class="k">return</span> <span class="n">position</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-102"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-103"></a>    <span class="c1">#skip 20 seconds on forward/backward button</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-104"></a>    <span class="k">def</span> <span class="nf">skip_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-105"></a>        <span class="n">app</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">seek_simple</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">,</span>  <span class="n">Gst</span><span class="o">.</span><span class="n">SeekFlags</span><span class="o">.</span><span class="n">FLUSH</span> <span class="o">|</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SeekFlags</span><span class="o">.</span><span class="n">KEY_UNIT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_position</span><span class="p">()</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SECOND</span> <span class="o">*</span> <span class="n">direction</span> <span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-106"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-107"></a>    <span class="k">def</span> <span class="nf">update_slider</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-108"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_playing</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-109"></a>            <span class="k">return</span> <span class="bp">False</span> <span class="c1"># cancel timeout</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-110"></a>        <span class="k">else</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-111"></a>            <span class="n">success</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">query_duration</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-112"></a>            <span class="c1">#adjust duration and position relative to absolute scale of 100</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-113"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">/</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">/</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SECOND</span> <span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-114"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-115"></a>                <span class="k">raise</span> <span class="n">GenericException</span><span class="p">(</span><span class="s2">"Couldn't fetch duration"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-116"></a>            <span class="c1">#fetching the position, in nanosecs</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-117"></a>            <span class="n">success</span><span class="p">,</span> <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">query_position</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-118"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-119"></a>                <span class="k">raise</span> <span class="n">GenericException</span><span class="p">(</span><span class="s2">"Couldn't fetch current position to update slider"</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-120"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-121"></a>            <span class="c1"># block seek handler so we don't seek when we set_value()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-122"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">handler_block</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_handler_id</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-123"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-124"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">/</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SECOND</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">mult</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-125"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-126"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">handler_unblock</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_handler_id</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-127"></a>        <span class="k">return</span> <span class="bp">True</span> <span class="c1"># continue calling every x milliseconds</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-128"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-129"></a>    <span class="k">def</span> <span class="nf">on_slider_seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-130"></a>        <span class="n">seek_time</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-131"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">seek_simple</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">,</span>  <span class="n">Gst</span><span class="o">.</span><span class="n">SeekFlags</span><span class="o">.</span><span class="n">FLUSH</span> <span class="o">|</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SeekFlags</span><span class="o">.</span><span class="n">KEY_UNIT</span><span class="p">,</span> <span class="n">seek_time</span> <span class="o">*</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SECOND</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">mult</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-132"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-133"></a>    <span class="k">def</span> <span class="nf">clear_playbin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-134"></a>        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-135"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">NULL</span><span class="p">)</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-136"></a>        <span class="k">except</span><span class="p">:</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-137"></a>            <span class="k">pass</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-138"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-139"></a>    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-140"></a>        <span class="n">Gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-141"></a>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-142"></a><span class="n">app</span> <span class="o">=</span> <span class="n">GstPlayer</span><span class="p">()</span>
<a name="rest_code_566f9366381841f8b0e5a51469bb0eaa-143"></a><span class="n">app</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre>
</div>
<div class="section" id="beispieldateien">
<h3><a class="toc-backref" href="#id17">Beispieldateien</a></h3>
<blockquote>
<ul class="simple">
<li><a class="reference external" href="../../files/mediaplayer.avi">Video (13,7 MB)</a></li>
<li><a class="reference external" href="../../files/mediaplayer.jpg">Image (553 kB)</a></li>
</ul>
</blockquote>
</div>
</div>
</div>
        </div>
        
        <ul class="pager hidden-print">
<li class="previous">
                <a href="../gpt-v04-release/" rel="prev" title="GPT: v0.4 Release">Vorheriger Eintrag</a>
            </li>
            <li class="next">
                <a href="../vlc-player/" rel="next" title="Mediaplayer mit VLC">Nächster Eintrag</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="bahnfreikartoffelbrei",
            disqus_url="https://encarsia.github.io/posts/gst-player/",
        disqus_title="Mediaplayer mit GStreamer",
        disqus_identifier="cache/posts/mediaplayer-mit-gstreamer.html",
        disqus_config = function () {
            this.language = "de";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        
    


    </div>

        
       <script>var disqus_shortname="bahnfreikartoffelbrei";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2018 <a href="mailto:An.Ke@bahnfreikartoffelbrei.de">Anke (encarsia)</a> - 
Powered by <a href="http://getnikola.com">Nikola</a> - 
Zen theme based in <a href="https://github.com/arusahni/website-template">Arusahni's website-template</a><br></p>
            
        </footer>
</div>
    </section><script src="../../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
