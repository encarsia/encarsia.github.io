<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="description" content="Gute Absichten">
<meta name="viewport" content="width=device-width">
<title>Merge and Destroy (Ältere Einträge, Seite 4) | Merge and Destroy</title>
<link href="//fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.0.11/css/fork-awesome.min.css" integrity="sha256-MGU/JUq/40CFrfxjXb5pZjpoZmxiP2KuICN5ElLFNd8=" crossorigin="anonymous">
<link href="assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (de)" href="rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="en/rss.xml">
<link rel="canonical" href="https://encarsia.github.io/index-4.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->
</head>
<body>
    <section class="social"><ul>
<li><a href="index.html" title="Home"><i class="fa fa-home"></i></a></li>
            <li><a href="posts/tutorial-reihe-glade/index.html" title="Tutorials"><i class="fa fa-lightbulb-o"></i></a></li>
            <li><a href="https://octodon.social/@encarsia" title="Mastodon"><i class="fa fa-mastodon"></i></a></li>
            <li><a href="https://twitter.com/encarsia_" title="Twitter"><i class="fa fa-twitter"></i></a></li>
            <li><a href="https://plus.google.com/105146352752269764996/posts" title="Google+"><i class="fa fa-google-plus-official"></i></a></li>
            <li><a href="https://github.com/encarsia" title="Github"><i class="fa fa-github"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="fa fa-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="fa fa-rss"></i></a></li>
            <li><a href="pages/about/index.html" title="About me"><i class="fa fa-user"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="fa fa-folder-open"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
        <div class="post">
            <h1 class="title"><a href="posts/non-fortschritte/">NoN: Fortschritte</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-01-08T22:18:52+01:00">2017-01-08 22:18</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/non-fortschritte/#disqus_thread" data-disqus-identifier="cache/posts/non-fortschritte.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/nikola/" rel="tag">nikola</a></li>
           <li><a class="tag p-category" href="categories/non/" rel="tag">non</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p><strong>Knights of Ni - Fortschritte</strong></p>
<p>Wie <a class="reference external" href="posts/neues-projekt-knights-of-ni/">bereits erwähnt</a>, bastel ich aktuell an einer GUI für <a class="reference external" href="https://getnikola.com">Nikola</a>, die einige Fortschritte vorzuweisen hat:</p>
<ul class="simple">
<li>Titelleiste entfernt, da Headerbar benutzt wird</li>
<li>Wechseln zwischen Nikola-Instanzen (zuletzt benutzte wird gespeichert)</li>
<li>Bookmarkfunktion (bislang können nur Bookmarks hinzugefügt werden, bei Bedarf manuell aus der config entfernen)</li>
<li>Untersützung für mehrsprachige Seiten:</li>
</ul>
<blockquote>
<ul class="simple">
<li>Anzeige der Standardsprache und der konfigurierten anderen Sprachen</li>
<li>Posts/Pages-Tab zeigt Vorhandensein von Übersetzungen an</li>
<li>Tab "Translations" zeigt vorhandene Dateien an</li>
<li>per Rechtsklick können neue Übersetzungen angelegt werden, dabei wird der Ausgangsbeitrag gemäß entsprechendem Dateimuster gespeichert</li>
<li><em>ich weiß noch nicht, wie sinnvoll dieser separate Tab ist (Redundanz) und ob ich ihn beibehalte</em></li>
</ul>
</blockquote>
<ul class="simple">
<li>hat der Artikel keinen Titel, wird das interne Kürzel (slug) oder, falls ebenfalls nicht vorhanden, der Dateiname angezeigt</li>
<li>gesprächiges Log, um vorzutäuschen, dass ganz viel wichtiger Kram passiert</li>
</ul>
<a class="reference external image-reference" href="images/non2.png"><img alt="/images/non2.thumbnail.png" src="images/non2.thumbnail.png"></a>
<p>Das läuft aus meiner Sicht schon alles erstaunlich gut. Dummerweise habe ich bei der Verwendung von Glade (und auch Python, aber vor allem Glade) inzwischen ebenfalls einige Fortschritte gemacht, was mich ernsthaft zur Überlegung geführt hat, das GoProTool nochmal zu überarbeiten. Die Oberfläche würde ich belassen, aber viel Funktionalität könnte effizienter umgesetzt werden. Ich stelle das mal hinten an.</p>
<p>Geplant ist nun ein simples Nikola-unabhängiges Vorlagensystem und anschließend ist etwas Fleißarbeit bei der Lokalisation erforderlich.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/artikelubersetzungen/">Artikelübersetzungen</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-01-04T21:54:21+01:00">2017-01-04 21:54</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/artikelubersetzungen/#disqus_thread" data-disqus-identifier="cache/posts/artikelubersetzungen.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/nikola/" rel="tag">nikola</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>Sobald ich herausgefunden habe, wie Multilingualität in Nikola funktioniert, werde ich die Tutorialartikel ins Englische übersetzen.</p>
<p>Nachtrag: okay, war war einfach...</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/youniversity-python-tricks/">YouNiversity: Python Tricks</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-01-04T20:51:38+01:00">2017-01-04 20:51</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/youniversity-python-tricks/#disqus_thread" data-disqus-identifier="cache/posts/youniversity-python-tricks.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
           <li><a class="tag p-category" href="categories/video/" rel="tag">video</a></li>
           <li><a class="tag p-category" href="categories/youtube/" rel="tag">youtube</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>Daniel Bader zeigt auf seinem YouTube-Kanal allerlei Nützliches zum Thema Python.</p>
<div class="youtube-video">
<iframe width="480" height="315" src="https://www.youtube-nocookie.com/embed/gllUwQnYVww?rel=0&amp;wmode=transparent" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
</div>
<p>Aktuell gibt es sein in Arbeit befindliches Buch <em>"Python Tricks. The Book"</em> gerade zum unschlagbaren Preis von 9 $ (+ 1,71 $ deutsche Umsatzsteuer): <a class="reference external" href="https://dbader.org/products/python-tricks-book/">Klick</a></p>
<p>Es bestehen keine persönlichen oder/und finanziellen Verbindungen.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/dialoge/">Dialoge</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2016-12-31T17:51:29+01:00">2016-12-31 17:51</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/dialoge/#disqus_thread" data-disqus-identifier="cache/posts/dialoge.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="contents warning pull-right topic" id="inhalt">
<p class="topic-title first">Inhalt</p>
<ul class="simple">
<li>
<a class="reference internal" href="posts/dialoge/#glade" id="id3">Glade</a><ul>
<li><a class="reference internal" href="posts/dialoge/#aboutdialog" id="id4">AboutDialog</a></li>
<li><a class="reference internal" href="posts/dialoge/#messagedialog" id="id5">MessageDialog</a></li>
<li><a class="reference internal" href="posts/dialoge/#buttons-und-responses" id="id6">Buttons und Responses</a></li>
<li><a class="reference internal" href="posts/dialoge/#wiederherstellbare-dialoge" id="id7">Wiederherstellbare Dialoge</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/dialoge/#python" id="id8">Python</a><ul>
<li><a class="reference internal" href="posts/dialoge/#dialog-aufrufen" id="id9">Dialog aufrufen</a></li>
<li><a class="reference internal" href="posts/dialoge/#responses" id="id10">Responses</a></li>
<li><a class="reference internal" href="posts/dialoge/#delete-event" id="id11">Delete-event</a></li>
<li><a class="reference internal" href="posts/dialoge/#mehrere-glade-dateien" id="id12">Mehrere Glade-Dateien</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/dialoge/#listings" id="id13">Listings</a><ul>
<li><a class="reference internal" href="posts/dialoge/#id1" id="id14">Glade</a></li>
<li><a class="reference internal" href="posts/dialoge/#id2" id="id15">Python</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Anzeige von Dialogfenstern</strong></p>
<p>Dialoge sind ergänzende Fenster zur Anwendung und dienen der Interaktion mit dem Benutzer, in denen Informationen angezeigt werden oder Eingaben vom Benutzer abgefragt werden können. Die <em>GtkDialog</em>-Klasse bietet einige Unterklassen für gebräuchliche Anzeigen und Abfragen, wie die im Beispiel verwendeten <em>AboutDialog</em>- und <em>MessageDialog</em> (<a class="reference external" href="posts/fcdialog/">Artikel zum FileChooserDialog</a>).</p>
<a class="reference external image-reference" href="images/13_dialoge.png"><img alt="/images/13_dialoge.thumbnail.png" src="images/13_dialoge.thumbnail.png"></a>
<div class="section" id="glade">
<h2><a class="toc-backref" href="posts/dialoge/#id3">Glade</a></h2>
<p>Dialog-Widgets findet man unter <em>"Oberste Ebene"</em> neben den Fenster-Widgets.</p>
<p>Dialoge sind ergänzende Fenster, um den Fokus des Nutzers zu lenken. Sie können direkt an ein übergeordnetes Fenster angeheftet werden, mindestens aber müssen sie unter <em>"Allgemein &gt; Fensterattribute &gt; Vorübergehend für:"</em> einem Eltern-Fenster zugeordnet werden. Sie erscheinen dadurch nicht als separates Fenster in der Übersicht und erben ein vorhandenes Icon.</p>
<div class="section" id="aboutdialog">
<h3><a class="toc-backref" href="posts/dialoge/#id4">AboutDialog</a></h3>
<p>Das "About"-Dialogfenster bietet in der Regel Informationen zum Projekt, darunter Version, Lizenz, beteiligte Programmierer, Übersetzer etc. Dies alles lässt sich sehr einfach direkt in Glade angeben.</p>
</div>
<div class="section" id="messagedialog">
<h3><a class="toc-backref" href="posts/dialoge/#id5">MessageDialog</a></h3>
<p>Der MessageDialog ist ein Standarddialog zum Anzeigen oder Abfragen von Informationen. Er ist so konfiguriert, dass er keine eigene Fensterdekoration besitzt und nicht als Fenster in der Taskbar erscheint. Außerdem bietet er die Möglichkeit, Standardbuttons einzurichten.</p>
</div>
<div class="section" id="buttons-und-responses">
<h3><a class="toc-backref" href="posts/dialoge/#id6">Buttons und Responses</a></h3>
<p>Dialoge besitzen bereits intern über eine <em>GtkButtonBox</em>, die mit beliebigen Buttons befüllt werden kann. Dieser Bereich ist als "intern action_area" gekennzeichnet.</p>
<p>Im Gegensatz zu Buttons in normalen Fenstern müssen in Dialogen keine Signale auf <em>clicked</em> angelegt werden, sondern man legt in den Button-Eigenschaften unter <em>"Allgemein"</em> eine Antwortkennung (Response) fest (int) und belegt das Signal <em>response</em> des <em>GtkDialog</em>.</p>
<p>Standardbuttons wie im MessageDialog auswählbar besitzen eine vorgegebene Response (siehe <a class="reference external" href="https://lazka.github.io/pgi-docs/#Gtk-3.0/enums.html#Gtk.ResponseType">Python GI API Reference</a>):</p>
<blockquote>
<ul class="simple">
<li>
<strong>Ok</strong> -5</li>
<li>
<strong>Abbrechen</strong> -6</li>
<li>
<strong>Schließen</strong> -7</li>
<li>
<strong>Ja</strong> -8</li>
<li>
<strong>Nein</strong> -9</li>
<li>
<strong>[X]</strong> -4</li>
</ul>
</blockquote>
<p>Der große Vorteil der Responses besteht darin, dass sie sich direkt auf das Dialog-Objekt beziehen; man kann die Responses in einer Funktion verarbeiten und muss dies nicht für jeden einzelnen Button vornehmen.</p>
</div>
<div class="section" id="wiederherstellbare-dialoge">
<h3><a class="toc-backref" href="posts/dialoge/#id7">Wiederherstellbare Dialoge</a></h3>
<p>Das Problem von per <em>destroy</em>-Signal geschlossenen Fenstern besteht darin, dass sie sich nicht wieder aufrufen lassen. Deshalb wird stattdessen das Signal <em>delete-event</em> belegt.</p>
</div>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="posts/dialoge/#id8">Python</a></h2>
<div class="section" id="dialog-aufrufen">
<h3><a class="toc-backref" href="posts/dialoge/#id9">Dialog aufrufen</a></h3>
<p>Da Dialoge auch <em>Gtk.Windows</em> sind, lassen sie sich mit <tt class="docutils literal">show_all()</tt> aufrufen. Die Funktion von Dialogen besteht allerdings in der Regel darin, Nutzereingaben zu erfassen oder Informationen zu vermitteln. Deshalb ruft man die Fenster am besten mit <tt class="docutils literal">run()</tt> auf. Dies bewirkt, dass das Dialogfenster über das Elternfenster fixiert wird und jenes nicht aktiv ist, bis ein Response-Signal ausgeführt wird.</p>
</div>
<div class="section" id="responses">
<h3><a class="toc-backref" href="posts/dialoge/#id10">Responses</a></h3>
<p>Beim Auslösen des <em>response</em>-Signals wird die Antwortkennung als Parameter übergeben, so kann wie bereits erwähnt, jede innerhalb einer einzelnen Funktion verarbeitet werden:</p>
<pre class="code python"><a name="rest_code_cca2bb1297af4d11b472377b77e5f9cf-1"></a><span class="k">def</span> <span class="nf">on_dialog_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">,</span><span class="n">response</span><span class="p">):</span>
<a name="rest_code_cca2bb1297af4d11b472377b77e5f9cf-2"></a>    <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a name="rest_code_cca2bb1297af4d11b472377b77e5f9cf-3"></a>        <span class="n">widget</span><span class="o">.</span><span class="n">hide_on_delete</span><span class="p">()</span>
<a name="rest_code_cca2bb1297af4d11b472377b77e5f9cf-4"></a>    <span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a name="rest_code_cca2bb1297af4d11b472377b77e5f9cf-5"></a>        <span class="n">do</span><span class="o">.</span><span class="n">something</span><span class="p">()</span>
<a name="rest_code_cca2bb1297af4d11b472377b77e5f9cf-6"></a>    <span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="p">(</span><span class="mi">2</span> <span class="ow">or</span> <span class="mi">3</span><span class="p">):</span>
<a name="rest_code_cca2bb1297af4d11b472377b77e5f9cf-7"></a>        <span class="n">do</span><span class="o">.</span><span class="n">something</span><span class="o">.</span><span class="n">different</span><span class="p">()</span>
</pre>
</div>
<div class="section" id="delete-event">
<h3><a class="toc-backref" href="posts/dialoge/#id11">Delete-event</a></h3>
<p>Mit der Funktion <tt class="docutils literal">hide_on_delete()</tt> ausgeblendete Dialoge oder reguläre Fenster lassen sich mit <tt class="docutils literal">show_all()</tt> wieder anzeigen:</p>
<pre class="code python"><a name="rest_code_66ffc90dd4c247f7a8cc8d83cced6933-1"></a><span class="k">def</span> <span class="nf">on_dialog_delete_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
<a name="rest_code_66ffc90dd4c247f7a8cc8d83cced6933-2"></a>    <span class="n">widget</span><span class="o">.</span><span class="n">hide_on_delete</span><span class="p">()</span>
<a name="rest_code_66ffc90dd4c247f7a8cc8d83cced6933-3"></a>    <span class="k">return</span> <span class="bp">True</span>
</pre>
</div>
<div class="section" id="mehrere-glade-dateien">
<h3><a class="toc-backref" href="posts/dialoge/#id12">Mehrere Glade-Dateien</a></h3>
<p>Wie <a class="reference external" href="posts/fenster-mit-aussicht/">bereits erwähnt</a>, können mehrere Dateien für Fenster und Dialoge innerhalb eines Projektes verwendet werden. Allerdings ist es nicht möglich, diese dateiübergreifend aneinanderzubinden, es wird die <tt class="docutils literal">set_transient_for</tt>-Funktion von <em>GtkWindow</em> benötigt:</p>
<pre class="code python"><a name="rest_code_5d174d583b474a09ac7e80f08cb27f21-1"></a><span class="n">dialog</span><span class="o">.</span><span class="n">set_transient_for</span><span class="p">(</span><span class="n">mainwindow</span><span class="p">)</span>
</pre>
<p>Die Zugehörigkeit zum Elternwidget wird in Glade in den Eigenschaften unter <em>"Allgemein &gt; Vorübergehend für:"</em> angegeben.</p>
<p class="more"><a href="posts/dialoge/">Weiterlesen…</a></p>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/ansichtssache/">Ansichtssache</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2016-12-22T00:02:20+01:00">2016-12-22 00:02</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/ansichtssache/#disqus_thread" data-disqus-identifier="cache/posts/ansichtssache.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="contents warning pull-right topic" id="inhalt">
<p class="topic-title first">Inhalt</p>
<ul class="simple">
<li><a class="reference internal" href="posts/ansichtssache/#treestore-vs-liststore" id="id5">TreeStore vs. ListStore</a></li>
<li>
<a class="reference internal" href="posts/ansichtssache/#glade" id="id6">Glade</a><ul>
<li><a class="reference internal" href="posts/ansichtssache/#treemodelsort" id="id7">TreeModelSort</a></li>
<li><a class="reference internal" href="posts/ansichtssache/#treemodelfilter" id="id8">TreeModelFilter</a></li>
<li><a class="reference internal" href="posts/ansichtssache/#formatierung-aus-dem-modell-laden" id="id9">Formatierung aus dem Modell laden</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/ansichtssache/#python" id="id10">Python</a><ul>
<li><a class="reference internal" href="posts/ansichtssache/#id1" id="id11">TreeModelSort</a></li>
<li><a class="reference internal" href="posts/ansichtssache/#id2" id="id12">TreeModelFilter</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/ansichtssache/#listings" id="id13">Listings</a><ul>
<li><a class="reference internal" href="posts/ansichtssache/#id3" id="id14">Glade</a></li>
<li><a class="reference internal" href="posts/ansichtssache/#id4" id="id15">Python</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Daten anzeigen mit TreeStore</strong></p>
<p>(Fortsetzung zum <a class="reference external" href="posts/uberlistet/">ListStore-Artikel</a>)</p>
<a class="reference external image-reference" href="images/12_treestore.png"><img alt="/images/12_treestore.thumbnail.png" src="images/12_treestore.thumbnail.png" style="width: 480px;"></a>
<div class="section" id="treestore-vs-liststore">
<h2><a class="toc-backref" href="posts/ansichtssache/#id5">TreeStore vs. ListStore</a></h2>
<p>Im Gegensatz zum ListStore können Zeilen eines TreeStores ihrerseits Kind-Elemente besitzen, die <tt class="docutils literal">append</tt>-Funktion benötigt demzufolge ein weiteren Parameter, der einen Bezug zu einer anderen Datenzeile anzeigt:</p>
<pre class="code python"><a name="rest_code_9e9a4009dfc943cab3d584905135bdf6-1"></a><span class="c1">#append row to liststore</span>
<a name="rest_code_9e9a4009dfc943cab3d584905135bdf6-2"></a><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">value1</span><span class="p">,</span><span class="n">value2</span><span class="p">,</span><span class="n">value3</span><span class="p">])</span>
<a name="rest_code_9e9a4009dfc943cab3d584905135bdf6-3"></a>
<a name="rest_code_9e9a4009dfc943cab3d584905135bdf6-4"></a><span class="c1">#append row to treestore</span>
<a name="rest_code_9e9a4009dfc943cab3d584905135bdf6-5"></a><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parent</span><span class="p">,[</span><span class="n">value1</span><span class="p">,</span><span class="n">value2</span><span class="p">,</span><span class="n">value3</span><span class="p">])</span>
</pre>
<p>Der Wert der Variable <em>parent</em> ist entweder</p>
<ul class="simple">
<li>
<strong>None</strong>, wenn die Zeile keine übergeordnete Zeile besitzt, oder</li>
<li>
<strong>TreeIter</strong>, der zur übergeordneten Zeile zeigt</li>
</ul>
<p>Der TreeIter wird beim Erstellen einer Zeile erzeugt, untergeordnete Zeilen werden nach folgendem Schema angelegt:</p>
<pre class="code python"><a name="rest_code_7df8e7e61f4c4457bd95dbac0a927475-1"></a><span class="n">row1</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">,[</span><span class="n">value1</span><span class="p">,</span><span class="n">value2</span><span class="p">,</span><span class="n">value3</span><span class="p">])</span>
<a name="rest_code_7df8e7e61f4c4457bd95dbac0a927475-2"></a><span class="n">row2</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row1</span><span class="p">,[</span><span class="n">value1</span><span class="p">,</span><span class="n">value2</span><span class="p">,</span><span class="n">value3</span><span class="p">])</span>
</pre>
<p>Man erhält den <em>TreeIter</em>-Wert einer Zeile am einfachsten über die <tt class="docutils literal">get_selection</tt>-Funktion des <em>GtkTreeSelection</em>-Widgets von TreeView (wird automatisch angelegt).</p>
</div>
<div class="section" id="glade">
<h2><a class="toc-backref" href="posts/ansichtssache/#id6">Glade</a></h2>
<p>Im Beispiel werden zwei TreeStores und die jeweils enthaltenen Spalten angelegt, dazu die TreeView-Widgets zur Anzeige.</p>
<div class="section" id="treemodelsort">
<h3><a class="toc-backref" href="posts/ansichtssache/#id7">TreeModelSort</a></h3>
<p>Spalten lassen sich mit der Funktion <tt class="docutils literal">set_sort_column_id</tt> einfach sortieren. Wendet man diese Funktion direkt auf TreeStore an, werden logischerweise alle TreeView-Widgets, die darauf zurückgreifen, sortiert.</p>
<p>Für diese Fälle muss man <em>TreeModelSort</em>-Elemente "zwischenschalten", d.h. man erstellt aus der Widget-Seitenleiste unter <em>"Sonstiges &gt; Sortierung für Baumansichtsmodell"</em> (4. Eintrag) ein Widget und weist ihm den gewünschten TreeStore zu (einzige Option unter "Allgemein"). Anschließend ersetzt man im TreeView das Modell mit dem eben erstellten TreeModelSort.</p>
<p>Die Sortierungsfunktion führt man wie zuvor, nur auf das TreeModelSort-Objekt, aus.</p>
</div>
<div class="section" id="treemodelfilter">
<h3><a class="toc-backref" href="posts/ansichtssache/#id8">TreeModelFilter</a></h3>
<p><em>TreeModelFilter</em> ermöglicht die Darstellung bestimmter Zeilen, in Glade wird wie bei TreeModelSort verfahren, zuerst das Element anlegen (3. Eintrag unter "Sonstige"), anschließend erfolgen die Zuweisungen zum Modell und TreeView.</p>
<p>Im gewählten Beispiel sollen Sorten nach der Fruchtfarbe sortiert werden, es wird also noch ein Container für Buttons benötigt, also eine <em>GtkButtonBox</em>.</p>
</div>
<div class="section" id="formatierung-aus-dem-modell-laden">
<h3><a class="toc-backref" href="posts/ansichtssache/#id9">Formatierung aus dem Modell laden</a></h3>
<p>Neben den anzuzeigenden Spalten gibt es im ersten TreeStore eine Spalte "weight". Der Wert in dieser Spalte wird dazu verwendet, die Zelle in Fettschrift darzustellen. Dazu wird in den Eigenschaften des CellRenderers unter <em>Schriftgewicht</em> die entsprechende Spalte angegeben (der Wert für normale Schrift ist 400). Analog dazu können beispielsweise auch Zellen eingefärbt oder weitere Schriftformatierungen vorgenommen werden.</p>
</div>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="posts/ansichtssache/#id10">Python</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="posts/ansichtssache/#id11">TreeModelSort</a></h3>
<p>Durch die Positionsabfrage von <tt class="docutils literal">GtkTreeSelection.get_selected()</tt> erhält man ein Tupel (model,pos), <em>pos</em> von <em>model</em> zeigt dabei auf TreeModelSort (bzw. analog auf TreeModelFilter), nicht auf TreeStore und erfordert eine Konvertierung:</p>
<pre class="code python"><a name="rest_code_706b946612e14d3299ccb3965cb66f4d-1"></a><span class="n">model</span><span class="p">,</span><span class="n">pos</span> <span class="o">=</span> <span class="n">selection</span><span class="o">.</span><span class="n">get_selected</span><span class="p">()</span>
<a name="rest_code_706b946612e14d3299ccb3965cb66f4d-2"></a><span class="n">converted_iter</span> <span class="o">=</span> <span class="n">treesort</span><span class="o">.</span><span class="n">convert_iter_to_child_iter</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
<a name="rest_code_706b946612e14d3299ccb3965cb66f4d-3"></a><span class="n">store</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">converted_iter</span><span class="p">,</span><span class="n">column</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="posts/ansichtssache/#id12">TreeModelFilter</a></h3>
<p>Zunächst muss eine Filterfunktion erstellt werden, in der die Sichtbarkeit von Zeilen definiert wird, im Beispiel also die Variable <em>self.color</em>:</p>
<pre class="code python"><a name="rest_code_7e48a760772840528cabab3f21ab0434-1"></a><span class="k">def</span> <span class="nf">color_filter_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">model</span><span class="p">,</span><span class="nb">iter</span><span class="p">,</span><span class="n">data</span><span class="p">):</span>
<a name="rest_code_7e48a760772840528cabab3f21ab0434-2"></a>    <span class="k">if</span> <span class="n">model</span><span class="p">[</span><span class="nb">iter</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">:</span>
<a name="rest_code_7e48a760772840528cabab3f21ab0434-3"></a>        <span class="k">return</span> <span class="bp">True</span>
<a name="rest_code_7e48a760772840528cabab3f21ab0434-4"></a>    <span class="k">else</span><span class="p">:</span>
<a name="rest_code_7e48a760772840528cabab3f21ab0434-5"></a>        <span class="k">return</span> <span class="bp">False</span>
</pre>
<p>Die Funktion wird zunächst nach dem Schema</p>
<pre class="code python"><a name="rest_code_70f7cbf09b104a25a101c0d7c27397f9-1"></a><span class="n">treefilter</span><span class="o">.</span><span class="n">set_visible_func</span><span class="p">(</span><span class="n">filter_func</span><span class="p">)</span>
</pre>
<p>zugewiesen, jede Filterung wird dann per <tt class="docutils literal">refilter()</tt> ausgelöst, also wenn das Button-Signal ausgelöst wird:</p>
<pre class="code python"><a name="rest_code_241bea27865743cc92ad06827ea77348-1"></a><span class="k">def</span> <span class="nf">on_button_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>
<a name="rest_code_241bea27865743cc92ad06827ea77348-2"></a>    <span class="n">x</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
<a name="rest_code_241bea27865743cc92ad06827ea77348-3"></a>    <span class="n">x</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">"treefilter"</span><span class="p">)</span><span class="o">.</span><span class="n">refilter</span><span class="p">()</span>
</pre>
<p class="more"><a href="posts/ansichtssache/">Weiterlesen…</a></p>
</div>
</div>
</div>
            </div>
        </div>
    
        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-5.html" rel="prev">Neuere Einträge</a>
            </li>
            <li class="next">
                <a href="index-3.html" rel="next">Ältere Einträge</a>
            </li>
        </ul></nav><script>var disqus_shortname="bahnfreikartoffelbrei";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2018 <a href="mailto:An.Ke@bahnfreikartoffelbrei.de">Anke (encarsia)</a> - 
Powered by <a href="http://getnikola.com">Nikola</a> - 
Zen theme based in <a href="https://github.com/arusahni/website-template">Arusahni's website-template</a><br></p>
            
        </footer>
</div>
    </section><script src="assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
