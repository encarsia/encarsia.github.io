<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="de">
<head>
<meta charset="utf-8">
<meta name="description" content="Gute Absichten">
<meta name="viewport" content="width=device-width">
<title>Merge and Destroy | Merge and Destroy</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://encarsia.github.io/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->
</head>
<body>
    <section class="social"><ul>
<li><a href="#" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://plus.google.com/105146352752269764996/posts" title="Google+"><i class="icon-google-plus"></i></a></li>
            <li><a href="https://github.com/encarsia" title="Github"><i class="icon-github"></i></a></li>
            <li><a href="https://twitter.com/encarsia_" title="Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="pages/about/index.html" title="About me"><i class="icon-user"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
        <div class="post">
            <h1 class="title"><a href="posts/fenster-mit-aussicht/">Fenster mit Aussicht - ein Minimalbeispiel</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2016-11-02T17:14:04+01:00">2016-11-02 17:14</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/fenster-mit-aussicht/#disqus_thread" data-disqus-identifier="cache/posts/fenster-mit-aussicht.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="section" id="glade">
<h2>Glade</h2>
<p>Nach dem Start präsentiert sich Glade dreigeteilt, links ist die Fenster-/Widget-Auswahl, in der Mitte die Projektansicht und rechts eine Baumansicht des Projekts, im unteren Bereich können Eigenschaften und Signale editiert werden.</p>
<p>Nun erstellt man ein Fenster und gibt ihm eine Kennung. Mit dieser Kennung wird das Objekt im Programmcode angesprochen.</p>
<a class="reference external image-reference" href="images/01_glade.png"><img alt="/images/01_glade.thumbnail.png" src="images/01_glade.thumbnail.png"></a>
<p>Um die Ausführung von Funktionen zu initiieren, müssen sie mit Signalen gekoppelt werden. Signale können je nach Objektart verschieden ausgelöst werden, durch Anklicken, Markieren, Editieren, Schalten etc.</p>
<p>Um in diesem Beispiel das Programmfenster mit dem Schließen-Button zu schließen, wird das Signal <em>destroy</em> benötigt. Beim Funktionsnamen hilft die Vorschlagsfunktion nach dem Schema <tt class="docutils literal">on_kennung_signal</tt>.
Ich empfehle, diesen Vorschlägen im allgemeinen zu folgen, sie erleichtern die Tipparbeit.</p>
<a class="reference external image-reference" href="images/01_destroysignal.png"><img alt="/images/01_destroysignal.thumbnail.png" src="images/01_destroysignal.thumbnail.png"></a>
<p>Mit Glade wird kein Programmcode, sondern eine XML-Datei des Typs GtkBuilder erstellt. Diese sieht hier wie folgt aus:</p>
<p><a class="reference external" href="listings/01_minimal.glade.html">01_minimal.glade</a>  <a class="reference external" href="listings/01_minimal.glade">(Source)</a></p>
<pre class="code xml"><a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-2"></a><span class="c">&lt;!-- Generated with glade 3.20.0 --&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-3"></a><span class="nt">&lt;interface&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-4"></a>  <span class="nt">&lt;requires</span> <span class="na">lib=</span><span class="s">"gtk+"</span> <span class="na">version=</span><span class="s">"3.20"</span><span class="nt">/&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-5"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkApplicationWindow"</span> <span class="na">id=</span><span class="s">"window"</span><span class="nt">&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-6"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-7"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"title"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>Titel<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-8"></a>    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"destroy"</span> <span class="na">handler=</span><span class="s">"on_window_destroy"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-9"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-10"></a>      <span class="nt">&lt;placeholder/&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-11"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-12"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-13"></a>      <span class="nt">&lt;placeholder/&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-14"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-15"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_ead8ce89843e4ab39bccc62d36aceb00-16"></a><span class="nt">&lt;/interface&gt;</span>
</pre>
</div>
<div class="section" id="python">
<h2>Python</h2>
<p>First things first. Die GtkBuilder-Funktionen stehen im Gtk-Modul aus den Python GObject Introspection-Bindings zur Verfügung:</p>
<pre class="code python"><a name="rest_code_08a1f850a11e4380898a7b1c92f5c25c-1"></a><span class="kn">import</span> <span class="nn">gi</span>
<a name="rest_code_08a1f850a11e4380898a7b1c92f5c25c-2"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s1">'Gtk'</span><span class="p">,</span><span class="s1">'3.0'</span><span class="p">)</span>
<a name="rest_code_08a1f850a11e4380898a7b1c92f5c25c-3"></a><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">Gtk</span>
</pre>
<p>Nach dem Aufruf von <tt class="docutils literal">Gtk.Builder()</tt> wird die Glade-Datei geladen. Um die Übersicht zu bewahren, können dies auch mehrere Dateien sein, es sollte allerdings auf eine eindeutige Kennung geachtet werden. Bei doppelten Kennungen ist die zuletzt geladene aktiv.</p>
<p>Anschließend werden die Signale verbunden. Meine Empfehlung ist hier, die dazugehörigen Funktionen der Übersicht wegen in eine eigene Klasse auszulagern.</p>
<p><a class="reference external" href="listings/01_minimal.py.html">01_minimal.py</a>  <a class="reference external" href="listings/01_minimal.py">(Source)</a></p>
<pre class="code python"><a name="rest_code_f119b94a828f40b4b626e4b1f307e850-1"></a><span class="ch">#!/usr/bin/env python</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-2"></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-3"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-4"></a><span class="kn">import</span> <span class="nn">os</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-5"></a><span class="kn">import</span> <span class="nn">gi</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-6"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s1">'Gtk'</span><span class="p">,</span><span class="s1">'3.0'</span><span class="p">)</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-7"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-8"></a><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">Gtk</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-9"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-10"></a><span class="k">class</span> <span class="nc">Handler</span><span class="p">:</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-11"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-12"></a>    <span class="k">def</span> <span class="nf">on_window_destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-13"></a>        <span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-14"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-15"></a><span class="k">class</span> <span class="nc">Example</span><span class="p">:</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-16"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-17"></a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-18"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">gladefile</span> <span class="o">=</span> <span class="s2">"01_minimal.glade"</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-20"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-21"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Builder</span><span class="p">()</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-22"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">add_from_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gladefile</span><span class="p">)</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-23"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">connect_signals</span><span class="p">(</span><span class="n">Handler</span><span class="p">())</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-24"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-25"></a>        <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"window"</span><span class="p">)</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-26"></a>        <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-27"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-28"></a>    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-29"></a>        <span class="n">Gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-30"></a>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-31"></a><span class="n">x</span> <span class="o">=</span> <span class="n">Example</span><span class="p">()</span>
<a name="rest_code_f119b94a828f40b4b626e4b1f307e850-32"></a><span class="n">x</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre>
<p>Dieses Skript öffnet ein leeres Fenster, das per Schließen-Button beendet werden kann.</p>
</div>
<div class="section" id="ohne-glade">
<h2>Ohne Glade</h2>
<p>Das oben konstruierte Beispiel entspricht dem Basisbeispiel im <a class="reference external" href="http://python-gtk-3-tutorial.readthedocs.io/en/latest/introduction.html">Python GTK+ 3 Tutorial</a>:</p>
<pre class="code python"><a name="rest_code_ebe6b1a4031c4a37a5be3894e0d7396f-1"></a><span class="kn">import</span> <span class="nn">gi</span>
<a name="rest_code_ebe6b1a4031c4a37a5be3894e0d7396f-2"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s1">'Gtk'</span><span class="p">,</span> <span class="s1">'3.0'</span><span class="p">)</span>
<a name="rest_code_ebe6b1a4031c4a37a5be3894e0d7396f-3"></a><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">Gtk</span>
<a name="rest_code_ebe6b1a4031c4a37a5be3894e0d7396f-4"></a>
<a name="rest_code_ebe6b1a4031c4a37a5be3894e0d7396f-5"></a><span class="n">win</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Window</span><span class="p">()</span>
<a name="rest_code_ebe6b1a4031c4a37a5be3894e0d7396f-6"></a><span class="n">win</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"delete-event"</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">)</span>
<a name="rest_code_ebe6b1a4031c4a37a5be3894e0d7396f-7"></a><span class="n">win</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
<a name="rest_code_ebe6b1a4031c4a37a5be3894e0d7396f-8"></a><span class="n">Gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre>
<p>Man sollte sich von der Kürze dieses Beispiels nicht täuschen lassen. Die eigentlichen Elemente, Boxen, Widget, Buttons, Leisten etc. fehlen hier komplett.</p>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/tutorial-reihe-glade/">Tutorial-Reihe zu Glade</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2016-11-02T15:23:57+01:00">2016-11-02 15:23</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/tutorial-reihe-glade/#disqus_thread" data-disqus-identifier="cache/posts/tutorial-reihe-glade.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="section" id="intro">
<h2>Intro</h2>
<p>Bei der Erstellung der grafischen Oberfläche für <a class="reference external" href="https://github.com/encarsia/gpt">gpt</a> habe ich auf Glade zurückgegriffen, einem grafischen Werkzeug, mit dem man relativ einfach <a class="reference external" href="http://www.gtk.org/">GTK+</a>-Oberflächen erstellen kann.</p>
<p>Mit Glade erstellte Projektdateien sind <a class="reference external" href="https://developer.gnome.org/gtk3/stable/GtkBuilder.html">GtkBuilder</a>-XML-Dateien, die Verbindung zum eigentlichen Programm erfolgt über Signale, dabei werden zahlreiche Programmiersprachen unterstützt. Hier werde ich Python verwenden.</p>
<p>Da es in den letzten Jahren Versionssprünge sowohl bei Python als auch GTK+ gegeben hat (jeweils von 2.x auf 3.x), gibt es viele Dokumentationen und Tutorials, die nicht 1:1 anwendbar sind, d.h. die Funktionen sind meist gleich, nur die Syntax unterscheidet sich minimal (siehe Links).</p>
<p>An dieser Stelle versuche ich aktuell zu bleiben, derzeit mit Python 3.5.2 und Glade 3.20.0.</p>
</div>
<div class="section" id="nicht-exklusiv">
<h2>Nicht exklusiv</h2>
<p>GTK+-Elemente können natürlich auch ohne Glade direkt in den Quellcode des Programms geschrieben werden. Es ist möglich, beide Optionen parallel zu verwenden oder auch im Verlauf das eine gegen das andere zu ersetzen.</p>
</div>
<div class="section" id="links">
<h2>Links</h2>
<ul class="simple">
<li>
<a class="reference external" href="http://python-gtk-3-tutorial.readthedocs.io/">The Python GTK+ 3 Tutorial</a> - Grundlagen der Programmierung von GTK+-GUI mit Python</li>
<li>
<a class="reference external" href="http://www.learningpython.com/2006/05/07/creating-a-gui-using-pygtk-and-glade/">Creating a GUI using PyGTK and Glade</a> - Grundlagentutorial für PyGTK (Python 2.x)</li>
<li>
<a class="reference external" href="https://www.florian-diesch.de/doc/python-und-glade/online/index.html">Programmieren mit Python und Glade</a> - umfangreiches Tutorial auf Deutsch</li>
</ul>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/es-begann-ganz-harmlos/">Es begann ganz harmlos</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2016-11-02T00:19:24+01:00">2016-11-02 00:19</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/es-begann-ganz-harmlos/#disqus_thread" data-disqus-identifier="cache/posts/es-begann-ganz-harmlos.html">Comments</a>


                </div>
            

            </div>
            <div class="body">
                <div>
<p>GoPros sind aufmerksamkeitsheischende Zeitfresser.</p>
<p>Man versucht sie an schöne Orte zu führen, man produziert dabei Unmengen an Daten, die man dann in mehr oder weniger aufopferungsvoller Arbeit im Videoeditor möglichst ansehnlich zurecht schneidet.</p>
<p>Wenn man ganz schlau sein möchte, schreibt man ein paar Skripte, die einem etwas Arbeit abnehmen.</p>
<p>Und dann schreibt man eine kleine textbasierte UI, um das etwas abzurunden.</p>
<p>Und dann erwischt man sich dabei, eine graphische Oberfläche zusammen zu zimmern.</p>
<p>Und dann schreibt man das in ein Blog...</p>
<div class="youtube-video">
<iframe width="425" height="344" src="https://www.youtube.com/embed/gNIwlRClHsQ?rel=0&amp;hd=1&amp;wmode=transparent"></iframe>
</div>
</div>
            </div>
        </div>
    

    
        
       <script>var disqus_shortname="bahnfreikartoffelbrei";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2016 <a href="mailto:An.Ke@bahnfreikartoffelbrei.de">Anke (encarsia)</a> - 
Powered by <a href="http://getnikola.com">Nikola</a> - 
Zen theme based in <a href="https://github.com/arusahni/website-template">Arusahni's website-template</a><br></p>
            
        </footer>
</div>
    </section><script src="assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
