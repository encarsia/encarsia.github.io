<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Lost in the rabbit hole of Google Takeout | Merge and Destroy</title>
<link href="//fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.0.11/css/fork-awesome.min.css" integrity="sha256-MGU/JUq/40CFrfxjXb5pZjpoZmxiP2KuICN5ElLFNd8=" crossorigin="anonymous">
<link href="../../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/main.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/forkfont.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/custom.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (de)" href="../../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../rss.xml">
<link rel="canonical" href="https://encarsia.github.io/en/posts/google-takeout/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Anke (encarsia)">
<meta property="og:site_name" content="Merge and Destroy">
<meta property="og:title" content="Lost in the rabbit hole of Google Takeout">
<meta property="og:url" content="https://encarsia.github.io/en/posts/google-takeout/">
<meta property="og:description" content="Contents

I get the 4, 20 and Google+
Unpacking presents
Your entry: Nikola
Theming
Wishlist
Conclusion
Listings
Usage (README.md)
Plugin




Backup your data. They said. All of it. They said. And the">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-05-31T16:10:07+02:00">
<meta property="article:tag" content="google+">
<meta property="article:tag" content="nikola">
<meta property="article:tag" content="python">
<meta property="article:tag" content="takeout">
<link rel="alternate" hreflang="de" href="../../../posts/google-takeout/">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../../index.html" title="Home"><i class="fa fa-home"></i></a></li>
            <li><a href="../../../posts/tutorial-reihe-glade/index.html" title="Tutorials"><i class="fa fa-lightbulb-o"></i></a></li>
            <li><a href="https://plus.google.com/105146352752269764996/posts" title="Google+"><i class="fa fa-google-plus-official"></i></a></li>
            <li><a href="https://github.com/encarsia" title="Github"><i class="fa fa-github"></i></a></li>
            <li><a href="https://twitter.com/encarsia_" title="Twitter"><i class="fa fa-twitter"></i></a></li>
            <li><a href="https://octodon.social/@encarsia" title="Mastodon"><i class="fa fa-mastodon"></i></a></li>
            <li><a href="../../../categories/index.html" title="Tags"><i class="fa fa-tags"></i></a></li>
            <li><a href="../../../rss.xml" title="RSS"><i class="fa fa-rss"></i></a></li>
            <li><a href="../../../pages/about/index.html" title="About me"><i class="fa fa-user"></i></a></li>
            <li><a href="../../../archive.html" title="Archives"><i class="fa fa-folder-open"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
    <div class="post">
    
    <h1 class="p-name entry-title" itemprop="headline name">Lost in the rabbit hole of Google Takeout</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2018-05-31T16:10:07+02:00">2018-05-31 16:10</time><a href="../../../posts/google-takeout/" rel="alternate" hreflang="de">
                Deutsch</a>

            
          |  
        <a href="index.rst" id="sourcelink">Source</a>

            </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../categories/google%2B/" rel="tag">google+</a></li>
           <li><a class="tag p-category" href="../../categories/nikola/" rel="tag">nikola</a></li>
           <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
           <li><a class="tag p-category" href="../../categories/takeout/" rel="tag">takeout</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div>
<div class="contents warning pull-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#i-get-the-4-20-and-google" id="id2">I get the 4, 20 and Google+</a></li>
<li><a class="reference internal" href="#unpacking-presents" id="id3">Unpacking presents</a></li>
<li><a class="reference internal" href="#your-entry-nikola" id="id4">Your entry: Nikola</a></li>
<li><a class="reference internal" href="#theming" id="id5">Theming</a></li>
<li><a class="reference internal" href="#wishlist" id="id6">Wishlist</a></li>
<li><a class="reference internal" href="#conclusion" id="id7">Conclusion</a></li>
<li>
<a class="reference internal" href="#listings" id="id8">Listings</a><ul>
<li><a class="reference internal" href="#usage-readme-md" id="id9">Usage (README.md)</a></li>
<li><a class="reference internal" href="#plugin" id="id10">Plugin</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Backup your data. They said. All of it. They said. And then came Google Takeout</strong></p>
<div class="figure">
<img alt="/images/import_gplus_post.png" src="../../../images/import_gplus_post.png"><p class="caption">G+ post HTML file from Takeout</p>
</div>
<div class="section" id="i-get-the-4-20-and-google">
<h2><a class="toc-backref" href="#id2">I get the 4, 20 and Google+</a></h2>
<p><a class="reference external" href="http://google.com/takeout/">Takeout</a> is Google's user data archive system for numerous products. My primary target me was to download an archive of my Google+ activities.</p>
<p>The approach is quite simple: choose the product in Takeout and wait until the archive(s) has/have been generated. The downloadable archive will be valid for a week but you can generate new archives at any time.</p>
<dl class="docutils">
<dt>Lesson 1:</dt>
<dd>Choose <em>zip</em> as filetype if you use umlauts, there could be encoding issues in <em>tgz</em> files.</dd>
</dl>
<p>I remembered that there was an import plugin for Nikola and I imagined to throw in the archive and to get a usable local site in return. At this point of the article the reader may speculate that this didn't work in the slightest way.</p>
</div>
<div class="section" id="unpacking-presents">
<h2><a class="toc-backref" href="#id3">Unpacking presents</a></h2>
<p>The first inspection reveals:</p>
<ol class="arabic simple">
<li>All G+ posts are located in <tt class="docutils literal">Google+ stream/Posts</tt> as HTML files. These files appear usable.</li>
<li>Image links just point to filenames. The path is missing so only images in the same directory are shown but</li>
<li>Images are scattered among different directories (in <tt class="docutils literal">Posts</tt> and <tt class="docutils literal">Photos</tt> and their subfolders). The majority of image files are stored in <tt class="docutils literal">Photos of posts</tt> in date corresponding subfolders.</li>
<li>There are different date formats in peaceful co-existence:</li>
</ol>
<pre class="code text"><a name="rest_code_85aada0943eb448385cca3bf265a74ee-1"></a>Photos of posts/
<a name="rest_code_85aada0943eb448385cca3bf265a74ee-2"></a> ├── 02.06.14
<a name="rest_code_85aada0943eb448385cca3bf265a74ee-3"></a> ├── 02.06.16
<a name="rest_code_85aada0943eb448385cca3bf265a74ee-4"></a> ├── 22. Juli 2013
<a name="rest_code_85aada0943eb448385cca3bf265a74ee-5"></a> ├── 23.01.17
<a name="rest_code_85aada0943eb448385cca3bf265a74ee-6"></a> ├── 2011-08-14
<a name="rest_code_85aada0943eb448385cca3bf265a74ee-7"></a> └── 2012-03-13
</pre>
<ol class="arabic simple" start="5">
<li>There is a corresponding JSON file for every image but not for HTML files.</li>
<li>Strucure of HTML files:</li>
</ol>
<div class="figure">
<a class="reference external image-reference" href="../../../images/import_gplus_inspector.png"><img alt="/images/import_gplus_inspector.thumbnail.png" src="../../../images/import_gplus_inspector.thumbnail.png"></a>
<p class="caption">Dumdidumdumdum...Inspektor Gadget</p>
</div>
<dl class="docutils">
<dt>Lesson 2</dt>
<dd>You can open only single posts, there are a lot of deadlinks in image posts, but share and reaction information are displayed (public/private/collection/community post, +1, reshares and comments).</dd>
</dl>
</div>
<div class="section" id="your-entry-nikola">
<h2><a class="toc-backref" href="#id4">Your entry: Nikola</a></h2>
<p>With low expectations I install the <a class="reference external" href="https://plugins.getnikola.com/v7/import_gplus/">import plugin</a> for <a class="reference external" href="https://getnikola.com/">Nikola</a> and see what happens. Nothing. The posts once were provided as JSON files but not in recent days.</p>
<p>I brachiate through the files, importing HTML files first. The import plugin instantiates a new Nikola site, so I can just trial and error like hell. Then I care about deadlinks, then titles, it kepps getting better with every build.</p>
<p>The result is a static website of my Google+ stream including +1's and comments and a link to the original post.</p>
</div>
<div class="section" id="theming">
<h2><a class="toc-backref" href="#id5">Theming</a></h2>
<p>In general the import is independent from any theme. I personally recommend <a class="reference external" href="https://themes.getnikola.com/v7/hyde/">hyde</a> which even can be improved by the <tt class="docutils literal">custom.css</tt> that is included in the archive.</p>
</div>
<div class="section" id="wishlist">
<h2><a class="toc-backref" href="#id6">Wishlist</a></h2>
<ul class="simple">
<li>local search function</li>
<li>filter posts by share status</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Attention!</p>
<p class="last">In case you consider a publicly accessible stream backup you have to keep in mind that the imported data also includes all privately shared posts.</p>
</div>
</div>
<div class="section" id="conclusion">
<h2><a class="toc-backref" href="#id7">Conclusion</a></h2>
<p>As a long-term heavy Google+ user you are used to inconsistencies and improvementent constantly getting worse so a Takeout archive is no more than a sparring partner to train with. It is only a matter of time until my version of the import plugin will go the way of all those Google messengers before.</p>
<div class="figure">
<img alt="/images/takeout_gplus_slow.gif" src="../../../images/takeout_gplus_slow.gif"><p class="caption">static Google+ Nikola site (hyde theme)</p>
</div>
<p>If you want to try yourself:</p>
<blockquote>
<ul class="simple">
<li><a class="reference external" href="../../files/import_gplus.zip">Download Plugin (5,7 kB)</a></li>
</ul>
</blockquote>
<!-- TEASER_END -->
</div>
<div class="section" id="listings">
<h2><a class="toc-backref" href="#id8">Listings</a></h2>
<div class="section" id="usage-readme-md">
<h3><a class="toc-backref" href="#id9">Usage (README.md)</a></h3>
<p><a class="reference external" href="../../../listings/import_gplus_README.md.html">import_gplus_README.md</a>  <a class="reference external" href="../../../listings/import_gplus_README.md">(Source)</a></p>
<pre class="code md"><a name="rest_code_7194447f484d4c0580353218117699e3-1"></a>This plugin does a rough import of a Google+ stream as provided by [<span class="nt">Google Takeout</span>](<span class="na">http://google.com/takeout/</span>)
<a name="rest_code_7194447f484d4c0580353218117699e3-2"></a>
<a name="rest_code_7194447f484d4c0580353218117699e3-3"></a>Videos work, content in general works, attached images may or may not work depending on source.
<a name="rest_code_7194447f484d4c0580353218117699e3-4"></a>
<a name="rest_code_7194447f484d4c0580353218117699e3-5"></a>The output is html, and there's little to no configuration done in the resulting site.
<a name="rest_code_7194447f484d4c0580353218117699e3-6"></a>
<a name="rest_code_7194447f484d4c0580353218117699e3-7"></a><span class="gu">##</span> IMPORTANT
<a name="rest_code_7194447f484d4c0580353218117699e3-8"></a>
<a name="rest_code_7194447f484d4c0580353218117699e3-9"></a>As of today (July 2018) this mostly rewritten plugin works until Google plays around again.
<a name="rest_code_7194447f484d4c0580353218117699e3-10"></a>
<a name="rest_code_7194447f484d4c0580353218117699e3-11"></a>If you consider to release this into the wilderness, keep in mind that the import includes not only public but also private and community shares.
<a name="rest_code_7194447f484d4c0580353218117699e3-12"></a>
<a name="rest_code_7194447f484d4c0580353218117699e3-13"></a>Enjoy.
<a name="rest_code_7194447f484d4c0580353218117699e3-14"></a>
<a name="rest_code_7194447f484d4c0580353218117699e3-15"></a><span class="gu">##</span> Usage
<a name="rest_code_7194447f484d4c0580353218117699e3-16"></a>
<a name="rest_code_7194447f484d4c0580353218117699e3-17"></a> <span class="k">*</span> Download Google Takeout as zip file if you use umlauts. There may be encoding issues.
<a name="rest_code_7194447f484d4c0580353218117699e3-18"></a> <span class="k">*</span> Extract the dump file, merge parts if you have multiple files.
<a name="rest_code_7194447f484d4c0580353218117699e3-19"></a> <span class="k">*</span> Additional Python package requirement: [<span class="nt">BeautifulSoup</span>](<span class="na">https://www.crummy.com/software/BeautifulSoup/</span>).
<a name="rest_code_7194447f484d4c0580353218117699e3-20"></a> <span class="k">*</span> Extract the plugin into the <span class="sb">`plugins`</span> folder of an existing Nikola site. The plugin will create a new site in an subfolder so there won't be any contaminations with actual data. If you are unsure or don't want that you can easily initiate an empty site for the purpose: <span class="sb">`nikola init dummy_site`</span>.
<a name="rest_code_7194447f484d4c0580353218117699e3-21"></a> <span class="k">*</span> Open <span class="sb">`plugins/import_gplus.py`</span> and adapt folder names to your language settings.
<a name="rest_code_7194447f484d4c0580353218117699e3-22"></a> <span class="k">*</span> Run <span class="sb">`nikola import_gplus path/to/takeout_folder`</span>.
<a name="rest_code_7194447f484d4c0580353218117699e3-23"></a> <span class="k">*</span> The plugin inits a new Nikola site called <span class="sb">`new_site`</span> (no shit, Sherlock), you will have to change into that directory to run build commands.
<a name="rest_code_7194447f484d4c0580353218117699e3-24"></a> <span class="k">*</span> Building the site can take long and possibly wake up your fans. You may want to test the output with a fraction of the available data.
<a name="rest_code_7194447f484d4c0580353218117699e3-25"></a> <span class="k">*</span> Although the output should work with any theme, it looks quite nice with [<span class="nt">hyde</span>](<span class="na">https://themes.getnikola.com/v7/hyde/</span>); hpstr is okay, too. Consider to copy the included <span class="sb">`custom.css`</span> into the <span class="sb">`themes/THEME_NAME/assets/css`</span> directory for an even better experience.
<a name="rest_code_7194447f484d4c0580353218117699e3-26"></a> <span class="k">*</span> Tweaking <span class="sb">`conf.py`</span>:
<a name="rest_code_7194447f484d4c0580353218117699e3-27"></a>  <span class="k">*</span> disable comments:  <span class="sb">`COMMENT_SYSTEM = ""`</span>
<a name="rest_code_7194447f484d4c0580353218117699e3-28"></a>  <span class="k">*</span> link to your G+ profile in <span class="sb">`NAVIGATION_LINKS`</span>, disable link to RSS feed
</pre>
</div>
<div class="section" id="plugin">
<h3><a class="toc-backref" href="#id10">Plugin</a></h3>
<p><a class="reference external" href="../../../listings/import_gplus.py.html">import_gplus.py</a>  <a class="reference external" href="../../../listings/import_gplus.py">(Source)</a></p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-1">  1</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-2">  2</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-3">  3</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-4">  4</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-5">  5</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-6">  6</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-7">  7</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-8">  8</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-9">  9</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-10"> 10</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-11"> 11</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-12"> 12</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-13"> 13</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-14"> 14</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-15"> 15</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-16"> 16</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-17"> 17</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-18"> 18</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-19"> 19</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-20"> 20</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-21"> 21</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-22"> 22</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-23"> 23</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-24"> 24</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-25"> 25</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-26"> 26</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-27"> 27</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-28"> 28</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-29"> 29</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-30"> 30</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-31"> 31</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-32"> 32</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-33"> 33</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-34"> 34</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-35"> 35</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-36"> 36</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-37"> 37</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-38"> 38</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-39"> 39</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-40"> 40</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-41"> 41</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-42"> 42</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-43"> 43</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-44"> 44</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-45"> 45</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-46"> 46</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-47"> 47</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-48"> 48</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-49"> 49</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-50"> 50</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-51"> 51</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-52"> 52</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-53"> 53</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-54"> 54</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-55"> 55</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-56"> 56</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-57"> 57</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-58"> 58</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-59"> 59</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-60"> 60</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-61"> 61</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-62"> 62</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-63"> 63</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-64"> 64</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-65"> 65</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-66"> 66</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-67"> 67</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-68"> 68</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-69"> 69</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-70"> 70</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-71"> 71</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-72"> 72</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-73"> 73</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-74"> 74</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-75"> 75</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-76"> 76</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-77"> 77</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-78"> 78</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-79"> 79</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-80"> 80</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-81"> 81</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-82"> 82</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-83"> 83</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-84"> 84</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-85"> 85</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-86"> 86</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-87"> 87</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-88"> 88</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-89"> 89</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-90"> 90</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-91"> 91</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-92"> 92</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-93"> 93</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-94"> 94</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-95"> 95</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-96"> 96</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-97"> 97</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-98"> 98</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-99"> 99</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-100">100</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-101">101</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-102">102</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-103">103</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-104">104</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-105">105</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-106">106</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-107">107</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-108">108</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-109">109</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-110">110</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-111">111</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-112">112</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-113">113</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-114">114</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-115">115</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-116">116</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-117">117</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-118">118</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-119">119</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-120">120</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-121">121</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-122">122</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-123">123</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-124">124</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-125">125</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-126">126</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-127">127</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-128">128</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-129">129</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-130">130</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-131">131</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-132">132</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-133">133</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-134">134</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-135">135</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-136">136</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-137">137</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-138">138</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-139">139</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-140">140</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-141">141</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-142">142</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-143">143</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-144">144</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-145">145</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-146">146</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-147">147</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-148">148</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-149">149</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-150">150</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-151">151</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-152">152</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-153">153</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-154">154</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-155">155</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-156">156</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-157">157</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-158">158</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-159">159</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-160">160</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-161">161</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-162">162</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-163">163</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-164">164</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-165">165</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-166">166</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-167">167</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-168">168</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-169">169</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-170">170</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-171">171</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-172">172</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-173">173</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-174">174</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-175">175</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-176">176</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-177">177</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-178">178</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-179">179</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-180">180</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-181">181</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-182">182</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-183">183</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-184">184</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-185">185</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-186">186</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-187">187</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-188">188</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-189">189</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-190">190</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-191">191</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-192">192</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-193">193</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-194">194</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-195">195</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-196">196</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-197">197</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-198">198</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-199">199</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-200">200</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-201">201</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-202">202</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-203">203</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-204">204</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-205">205</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-206">206</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-207">207</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-208">208</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-209">209</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-210">210</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-211">211</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-212">212</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-213">213</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-214">214</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-215">215</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-216">216</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-217">217</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-218">218</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-219">219</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-220">220</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-221">221</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-222">222</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-223">223</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-224">224</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-225">225</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-226">226</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-227">227</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-228">228</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-229">229</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-230">230</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-231">231</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-232">232</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-233">233</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-234">234</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-235">235</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-236">236</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-237">237</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-238">238</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-239">239</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-240">240</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-241">241</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-242">242</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-243">243</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-244">244</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-245">245</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-246">246</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-247">247</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-248">248</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-249">249</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-250">250</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-251">251</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-252">252</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-253">253</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-254">254</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-255">255</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-256">256</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-257">257</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-258">258</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-259">259</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-260">260</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-261">261</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-262">262</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-263">263</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-264">264</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-265">265</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-266">266</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-267">267</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-268">268</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-269">269</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-270">270</a>
<a href="#rest_code_3d1b3d9617a64003837a70eae1e4aa1e-271">271</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-1"></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-2"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-3"></a><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span><span class="p">,</span> <span class="n">print_function</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-4"></a><span class="kn">import</span> <span class="nn">os</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-5"></a><span class="kn">import</span> <span class="nn">shutil</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-6"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-7"></a><span class="k">try</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-8"></a>    <span class="kn">import</span> <span class="nn">bs4</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-9"></a><span class="k">except</span> <span class="n">ModuleNotFoundError</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-10"></a>    <span class="k">raise</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-11"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-12"></a><span class="kn">from</span> <span class="nn">nikola.plugin_categories</span> <span class="kn">import</span> <span class="n">Command</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-13"></a><span class="kn">from</span> <span class="nn">nikola</span> <span class="kn">import</span> <span class="n">utils</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-14"></a><span class="kn">from</span> <span class="nn">nikola.utils</span> <span class="kn">import</span> <span class="n">req_missing</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-15"></a><span class="kn">from</span> <span class="nn">nikola.plugins.basic_import</span> <span class="kn">import</span> <span class="n">ImportMixin</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-16"></a><span class="kn">from</span> <span class="nn">nikola.plugins.command.init</span> <span class="kn">import</span> <span class="n">SAMPLE_CONF</span><span class="p">,</span> <span class="n">prepare_config</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-17"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-18"></a><span class="n">LOGGER</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="s1">'import_gplus'</span><span class="p">,</span> <span class="n">utils</span><span class="o">.</span><span class="n">STDERR_HANDLER</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-19"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-20"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-21"></a><span class="k">class</span> <span class="nc">CommandImportGplus</span><span class="p">(</span><span class="n">Command</span><span class="p">,</span> <span class="n">ImportMixin</span><span class="p">):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-22"></a>    <span class="sd">"""Import a Google+ dump."""</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-23"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-24"></a>    <span class="n">name</span> <span class="o">=</span> <span class="s2">"import_gplus"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-25"></a>    <span class="n">needs_config</span> <span class="o">=</span> <span class="bp">False</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-26"></a>    <span class="n">doc_usage</span> <span class="o">=</span> <span class="s2">"[options] extracted_dump_file_folder"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-27"></a>    <span class="n">doc_purpose</span> <span class="o">=</span> <span class="s2">"import a Google+ dump"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-28"></a>    <span class="n">cmd_options</span> <span class="o">=</span> <span class="n">ImportMixin</span><span class="o">.</span><span class="n">cmd_options</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-29"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-30"></a>    <span class="k">def</span> <span class="nf">_execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-31"></a>        <span class="sd">'''</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-32"></a><span class="sd">            Import Google+ dump</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-33"></a><span class="sd">        '''</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-34"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-35"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-36"></a>            <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">help</span><span class="p">())</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-37"></a>            <span class="k">return</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-38"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-39"></a>        <span class="n">options</span><span class="p">[</span><span class="s1">'filename'</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-40"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s1">'filename'</span><span class="p">]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-41"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s1">'output_folder'</span><span class="p">]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-42"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">import_into_existing_site</span> <span class="o">=</span> <span class="bp">False</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-43"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">url_map</span> <span class="o">=</span> <span class="p">{}</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-44"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-45"></a>        <span class="c1"># Google Takeout folder structure, adapt to your language settings</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-46"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-47"></a>        <span class="c1"># Takeout/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-48"></a>        <span class="c1"># ├── +1/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-49"></a>        <span class="c1"># ├── Google+ stream/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-50"></a>        <span class="c1"># |   ├── Posts/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-51"></a>        <span class="c1"># |   ├── Photos/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-52"></a>        <span class="c1"># |   |   ├── Photos of posts/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-53"></a>        <span class="c1"># |   |   └── Photos of polls/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-54"></a>        <span class="c1"># |   ├── Activities/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-55"></a>        <span class="c1"># |   ├── Collections/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-56"></a>        <span class="c1"># |   └── Events/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-57"></a>        <span class="c1"># ├── Google+ Communities/</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-58"></a>        <span class="c1"># └── index.html</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-59"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-60"></a>        <span class="n">gto_root</span> <span class="o">=</span> <span class="s2">"Takeout"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-61"></a>        <span class="n">gto_plus1</span> <span class="o">=</span> <span class="s2">"+1"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-62"></a>        <span class="n">gto_stream</span> <span class="o">=</span> <span class="s2">"Stream in Google+"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-63"></a>        <span class="n">gto_posts</span> <span class="o">=</span> <span class="s2">"Beiträge"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-64"></a>        <span class="n">gto_photos</span> <span class="o">=</span> <span class="s2">"Fotos"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-65"></a>        <span class="n">gto_photos_posts</span> <span class="o">=</span> <span class="s2">"Fotos von Beiträgen"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-66"></a>        <span class="n">gto_photos_polls</span> <span class="o">=</span> <span class="s2">"Umfragefotos"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-67"></a>        <span class="n">gto_activity</span> <span class="o">=</span> <span class="s2">"Aktivitätsprotokoll"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-68"></a>        <span class="n">gto_collections</span> <span class="o">=</span> <span class="s2">"Sammlungen"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-69"></a>        <span class="n">gto_events</span> <span class="o">=</span> <span class="s2">"Veranstaltungen"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-70"></a>        <span class="n">gto_communities</span> <span class="o">=</span> <span class="s2">"Google+ Communities"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-71"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-72"></a>        <span class="c1"># path to HTML formatted post files</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-73"></a>        <span class="n">post_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-74"></a>                                 <span class="n">gto_root</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-75"></a>                                 <span class="n">gto_stream</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-76"></a>                                 <span class="n">gto_posts</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-77"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-78"></a>        <span class="c1"># collect all files</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-79"></a>        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">post_path</span><span class="p">))</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">post_path</span><span class="p">,</span> <span class="n">f</span><span class="p">))]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-80"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-81"></a>        <span class="c1"># filter relevant HTML files</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-82"></a>        <span class="n">html_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".html"</span><span class="p">)]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-83"></a>        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"{} posts ready for import"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">html_files</span><span class="p">)))</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-84"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-85"></a>        <span class="c1"># init new Nikola site "new_site", edit conf.py to your needs</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-86"></a>        <span class="c1"># change to this folder for the for build process</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-87"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">populate_context</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span><span class="p">,</span> <span class="n">html_files</span><span class="p">,</span> <span class="n">post_path</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-88"></a>        <span class="n">conf_template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_base_site</span><span class="p">()</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-89"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">write_configuration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_configuration_output_path</span><span class="p">(),</span> <span class="n">conf_template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">prepare_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">)))</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">import_posts</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span><span class="p">,</span> <span class="n">html_files</span><span class="p">,</span> <span class="n">post_path</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-91"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-92"></a>        <span class="c1"># In the Takeout archive photos are linked to the main working</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-93"></a>        <span class="c1"># directory although they do not necessarily exist there (Hello</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-94"></a>        <span class="c1"># deadlinks!). The image files are spread to several folders.</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-95"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-96"></a>        <span class="c1"># All archive photos will be copied to the "images" folder.</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-97"></a>        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-98"></a>            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">))</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-99"></a>            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Image folder ceated."</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-100"></a>        <span class="k">except</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-101"></a>            <span class="k">pass</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-102"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-103"></a>        <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_folder</span><span class="p">,</span> <span class="n">gto_root</span><span class="p">)):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-104"></a>            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-105"></a>                <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".jpg"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">f</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".jpeg"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">f</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".png"</span><span class="p">):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-106"></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">,</span><span class="n">f</span><span class="p">)):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-107"></a>                        <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">))</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-108"></a>                        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"{} copied to Nikola image folder."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-109"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-110"></a>    <span class="nd">@staticmethod</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-111"></a>    <span class="k">def</span> <span class="nf">populate_context</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-112"></a>        <span class="c1"># We don't get much data here</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-113"></a>        <span class="n">context</span> <span class="o">=</span> <span class="n">SAMPLE_CONF</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-114"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'DEFAULT_LANG'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'de'</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-115"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'BLOG_DESCRIPTION'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-116"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'SITE_URL'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'http://localhost:8000/'</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-117"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'BLOG_EMAIL'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-118"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'BLOG_TITLE'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Static G+ stream archive"</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-119"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-120"></a>        <span class="c1"># Get any random post, all have the same data</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-121"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-122"></a>            <span class="n">soup</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-123"></a>            <span class="n">context</span><span class="p">[</span><span class="s1">'BLOG_AUTHOR'</span><span class="p">]</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"author"</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-124"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-125"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'POSTS'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'''(</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-126"></a><span class="s1">            ("posts/*.html", "posts", "post.tmpl"),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-127"></a><span class="s1">            ("posts/*.rst", "posts", "post.tmpl"),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-128"></a><span class="s1">        )'''</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-129"></a>        <span class="n">context</span><span class="p">[</span><span class="s1">'COMPILERS'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'''{</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-130"></a><span class="s1">        "rest": ('.txt', '.rst'),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-131"></a><span class="s1">        "html": ('.html', '.htm')</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-132"></a><span class="s1">        }</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-133"></a><span class="s1">        '''</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-134"></a>        <span class="k">return</span> <span class="n">context</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-135"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-136"></a>    <span class="k">def</span> <span class="nf">import_posts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-137"></a>        <span class="sd">"""Import all posts."""</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-138"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">out_folder</span> <span class="o">=</span> <span class="s1">'posts'</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-139"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-140"></a>        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-141"></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-142"></a>                <span class="n">soup</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-143"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-144"></a>                <span class="n">description</span> <span class="o">=</span> <span class="s2">""</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-145"></a>                <span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-146"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-147"></a>                <span class="n">title_string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">string</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-148"></a>                <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prettify_title</span><span class="p">(</span><span class="n">title_string</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-149"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-150"></a>                <span class="c1"># post date is the 2nd link on the page</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-151"></a>                <span class="n">post_date</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-152"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-153"></a>                <span class="c1"># collect complete post content</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-154"></a>                <span class="n">post_text</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"main-content"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-155"></a>                <span class="n">link_embed</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"link-embed"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-156"></a>                <span class="n">media_link</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"media-link"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-157"></a>                <span class="n">album</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"album"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-158"></a>                <span class="n">video</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"video-placeholder"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-159"></a>                <span class="n">visibility</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"visibility"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-160"></a>                <span class="n">activity</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"post-activity"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-161"></a>                <span class="n">comments</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="s2">"comments"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-162"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-163"></a>                <span class="k">if</span> <span class="n">video</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-164"></a>                    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"video"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-165"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-166"></a>                <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">media_link</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-167"></a>                    <span class="c1"># link to image in image folder if not external link</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-168"></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">link</span><span class="p">[</span><span class="s2">"href"</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"http"</span><span class="p">):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-169"></a>                        <span class="n">filename</span> <span class="o">=</span> <span class="n">link</span><span class="p">[</span><span class="s2">"href"</span><span class="p">]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-170"></a>                        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-171"></a>                            <span class="n">link</span><span class="p">[</span><span class="s2">"href"</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">".."</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-172"></a>                            <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"photo"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-173"></a>                        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-174"></a>                            <span class="n">LOGGER</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">"No href attribute to convert link destination ({})"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">link</span><span class="p">))</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-175"></a>                        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-176"></a>                            <span class="n">link</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">"src"</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">".."</span><span class="p">,</span> <span class="s2">"images"</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-177"></a>                        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-178"></a>                            <span class="n">LOGGER</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">"No src attribute to convert link destination ({})"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">link</span><span class="p">))</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-179"></a>                    <span class="c1"># throw away redundant p tag filled with the post text</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-180"></a>                    <span class="k">try</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-181"></a>                        <span class="n">link</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-182"></a>                    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-183"></a>                        <span class="k">pass</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-184"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-185"></a>                <span class="c1"># multiple entries only in albums, so we only need first item</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-186"></a>                <span class="c1"># BeautifulSoup.find_all() always returns result, so media_link</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-187"></a>                <span class="c1"># is never None</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-188"></a>                <span class="k">try</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-189"></a>                    <span class="n">media_link</span> <span class="o">=</span> <span class="n">media_link</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-190"></a>                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-191"></a>                    <span class="n">media_link</span> <span class="o">=</span> <span class="bp">None</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-192"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-193"></a>                <span class="k">if</span> <span class="n">album</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-194"></a>                    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"photo_album"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-195"></a>                    <span class="c1"># we don't need media_link if album is available</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-196"></a>                    <span class="n">media_link</span> <span class="o">=</span> <span class="bp">None</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-197"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-198"></a>                <span class="k">if</span> <span class="n">link_embed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-199"></a>                    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"link"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-200"></a>                    <span class="c1"># we don't need media_link if we got external link</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-201"></a>                    <span class="n">media_link</span> <span class="o">=</span> <span class="bp">None</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-202"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-203"></a>                <span class="n">content</span> <span class="o">=</span> <span class="s2">""</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-204"></a>                <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="p">[</span><span class="n">post_text</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-205"></a>                             <span class="n">link_embed</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-206"></a>                             <span class="n">album</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-207"></a>                             <span class="n">media_link</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-208"></a>                             <span class="n">visibility</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-209"></a>                             <span class="n">activity</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-210"></a>                             <span class="n">comments</span><span class="p">]:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-211"></a>                    <span class="k">if</span> <span class="n">part</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-212"></a>                        <span class="n">content</span> <span class="o">=</span> <span class="s2">"{}</span><span class="se">\n</span><span class="s2">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-213"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-214"></a>                <span class="c1"># receive link from post date</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-215"></a>                <span class="n">link</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"href"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-216"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-217"></a>                <span class="n">slug</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">slugify</span><span class="p">(</span><span class="s2">"{}_{}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">post_date</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">title</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="s2">"de"</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-218"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-219"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">slug</span><span class="p">:</span>  <span class="c1"># should never happen</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-220"></a>                    <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Error converting post:"</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-221"></a>                    <span class="k">return</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-222"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-223"></a>                <span class="c1"># additional metadata</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-224"></a>                <span class="n">more</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"link"</span><span class="p">:</span> <span class="n">link</span><span class="p">,</span> <span class="c1"># original G+ post</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-225"></a>                        <span class="s2">"hidetitle"</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="c1"># doesn't work for index pages</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-226"></a>                        <span class="p">}</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-227"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-228"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">write_metadata</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_folder</span><span class="p">,</span> <span class="n">slug</span> <span class="o">+</span> <span class="s2">".meta"</span><span class="p">),</span> <span class="n">title</span><span class="p">,</span> <span class="n">slug</span><span class="p">,</span> <span class="n">post_date</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">more</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-229"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">write_content</span><span class="p">(</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-230"></a>                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_folder</span><span class="p">,</span> <span class="n">slug</span> <span class="o">+</span> <span class="s2">".html"</span><span class="p">),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-231"></a>                    <span class="n">content</span><span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-232"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-233"></a>    <span class="k">def</span> <span class="nf">write_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">slug</span><span class="p">,</span> <span class="n">post_date</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">more</span><span class="p">):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-234"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">CommandImportGplus</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">write_metadata</span><span class="p">(</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-235"></a>            <span class="n">filename</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-236"></a>            <span class="n">title</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-237"></a>            <span class="n">slug</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-238"></a>            <span class="n">post_date</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-239"></a>            <span class="n">description</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-240"></a>            <span class="n">tags</span><span class="p">,</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-241"></a>            <span class="o">**</span><span class="n">more</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-242"></a>            <span class="p">)</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-243"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-244"></a>    <span class="k">def</span> <span class="nf">prettify_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-245"></a>        <span class="sd">"""</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-246"></a><span class="sd">            Titles are generated from post text.</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-247"></a><span class="sd">            Cut junk and shorten to one line</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-248"></a><span class="sd">            for readability and convenience.</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-249"></a><span class="sd">        """</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-250"></a>        <span class="c1"># reduce title string to one line</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-251"></a>        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"&lt;br&gt;"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-252"></a>        <span class="c1"># link in title? just cut it out, ain't nobody got time for that</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-253"></a>        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"&lt;a "</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-254"></a>        <span class="c1"># same for user link</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-255"></a>        <span class="n">t</span><span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"span class="</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-256"></a>        <span class="c1"># cut trailing dots</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-257"></a>        <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"..."</span><span class="p">):</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-258"></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-259"></a>        <span class="c1"># cut html elements and fix quotation marks</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-260"></a>        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="p">[(</span><span class="s2">"&lt;b&gt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-261"></a>                     <span class="p">(</span><span class="s2">"&lt;/b&gt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-262"></a>                     <span class="p">(</span><span class="s2">"&amp;quot;"</span><span class="p">,</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">"</span><span class="p">),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-263"></a>                     <span class="p">(</span><span class="s2">"&amp;#39;"</span><span class="p">,</span> <span class="s2">"'"</span><span class="p">),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-264"></a>                     <span class="p">(</span><span class="s2">"&lt;b"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-265"></a>                     <span class="p">(</span><span class="s2">"&lt;/"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-266"></a>                     <span class="p">(</span><span class="s2">"&lt;i&gt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-267"></a>                     <span class="p">(</span><span class="s2">"&lt;/i&gt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-268"></a>                     <span class="p">(</span><span class="s2">"&lt;"</span><span class="p">,</span> <span class="s2">""</span><span class="p">),]:</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-269"></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tag</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-270"></a>
<a name="rest_code_3d1b3d9617a64003837a70eae1e4aa1e-271"></a>        <span class="k">return</span> <span class="n">t</span>
</pre></td>
</tr></table>
<br><a class="discuss-on-gplus" href="https://plus.google.com/105146352752269764996/posts/SkUoxkiTAK3">Comment on <i class="fa fa-google-plus"></i></a>
</div>
</div>
</div>
        </div>
        
        <ul class="pager hidden-print">
<li class="previous">
                <a href="../non-release/" rel="prev" title="NoN: Fortschritte und Release">Previous post</a>
            </li>
            <li class="next">
                <a href="../non-jetzt-noch-viel-toller/" rel="next" title="NoN: jetzt noch toller">Next post</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="bahnfreikartoffelbrei",
            disqus_url="https://encarsia.github.io/en/posts/google-takeout/",
        disqus_title="Lost in the rabbit hole of Google Takeout",
        disqus_identifier="cache/posts/verloren-im-kaninchenbau-von-google-takeout.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        
    


    </div>

        
       <script>var disqus_shortname="bahnfreikartoffelbrei";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2018 <a href="mailto:An.Ke@bahnfreikartoffelbrei.de">Anke (encarsia)</a> - 
Powered by <a href="http://getnikola.com">Nikola</a> - 
Zen theme based in <a href="https://github.com/arusahni/website-template">Arusahni's website-template</a><br></p>
            
        </footer>
</div>
    </section><script src="../../../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="../../../assets/js/jquery.timeago.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
