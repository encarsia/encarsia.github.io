<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Media player with GStreamer | Merge and Destroy</title>
<link href="//fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.0.11/css/fork-awesome.min.css" integrity="sha256-MGU/JUq/40CFrfxjXb5pZjpoZmxiP2KuICN5ElLFNd8=" crossorigin="anonymous">
<link href="../../../assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (de)" href="../../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../rss.xml">
<link rel="canonical" href="https://encarsia.github.io/en/posts/gst-player/">
<link rel="icon" href="../../../files/favicon.ico" sizes="48x48">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Anke (encarsia)">
<meta property="og:site_name" content="Merge and Destroy">
<meta property="og:title" content="Media player with GStreamer">
<meta property="og:url" content="https://encarsia.github.io/en/posts/gst-player/">
<meta property="og:description" content="Contents

Glade
Python
Set up player
Elements and pipelines
Predefined pipelines


And action!
Progress bar


Possibilities and limitations
Links
Listings
Glade
Python
Example files




Creating a med">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-09-21T15:19:40+02:00">
<meta property="article:tag" content="glade">
<meta property="article:tag" content="python">
<link rel="alternate" hreflang="de" href="../../../posts/gst-player/">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../../index.html" title="Home"><i class="fa fa-home"></i></a></li>
            <li><a href="../../../posts/tutorial-reihe-glade" title="Tutorials"><i class="fa fa-lightbulb-o"></i></a></li>
            <li><a href="../../../projects/index.html" title="Projects"><i class="fa fa-wrench"></i></a></li>
            <li><a href="https://octodon.social/@encarsia" title="Mastodon"><i class="fa fa-mastodon"></i></a></li>
            <li><a href="https://twitter.com/encarsia_" title="Twitter"><i class="fa fa-twitter"></i></a></li>
            <li><a href="../../../pages/gplus_the_end" title="Google+"><i class="fa fa-google-plus-official"></i></a></li>
            <li><a href="https://github.com/encarsia" title="Github"><i class="fa fa-github"></i></a></li>
            <li><a href="../../../categories/index.html" title="Tags"><i class="fa fa-tags"></i></a></li>
            <li><a href="../../../archive.html" title="Archive"><i class="fa fa-folder-open"></i></a></li>
            <li><a href="../../../rss.xml" title="RSS"><i class="fa fa-feed"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
    <div class="post">
    
    <h1 class="p-name entry-title" itemprop="headline name">Media player with GStreamer</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2017-09-21T15:19:40+02:00">2017-09-21 15:19</time><a href="../../../posts/gst-player/" rel="alternate" hreflang="de">
                Deutsch</a>

            
          |  
        <a href="index.rst" id="sourcelink">Source</a>

            </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../../categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div>
<div class="contents warning pull-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#glade" id="id5">Glade</a></li>
<li>
<a class="reference internal" href="#python" id="id6">Python</a><ul>
<li>
<a class="reference internal" href="#set-up-player" id="id7">Set up player</a><ul>
<li><a class="reference internal" href="#elements-and-pipelines" id="id8">Elements and pipelines</a></li>
<li><a class="reference internal" href="#predefined-pipelines" id="id9">Predefined pipelines</a></li>
</ul>
</li>
<li><a class="reference internal" href="#and-action" id="id10">And action!</a></li>
<li><a class="reference internal" href="#progress-bar" id="id11">Progress bar</a></li>
</ul>
</li>
<li><a class="reference internal" href="#possibilities-and-limitations" id="id12">Possibilities and limitations</a></li>
<li><a class="reference internal" href="#links" id="id13">Links</a></li>
<li>
<a class="reference internal" href="#listings" id="id14">Listings</a><ul>
<li><a class="reference internal" href="#id1" id="id15">Glade</a></li>
<li><a class="reference internal" href="#id2" id="id16">Python</a></li>
<li><a class="reference internal" href="#example-files" id="id17">Example files</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Creating a media player with GStreamer 1.x</strong></p>
<p><a class="reference external" href="https://gstreamer.freedesktop.org/">GStreamer</a> is a multimedia framework that can be used ti show (de)code and otherwise alter media files.</p>
<a class="reference external image-reference" href="../../../images/19_gst_player.png"><img alt="/images/19_gst_player.thumbnail.png" src="../../../images/19_gst_player.thumbnail.png"></a>
<div class="section" id="glade">
<h2><a class="toc-backref" href="#id5">Glade</a></h2>
<blockquote>
<ul class="simple">
<li>
<strong>display area of the media file:</strong> <em>Gtk.DrawingArea</em> widget</li>
<li>
<strong>control elements:</strong> skip for-/backward (<em>Gtk.Button</em>), pause/resume playback (<em>Gtk.Togglebutton</em>)</li>
<li>
<strong>select media:</strong> buttons to show video or image file</li>
</ul>
</blockquote>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="#id6">Python</a></h2>
<div class="section" id="set-up-player">
<h3><a class="toc-backref" href="#id7">Set up player</a></h3>
<div class="section" id="elements-and-pipelines">
<h4><a class="toc-backref" href="#id8">Elements and pipelines</a></h4>
<p>GStreamer manages all kinds of media data streams. Every step in the procession chain is defined as an <em>element</em> connected to <em>pipelines</em>. A common pipeline consists of "source", "filter"/"decode" and "sink" elements.</p>
<pre class="code text"><a name="rest_code_59237806e6104979a2425104e0e3c13b-1"></a>------------------------------------------------------
<a name="rest_code_59237806e6104979a2425104e0e3c13b-2"></a>|  pipeline                                          |
<a name="rest_code_59237806e6104979a2425104e0e3c13b-3"></a>|                                                    |
<a name="rest_code_59237806e6104979a2425104e0e3c13b-4"></a>|  -------------   ----------------   -------------- |
<a name="rest_code_59237806e6104979a2425104e0e3c13b-5"></a>|  | source    |   | filter       |   | sink       | |
<a name="rest_code_59237806e6104979a2425104e0e3c13b-6"></a>|  |           |-&gt;&gt;| decoder      |-&gt;&gt;|            | |
<a name="rest_code_59237806e6104979a2425104e0e3c13b-7"></a>|  | input     |   | processing   |   | output     | |
<a name="rest_code_59237806e6104979a2425104e0e3c13b-8"></a>|  -------------   ----------------   -------------- |
<a name="rest_code_59237806e6104979a2425104e0e3c13b-9"></a>------------------------------------------------------
</pre>
<p>This is done by the <em>Gst</em> module:</p>
<pre class="code python"><a name="rest_code_265b6d1b33354155806816daedc2d422-1"></a><span class="c1">#init Gst and create pipeline</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-2"></a><span class="n">Gst</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-3"></a><span class="n">pipeline</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">Pipeline</span><span class="p">()</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-4"></a>
<a name="rest_code_265b6d1b33354155806816daedc2d422-5"></a><span class="c1">#create elements</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-6"></a><span class="n">src</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"filesrc"</span><span class="p">,</span><span class="s2">"source"</span><span class="p">)</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-7"></a><span class="n">decode</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"decodebin"</span><span class="p">,</span><span class="s2">"decode"</span><span class="p">)</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-8"></a><span class="n">sink</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"xvimagesink"</span><span class="p">)</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-9"></a>
<a name="rest_code_265b6d1b33354155806816daedc2d422-10"></a><span class="c1">#configure elements</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-11"></a><span class="n">src</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"location"</span><span class="p">,</span><span class="n">file_location</span><span class="p">)</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-12"></a>
<a name="rest_code_265b6d1b33354155806816daedc2d422-13"></a><span class="c1">#add elements to pipeline</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-14"></a><span class="n">pipeline</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-15"></a><span class="n">pipeline</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">decode</span><span class="p">)</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-16"></a><span class="n">pipeline</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sink</span><span class="p">)</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-17"></a>
<a name="rest_code_265b6d1b33354155806816daedc2d422-18"></a><span class="c1">#link elements together</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-19"></a><span class="n">src</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">decode</span><span class="p">)</span>
<a name="rest_code_265b6d1b33354155806816daedc2d422-20"></a><span class="n">decode</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">sink</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="predefined-pipelines">
<h4><a class="toc-backref" href="#id9">Predefined pipelines</a></h4>
<p>There are plenty of possibilities such like handling audio and video signals separated from each other by assigning a "videosink" and an "audiosink" and so on. On the other hand there are given pipelines for standard tasks like media playback.
In this case there can be made use of the "playbin" element which also significantly reduces the code:</p>
<pre class="code python"><a name="rest_code_4b19ed6c0ce347fea162320951b60dc6-1"></a><span class="n">Gst</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<a name="rest_code_4b19ed6c0ce347fea162320951b60dc6-2"></a><span class="n">player</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"playbin"</span><span class="p">,</span><span class="s2">"player"</span><span class="p">)</span>
<a name="rest_code_4b19ed6c0ce347fea162320951b60dc6-3"></a><span class="n">sink</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"xvimagesink"</span><span class="p">)</span>
<a name="rest_code_4b19ed6c0ce347fea162320951b60dc6-4"></a><span class="n">player</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"uri"</span><span class="p">,</span><span class="n">uri_of_file</span><span class="p">)</span>
<a name="rest_code_4b19ed6c0ce347fea162320951b60dc6-5"></a><span class="n">player</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"video-sink"</span><span class="p">,</span> <span class="n">sink</span><span class="p">)</span>
</pre>
</div>
</div>
<div class="section" id="and-action">
<h3><a class="toc-backref" href="#id10">And action!</a></h3>
<p>A pipeline or playbin element can now be controled by <em>Gst.STATE</em>:
.. code-block:: python</p>
<blockquote>
player.set_state(Gst.State.PLAYING)
player.set_state(Gst.State.PAUSED)</blockquote>
</div>
<div class="section" id="progress-bar">
<h3><a class="toc-backref" href="#id11">Progress bar</a></h3>
<p>The video progress in this example will not be visualized by a <em>Gtk.ProgressBar</em> but by a horizontal <em>Gtk.Scale</em>. This widget allows to manually set a position with the mouse instead of just showing a value using the <em>value-changed</em> signal. Strictly speaking the <em>change-value</em> signal is a much cleaner solution here which will be used in the <a class="reference external" href="../vlc-player/">follow-up article</a> on relizing the media player with LibVLC.</p>
</div>
</div>
<div class="section" id="possibilities-and-limitations">
<h2><a class="toc-backref" href="#id12">Possibilities and limitations</a></h2>
<p>Getting to know how to utilize GStreamer there appear a bunch of obstacles (read as: the incompetent author of this article tend to widely generalize based on her experiences):</p>
<p>There are plenty of tutorials but two circumstances make them difficult to comply with:</p>
<ol class="arabic simple">
<li>The primary language in GStreamer is C. Good luck with your Python stuff.</li>
<li>Many older tutorials and manuals do not work out of the box because of major version leap of both GStreamer (0.10 to 1.x) and Python (2.x auf 3.x).</li>
</ol>
<p>In addition there are effects that are hard to understand. The example given in this article does not work if the Gtk window contains a headerbar. In theory this should be solved by using the "gtksink" but I haven't figured out yet how to assign that sink to a specific widget.</p>
</div>
<div class="section" id="links">
<h2><a class="toc-backref" href="#id13">Links</a></h2>
<blockquote>
<ul class="simple">
<li><a class="reference external" href="http://brettviren.github.io/pygst-tutorial-org/">Tutorial on using GStreamer Python Bindings in org-mode</a></li>
<li><a class="reference external" href="https://github.com/hadware/gstreamer-python-player/blob/master/seek.py">gstreamer-python-player/seek.py example</a></li>
<li><a class="reference external" href="https://gstreamer.freedesktop.org/documentation/plugins.html">GStreamer List of Elements and Plugins</a></li>
<li><a class="reference external" href="https://gstreamer.freedesktop.org/documentation/index.html">GStreamer documentation</a></li>
<li><a class="reference external" href="https://adnanalamkhan.wordpress.com/2015/03/01/using-gstreamer-1-0-with-python/">Using GStreamer 1.0 with Python</a></li>
<li><a class="reference external" href="../vlc-player/">Mediaplayer mit VLC</a></li>
</ul>
</blockquote>
<!-- TEASER_END -->
</div>
<div class="section" id="listings">
<h2><a class="toc-backref" href="#id14">Listings</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id15">Glade</a></h3>
<p><a class="reference external" href="../../../listings/19_gst_player.glade.html">19_gst_player.glade</a>  <a class="reference external" href="../../../listings/19_gst_player.glade">(Source)</a></p>
<pre class="code xml"><a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-1"></a><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-2"></a><span class="c">&lt;!-- Generated with glade 3.20.0 --&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-3"></a><span class="nt">&lt;interface&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-4"></a>  <span class="nt">&lt;requires</span> <span class="na">lib=</span><span class="s">"gtk+"</span> <span class="na">version=</span><span class="s">"3.16"</span><span class="nt">/&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-5"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkAdjustment"</span> <span class="na">id=</span><span class="s">"adjustment"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-6"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"upper"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-7"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"step_increment"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-8"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"page_increment"</span><span class="nt">&gt;</span>10<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-9"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-10"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkImage"</span> <span class="na">id=</span><span class="s">"image1"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-11"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-12"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-13"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"stock"</span><span class="nt">&gt;</span>gtk-media-rewind<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-14"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-15"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkImage"</span> <span class="na">id=</span><span class="s">"image2"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-16"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-17"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-18"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"stock"</span><span class="nt">&gt;</span>gtk-media-forward<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-19"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-20"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkImage"</span> <span class="na">id=</span><span class="s">"image3"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-21"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-22"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-23"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"stock"</span><span class="nt">&gt;</span>gtk-media-pause<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-24"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-25"></a>  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkWindow"</span> <span class="na">id=</span><span class="s">"window"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-26"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-27"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"title"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>GStreamer media player<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-28"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"default_width"</span><span class="nt">&gt;</span>600<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-29"></a>    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"default_height"</span><span class="nt">&gt;</span>350<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-30"></a>    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"destroy"</span> <span class="na">handler=</span><span class="s">"on_window_destroy"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-31"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-32"></a>      <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkBox"</span> <span class="na">id=</span><span class="s">"box1"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-33"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-34"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-35"></a>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"orientation"</span><span class="nt">&gt;</span>vertical<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-36"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-37"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkDrawingArea"</span> <span class="na">id=</span><span class="s">"play_here"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-38"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-39"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-40"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-41"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-42"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-43"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-44"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-45"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-46"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-47"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-48"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkSeparator"</span> <span class="na">id=</span><span class="s">"separator1"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-49"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-50"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-51"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-52"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-53"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-54"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-55"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-56"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-57"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-58"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-59"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkBox"</span> <span class="na">id=</span><span class="s">"box3"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-60"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-61"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-62"></a>            <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-63"></a>              <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButtonBox"</span> <span class="na">id=</span><span class="s">"buttonbox1"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-64"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-65"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-66"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"layout_style"</span><span class="nt">&gt;</span>start<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-67"></a>                <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-68"></a>                  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span> <span class="na">id=</span><span class="s">"backward"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-69"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-70"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-71"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-72"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"image"</span><span class="nt">&gt;</span>image1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-73"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"always_show_image"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-74"></a>                    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"clicked"</span> <span class="na">handler=</span><span class="s">"on_backward_clicked"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-75"></a>                  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-76"></a>                  <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-77"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-78"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-79"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-80"></a>                  <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-81"></a>                <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-82"></a>                <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-83"></a>                  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span> <span class="na">id=</span><span class="s">"forward"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-84"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-85"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-86"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-87"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"image"</span><span class="nt">&gt;</span>image2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-88"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"always_show_image"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-89"></a>                    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"clicked"</span> <span class="na">handler=</span><span class="s">"on_forward_clicked"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-90"></a>                  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-91"></a>                  <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-92"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-93"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-94"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-95"></a>                  <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-96"></a>                <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-97"></a>                <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-98"></a>                  <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkToggleButton"</span> <span class="na">id=</span><span class="s">"playpause_togglebutton"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-99"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-100"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-101"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-102"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"image"</span><span class="nt">&gt;</span>image3<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-103"></a>                    <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"toggled"</span> <span class="na">handler=</span><span class="s">"on_playpause_togglebutton_toggled"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-104"></a>                  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-105"></a>                  <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-106"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-107"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-108"></a>                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-109"></a>                  <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-110"></a>                <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-111"></a>              <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-112"></a>              <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-113"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-114"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-115"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-116"></a>              <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-117"></a>            <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-118"></a>            <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-119"></a>              <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkScale"</span> <span class="na">id=</span><span class="s">"progress"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-120"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"width_request"</span><span class="nt">&gt;</span>300<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-121"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-122"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-123"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"halign"</span><span class="nt">&gt;</span>center<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-124"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"margin_left"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-125"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"margin_right"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-126"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"adjustment"</span><span class="nt">&gt;</span>adjustment<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-127"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill_level"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-128"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"round_digits"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-129"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"draw_value"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-130"></a>              <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-131"></a>              <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-132"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-133"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-134"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-135"></a>              <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-136"></a>            <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-137"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-138"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-139"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-140"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-141"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-142"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-143"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-144"></a>        <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-145"></a>          <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkBox"</span> <span class="na">id=</span><span class="s">"box2"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-146"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-147"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-148"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"homogeneous"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-149"></a>            <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-150"></a>              <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span> <span class="na">id=</span><span class="s">"vbutton"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-151"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"label"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>Play video<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-152"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-153"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-154"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-155"></a>                <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"clicked"</span> <span class="na">handler=</span><span class="s">"on_vbutton_clicked"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-156"></a>              <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-157"></a>              <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-158"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-159"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-160"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-161"></a>              <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-162"></a>            <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-163"></a>            <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-164"></a>              <span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkButton"</span> <span class="na">id=</span><span class="s">"ibutton"</span><span class="nt">&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-165"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"label"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>Show image<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-166"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"visible"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-167"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"can_focus"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-168"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"receives_default"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-169"></a>                <span class="nt">&lt;signal</span> <span class="na">name=</span><span class="s">"clicked"</span> <span class="na">handler=</span><span class="s">"on_ibutton_clicked"</span> <span class="na">swapped=</span><span class="s">"no"</span><span class="nt">/&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-170"></a>              <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-171"></a>              <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-172"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-173"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-174"></a>                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-175"></a>              <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-176"></a>            <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-177"></a>          <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-178"></a>          <span class="nt">&lt;packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-179"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"expand"</span><span class="nt">&gt;</span>False<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-180"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fill"</span><span class="nt">&gt;</span>True<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-181"></a>            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"position"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-182"></a>          <span class="nt">&lt;/packing&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-183"></a>        <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-184"></a>      <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-185"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-186"></a>    <span class="nt">&lt;child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-187"></a>      <span class="nt">&lt;placeholder/&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-188"></a>    <span class="nt">&lt;/child&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-189"></a>  <span class="nt">&lt;/object&gt;</span>
<a name="rest_code_8645ef803e0d4ccd909942fc7b529dee-190"></a><span class="nt">&lt;/interface&gt;</span>
</pre>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id16">Python</a></h3>
<p><a class="reference external" href="../../../listings/19_gst_simpleplayer.py.html">19_gst_simpleplayer.py</a>  <a class="reference external" href="../../../listings/19_gst_simpleplayer.py">(Source)</a></p>
<pre class="code python"><a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-1"></a><span class="ch">#!/usr/bin/env python</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-2"></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-3"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-4"></a><span class="kn">import</span> <span class="nn">os</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-5"></a><span class="kn">import</span> <span class="nn">time</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-6"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-7"></a><span class="kn">import</span> <span class="nn">gi</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-8"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s2">"Gtk"</span><span class="p">,</span> <span class="s2">"3.0"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-9"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s2">"Gst"</span><span class="p">,</span> <span class="s2">"1.0"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-10"></a><span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s2">"GstVideo"</span><span class="p">,</span> <span class="s2">"1.0"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-11"></a><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">Gst</span><span class="p">,</span> <span class="n">Gtk</span><span class="p">,</span> <span class="n">GLib</span><span class="p">,</span> <span class="n">GstVideo</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-12"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-13"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-14"></a><span class="k">class</span> <span class="nc">GenericException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-15"></a>    <span class="k">pass</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-16"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-17"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-18"></a><span class="k">class</span> <span class="nc">Handler</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-19"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-20"></a>    <span class="k">def</span> <span class="nf">on_window_destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-21"></a>        <span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-22"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-23"></a>    <span class="k">def</span> <span class="nf">on_playpause_togglebutton_toggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-24"></a>        <span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">playpause_button</span><span class="o">.</span><span class="n">get_active</span><span class="p">():</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-25"></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">new_from_icon_name</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_MEDIA_PLAY</span><span class="p">,</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-26"></a>                                               <span class="n">Gtk</span><span class="o">.</span><span class="n">IconSize</span><span class="o">.</span><span class="n">BUTTON</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-27"></a>            <span class="n">widget</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"image"</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-28"></a>            <span class="n">app</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-29"></a>        <span class="k">else</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-30"></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">new_from_icon_name</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_MEDIA_PAUSE</span><span class="p">,</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-31"></a>                                               <span class="n">Gtk</span><span class="o">.</span><span class="n">IconSize</span><span class="o">.</span><span class="n">BUTTON</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-32"></a>            <span class="n">widget</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"image"</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-33"></a>            <span class="n">app</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-34"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-35"></a>    <span class="k">def</span> <span class="nf">on_forward_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-36"></a>        <span class="n">app</span><span class="o">.</span><span class="n">skip_time</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-37"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-38"></a>    <span class="k">def</span> <span class="nf">on_backward_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-39"></a>        <span class="n">app</span><span class="o">.</span><span class="n">skip_time</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-40"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-41"></a>    <span class="k">def</span> <span class="nf">on_progress_value_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-42"></a>        <span class="n">app</span><span class="o">.</span><span class="n">on_slider_seek</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-43"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-44"></a>    <span class="k">def</span> <span class="nf">on_vbutton_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-45"></a>        <span class="n">app</span><span class="o">.</span><span class="n">clear_playbin</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-46"></a>        <span class="n">app</span><span class="o">.</span><span class="n">setup_player</span><span class="p">(</span><span class="s2">"mediaplayer.avi"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-47"></a>        <span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">playpause_button</span><span class="o">.</span><span class="n">get_active</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-48"></a>            <span class="n">app</span><span class="o">.</span><span class="n">playpause_button</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-49"></a>        <span class="k">else</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-50"></a>            <span class="n">app</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-51"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-52"></a>    <span class="k">def</span> <span class="nf">on_ibutton_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-53"></a>        <span class="n">app</span><span class="o">.</span><span class="n">clear_playbin</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-54"></a>        <span class="n">app</span><span class="o">.</span><span class="n">setup_player</span><span class="p">(</span><span class="s2">"mediaplayer.jpg"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-55"></a>        <span class="n">app</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-56"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-57"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-58"></a><span class="k">class</span> <span class="nc">GstPlayer</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-59"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-60"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-61"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-62"></a>        <span class="c1"># init GStreamer</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-63"></a>        <span class="n">Gst</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-64"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-65"></a>        <span class="c1"># setting up builder</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-66"></a>        <span class="n">builder</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Builder</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-67"></a>        <span class="n">builder</span><span class="o">.</span><span class="n">add_from_file</span><span class="p">(</span><span class="s2">"19_gst_player.glade"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-68"></a>        <span class="n">builder</span><span class="o">.</span><span class="n">connect_signals</span><span class="p">(</span><span class="n">Handler</span><span class="p">())</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-69"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-70"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">movie_window</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"play_here"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">playpause_button</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"playpause_togglebutton"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-72"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">slider</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"progress"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-73"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">slider_handler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"value-changed"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_slider_seek</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-74"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-75"></a>        <span class="n">window</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"window"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-76"></a>        <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-77"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-78"></a>        <span class="c1"># setting up videoplayer</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-79"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"playbin"</span><span class="p">,</span> <span class="s2">"player"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-80"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sink</span> <span class="o">=</span> <span class="n">Gst</span><span class="o">.</span><span class="n">ElementFactory</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">"xvimagesink"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-81"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sink</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"force-aspect-ratio"</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-82"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-83"></a>    <span class="k">def</span> <span class="nf">setup_player</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">f</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-84"></a>        <span class="c1"># file to play must be transmitted as uri</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-85"></a>        <span class="n">uri</span> <span class="o">=</span> <span class="s2">"file://"</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-86"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"uri"</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-87"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-88"></a>        <span class="c1"># make playbin play in specified DrawingArea widget instead of</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-89"></a>        <span class="c1"># separate, GstVideo needed</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-90"></a>        <span class="n">win_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">movie_window</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s2">"window"</span><span class="p">)</span><span class="o">.</span><span class="n">get_xid</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sink</span><span class="o">.</span><span class="n">set_window_handle</span><span class="p">(</span><span class="n">win_id</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"video-sink"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sink</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-93"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-94"></a>    <span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-95"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_playing</span> <span class="o">=</span> <span class="bp">True</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-96"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">PLAYING</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-97"></a>        <span class="c1">#starting up a timer to check on the current playback value</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-98"></a>        <span class="n">GLib</span><span class="o">.</span><span class="n">timeout_add</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_slider</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-99"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-100"></a>    <span class="k">def</span> <span class="nf">pause</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-101"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_playing</span> <span class="o">=</span> <span class="bp">False</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-102"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">PAUSED</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-103"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-104"></a>    <span class="k">def</span> <span class="nf">current_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-105"></a>        <span class="n">status</span><span class="p">,</span><span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">query_position</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-106"></a>        <span class="k">return</span> <span class="n">position</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-107"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-108"></a>    <span class="k">def</span> <span class="nf">skip_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-109"></a>        <span class="c1">#skip 20 seconds on forward/backward button</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-110"></a>        <span class="n">app</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">seek_simple</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">,</span>  <span class="n">Gst</span><span class="o">.</span><span class="n">SeekFlags</span><span class="o">.</span><span class="n">FLUSH</span> <span class="o">|</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SeekFlags</span><span class="o">.</span><span class="n">KEY_UNIT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_position</span><span class="p">()</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SECOND</span> <span class="o">*</span> <span class="n">direction</span> <span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-111"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-112"></a>    <span class="k">def</span> <span class="nf">update_slider</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-113"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_playing</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-114"></a>            <span class="k">return</span> <span class="bp">False</span> <span class="c1"># cancel timeout</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-115"></a>        <span class="k">else</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-116"></a>            <span class="n">success</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">query_duration</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-117"></a>            <span class="c1"># adjust duration and position relative to absolute scale of 100</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-118"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">/</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SECOND</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-119"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-120"></a>                <span class="k">raise</span> <span class="n">GenericException</span><span class="p">(</span><span class="s2">"Couldn't fetch duration"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-121"></a>            <span class="c1"># fetching the position, in nanosecs</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-122"></a>            <span class="n">success</span><span class="p">,</span> <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">query_position</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-123"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-124"></a>                <span class="k">raise</span> <span class="n">GenericException</span><span class="p">(</span><span class="s2">"Couldn't fetch current position to update slider"</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-125"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-126"></a>            <span class="c1"># block seek handler so we don't seek when we set_value()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-127"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">handler_block</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_handler_id</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-128"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">/</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SECOND</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">mult</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-129"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">handler_unblock</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_handler_id</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-130"></a>        <span class="k">return</span> <span class="bp">True</span> <span class="c1"># continue calling every x milliseconds</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-131"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-132"></a>    <span class="k">def</span> <span class="nf">on_slider_seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-133"></a>        <span class="n">seek_time</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-134"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">seek_simple</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">TIME</span><span class="p">,</span>  <span class="n">Gst</span><span class="o">.</span><span class="n">SeekFlags</span><span class="o">.</span><span class="n">FLUSH</span> <span class="o">|</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SeekFlags</span><span class="o">.</span><span class="n">KEY_UNIT</span><span class="p">,</span> <span class="n">seek_time</span> <span class="o">*</span> <span class="n">Gst</span><span class="o">.</span><span class="n">SECOND</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">mult</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-135"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-136"></a>    <span class="k">def</span> <span class="nf">clear_playbin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-137"></a>        <span class="k">try</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-138"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">Gst</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">NULL</span><span class="p">)</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-139"></a>        <span class="k">except</span><span class="p">:</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-140"></a>            <span class="k">pass</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-141"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-142"></a>    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-143"></a>        <span class="n">Gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-144"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-145"></a>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-146"></a><span class="n">app</span> <span class="o">=</span> <span class="n">GstPlayer</span><span class="p">()</span>
<a name="rest_code_2b42d216b15e46c8bf4c9b153eeb0ade-147"></a><span class="n">app</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre>
</div>
<div class="section" id="example-files">
<h3><a class="toc-backref" href="#id17">Example files</a></h3>
<blockquote>
<ul class="simple">
<li><a class="reference external" href="../../../files/mediaplayer.avi">Video (13,7 MB)</a></li>
<li><a class="reference external" href="../../../files/mediaplayer.jpg">Image (553 kB)</a></li>
</ul>
</blockquote>
</div>
</div>
</div>
        </div>
        
        <ul class="pager hidden-print">
<li class="previous">
                <a href="../gpt-v04-release/" rel="prev" title="GPT: v0.4 Release">Previous post</a>
            </li>
            <li class="next">
                <a href="../vlc-player/" rel="next" title="Media player with VLC">Next post</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="bahnfreikartoffelbrei",
            disqus_url="https://encarsia.github.io/en/posts/gst-player/",
        disqus_title="Media player with GStreamer",
        disqus_identifier="cache/posts/mediaplayer-mit-gstreamer.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        
    


    </div>

        
       <script>var disqus_shortname="bahnfreikartoffelbrei";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2019 <a href="mailto:An.Ke@bahnfreikartoffelbrei.de">Anke (encarsia)</a> - 
Powered by <a href="http://getnikola.com">Nikola</a> - 
Zen theme based in <a href="https://github.com/arusahni/website-template">Arusahni's website-template</a><br></p>
            
        </footer>
</div>
    </section><script src="../../../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
