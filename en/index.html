<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Gute Absichten">
<meta name="viewport" content="width=device-width">
<title>Merge and Destroy | Merge and Destroy</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (de)" href="../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="rss.xml">
<link rel="canonical" href="https://encarsia.github.io/en/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->
</head>
<body>
    <section class="social"><ul>
<li><a href="../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://plus.google.com/105146352752269764996/posts" title="Google+"><i class="icon-google-plus"></i></a></li>
            <li><a href="https://github.com/encarsia" title="Github"><i class="icon-github"></i></a></li>
            <li><a href="https://twitter.com/encarsia_" title="Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="../pages/about/index.html" title="About me"><i class="icon-user"></i></a></li>
            <li><a href="../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
        <div class="post">
            <h1 class="title"><a href="posts/beeline/">BeeLine - erster Eindruck</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-03-14T13:45:52+01:00">2017-03-14 13:45</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/beeline/#disqus_thread" data-disqus-identifier="cache/posts/erster-eindruck-des-beeline.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/beeline/" rel="tag">beeline</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="section" id="navigationskompass">
<h2>Navigationskompass</h2>
<a class="reference external image-reference" href="../images/BeeLine/beeline.jpg"><img alt="/images/BeeLine/beeline.thumbnail.jpg" src="../images/BeeLine/beeline.thumbnail.jpg"></a>
<p>BeeLine ist im weitesten Sinne ein Fahrradnavi. Das Konzept des BeeLine ist, dass es keine Route, sondern wie eine Kompassnadel die Richtung des Ziels bzw. eines Wegpunktes und dessen Entfernung anzeigt. Ist das BeeLine gerade nicht mit dem Telefon gekoppelt, zeigt die "Nadel" auch tatsächlich nach Norden.
Dieser Prämisse folgend wird dem Nutzer die Streckenwahl komplett überlassen und so wird es auch beworben:</p>
<pre class="literal-block">
BeeLine is built for everyday adventuring. After all, where’s the fun in being told exactly what to do?

Take back control of your ride and explore your city with BeeLine.
</pre>
</div>
<div class="section" id="technikgeraffel">
<h2>Technikgeraffel</h2>
<div class="section" id="beeline">
<h3>BeeLine</h3>
<p>Das Gerät verfügt über einen internen Akku, der etwa 30 Stunden im Betrieb halten soll. Das E-Ink-Display ist energiesparend, wetterfest und sonnenlichtverträglich, für den Nachtbetrieb gibt es eine zuschaltbare Beleuchtung, die Bedienung erfolgt über die vier äußeren Tasten und die zugehörige App.</p>
</div>
<div class="section" id="app">
<h3>App</h3>
<a class="reference external image-reference" href="../images/BeeLine/app_main.png"><img alt="/images/BeeLine/app_main.thumbnail.png" src="../images/BeeLine/app_main.thumbnail.png"></a>
<p>Nach der BeeLine-Anmeldung und dem Pairen des Gerätes per Bluetooth geht es los.
Unter <em>"Where to?"</em> tippt man auf der Karte auf das Ziel und drückt den gelben "BeeLine"-Button. Alternativ wählt man unter <em>"Destinations"</em> ein Ziel aus, das sich auch speichern und wieder aufrufen lässt. Ziele mit dazwischenliegenden Wegpunkten kann man als Route speichern.</p>
<p>Die App verfügt auch über die Kompass-Ansicht des BeeLine, könnte also theoretisch auch ohne Gerät mit einer Lenkerhaltung genau so genutzt werden.</p>
<a class="reference external image-reference" href="../images/BeeLine/app_compass.png"><img alt="/images/BeeLine/app_compass.thumbnail.png" src="../images/BeeLine/app_compass.thumbnail.png"></a>
</div>
<div class="section" id="fahrrad">
<h3>Fahrrad</h3>
<p>BeeLine lässt sich duch das flexible Gummiband an diversen Stellen am Fahrrad befestigen. Die Ausrichtung lässt sich in der App um 90° drehen, so dass sowohl der Lenker als auch der Vorbau oder das Oberrohr als Befestigungspunkt in Frage kommen.</p>
<a class="reference external image-reference" href="../images/BeeLine/mount.jpg"><img alt="/images/BeeLine/mount.thumbnail.jpg" src="../images/BeeLine/mount.thumbnail.jpg"></a>
<p>Die Befestigung erweist sich als wesentlich flexibler, stabiler und vertrauenswürdiger als etwa die Bike Citizens-Halterung, die ich für ziemlich ungelungen halte.</p>
</div>
</div>
<div class="section" id="sind-wir-schon-da">
<h2>Sind wir schon da?</h2>
<p>BeeLine visiert nun das Ziel an, die angezeigte Entfernung entspricht der Luftlinie.</p>
<a class="reference external image-reference" href="../images/BeeLine/app_map.jpg"><img alt="/images/BeeLine/app_map.thumbnail.jpg" src="../images/BeeLine/app_map.thumbnail.jpg"></a>
<p>Da ich meist ohne E.T. unterwegs bin, gebietet es die Neugier, über unbekannte Wege zum Ziel abkürzen zu wollen. Das hat spontan bei mir nicht geklappt, ich musste wieder umkehren, aber immerhin weiß ich nun, dass es in Treptow das hier gibt:</p>
<a class="reference external image-reference" href="../images/BeeLine/unicorn.jpg"><img alt="/images/BeeLine/unicorn.thumbnail.jpg" src="../images/BeeLine/unicorn.thumbnail.jpg"></a>
<p>Blöderweise bin ich kein Einhornfan und finde den Hype darum inzwischen nur noch unkreativ bis peinlich (gilt nicht für Leute, die schon immer ein Herz für Einhörner hatten und nicht auf den fahrenden Zug aufgesprungen sind). Aber das Potential, beim Sichverfahren etwas Neues zu entdecken, ist definitiv gegeben.</p>
<p>Wird die Fahrt beendet, was nicht automatisch beim Erreichen des Zieles ist, wird diese in der App gespeichert.</p>
<a class="reference external image-reference" href="../images/BeeLine/app_route.png"><img alt="/images/BeeLine/app_route.thumbnail.png" src="../images/BeeLine/app_route.thumbnail.png"></a>
</div>
<div class="section" id="verbesserungspotential">
<h2>Verbesserungspotential</h2>
<div class="section" id="wegpunkte">
<h3>Wegpunkte</h3>
<p>Man kann irgendwie zwischen Wegpunkten switchen, man sieht auf dem Display aber nicht, bei welchem man gerade ist und offenbar kann man nur vorwärts "durchblättern". Das muss ich nochmal testen.</p>
</div>
<div class="section" id="fahrt-versehentlich-beenden">
<h3>Fahrt versehentlich beenden</h3>
<p>Mir ist es jetzt zweimal passiert, dass die Fahrt versehentlich beendet wurde und die Strecke auch nicht hinterher in der App unter <em>"Rides"</em> aufgeführt war. Ich glaube, da steckt mehr als nur ein Bedienungsfehler hinter, das muss ich ebenfalls nochmal genauer untersuchen.</p>
</div>
<div class="section" id="bedienung">
<h3>Bedienung</h3>
<p>Das Gerät verfügt über vier Buttons (N/S/E/W), die man aber eher so durchklickt. Es ist nicht ersichtlich, welche Funktionen dahinter stecken.</p>
</div>
<div class="section" id="routen-importieren">
<h3>Routen importieren</h3>
<p>Die App speichert die Route, es wäre also auch möglich, Routen zu importieren. Genial fände ich einen alternativen Navigationsmodus, der nach Strecke navigiert, dann hätte man gleichzeitig einen optisch ansprechenden Garmin-Ersatz, eine eierlegende Navi-Sau sozusagen.</p>
</div>
</div>
<div class="section" id="pros-and-cons">
<h2>Pros and Cons</h2>
<table border="1" class="docutils">
<colgroup>
<col width="49%">
<col width="51%">
</colgroup>
<thead valign="bottom"><tr>
<th class="head"><strong>Pro</strong></th>
<th class="head"><strong>Contra</strong></th>
</tr></thead>
<tbody valign="top">
<tr>
<td>einfache Befestigung</td>
<td>Halterung birgt Gefahr der
Materialermüdung, Ersatzhalterungen
sollen zukünftig erhältlich sein</td>
</tr>
<tr>
<td>lange Akkulaufzeit</td>
<td>funktioniert nicht ohne App</td>
</tr>
<tr>
<td>minimalistische Navigation</td>
<td>minimalistische Navigation</td>
</tr>
<tr>
<td>optisch ansprechend</td>
<td>Preis-Leistungs-Verhältnis (115 Euro)</td>
</tr>
<tr>
<td>Display gut lesbar</td>
<td> </td>
</tr>
<tr>
<td>lenkt beim Fahren nicht ab</td>
<td> </td>
</tr>
<tr>
<td>verleitet dazu, neue Wege zu testen</td>
<td> </td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="links">
<h2>Links</h2>
<ul class="simple">
<li><a class="reference external" href="https://BeeLine.co">BeeLine</a></li>
<li><a class="reference external" href="https://www.kickstarter.com/projects/1411369083/BeeLine-smart-navigation-for-bicycles-made-simple">BeeLine Kickstarter-Projekt</a></li>
<li><a class="reference external" href="http://www.bikecitizens.net/">Bike Citizens</a></li>
</ul>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/fcdialog/">File chooser dialog</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-02-01T23:22:02+01:00">2017-02-01 23:22</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/fcdialog/#disqus_thread" data-disqus-identifier="cache/posts/fcdialog.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="contents warning pull-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li>
<a class="reference internal" href="posts/fcdialog/#glade" id="id4">Glade</a><ul>
<li>
<a class="reference internal" href="posts/fcdialog/#action-area-and-responses" id="id5">Action area and Responses</a><ul>
<li><a class="reference internal" href="posts/fcdialog/#xml-file" id="id6">XML file</a></li>
<li><a class="reference internal" href="posts/fcdialog/#add-action-widget-function" id="id7">add_action_widget function</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/fcdialog/#preview-widget" id="id8">Preview widget</a></li>
<li><a class="reference internal" href="posts/fcdialog/#filefilter" id="id9">FileFilter</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/fcdialog/#python" id="id10">Python</a><ul>
<li><a class="reference internal" href="posts/fcdialog/#dialog-without-glade" id="id11">Dialog without Glade</a></li>
<li><a class="reference internal" href="posts/fcdialog/#id1" id="id12">FileFilter</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/fcdialog/#listings" id="id13">Listings</a><ul>
<li><a class="reference internal" href="posts/fcdialog/#id2" id="id14">Glade</a></li>
<li><a class="reference internal" href="posts/fcdialog/#id3" id="id15">Python</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>FileChooserDialog</strong></p>
<p>The <em>GtkFileChooserDialog</em> is a subclass of <em>GtkDialog</em> (see <a class="reference external" href="posts/dialoge">diaogue article</a>) and provides opening and saving of files and folders.</p>
<a class="reference external image-reference" href="../images/16_fcd.png"><img alt="/images/16_fcd.thumbnail.png" src="../images/16_fcd.thumbnail.png"></a>
<div class="section" id="glade">
<h2><a class="toc-backref" href="posts/fcdialog/#id4">Glade</a></h2>
<p>The dialog can be added from the <em>"Toplevel</em>" section of the widget sidebar. In addition to the file browser itself the widget has an intern <em>GtkBox</em> for additional widgets and a <em>GtkButtonBox</em> as "action area" for buttons.</p>
<p>First the <em>Gtk.FileChooserAction</em> mode must be defined (see <a class="reference external" href="https://lazka.github.io/pgi-docs/#Gtk-3.0/enums.html#Gtk.FileChooserAction">Python GI API Reference</a>): open or save file, choose or create a folder.</p>
<div class="section" id="action-area-and-responses">
<h3><a class="toc-backref" href="posts/fcdialog/#id5">Action area and Responses</a></h3>
<p>The <em>response</em> signal is emitted on widget interaction in the action area which also passes the response value. So for these widgets there is no need to activate the <em>clicked</em> signal of buttons.</p>
<p>By default the "action area" is generated beneath the file browser area.</p>
<a class="reference external image-reference" href="../images/16_fcd_glade.png"><img alt="/images/16_fcd_glade.thumbnail.png" src="../images/16_fcd_glade.thumbnail.png"></a>
<p>If the <em>FileChooserDialog</em> is used without Glade (see below) the buttons are created in the headerbar. This seems to be standard procedure because Glade generated dialogs induce the warning</p>
<pre class="code text"><a name="rest_code_9b5e233950524154b115dba53ef10842-1"></a>Gtk-WARNING **: Content added to the action area of a dialog using header bars
</pre>
<p>This message is not shown if buttons are not added to the intern action area.</p>
<p>If a headerbar with buttons is created in Glade the buttons cannot be assigned to a response value.</p>
<p>There may be several solutions to the problem:</p>
<div class="section" id="xml-file">
<h4><a class="toc-backref" href="posts/fcdialog/#id6">XML file</a></h4>
<p>After creating a headerbar with button(s) the Glade file is opened in a text editor and add line(s) to the <tt class="docutils literal"><span class="pre">&lt;action-widgets&gt;</span></tt> element:
.. code-block:: xml</p>
<blockquote>
<dl class="docutils">
<dt>&lt;object class="GtkFileChooserDialog" id="filechooser_dialog"&gt;</dt>
<dd>
<p class="first">&lt;property ... &gt;&lt;/property&gt;
&lt;property ... &gt;&lt;/property&gt;
...
&lt;action-widgets&gt;</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">&lt;string&gt;</tt>, line 50)</p>
Unexpected indentation.</div>
<blockquote>
&lt;!-- Buttons innerhalb der action area --&gt;
&lt;action-widget response="0"&gt;button1&lt;/action-widget&gt;
&lt;action-widget response="1"&gt;button2&lt;/action-widget&gt;
&lt;!-- Button in Headerbar --&gt;
&lt;action-widget response="-1"&gt;hb_button&lt;/action-widget&gt;</blockquote>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">&lt;string&gt;</tt>, line 55)</p>
Block quote ends without a blank line; unexpected unindent.</div>
<p class="last">&lt;/action-widgets&gt;
...</p>
</dd>
</dl>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">&lt;string&gt;</tt>, line 57)</p>
Definition list ends without a blank line; unexpected unindent.</div>
<p>&lt;/object&gt;</p>
</blockquote>
<p>This works but this procedure is surely not the intended way to deal with the problem because after altering the Glade file the edit is retracted.</p>
</div>
<div class="section" id="add-action-widget-function">
<h4><a class="toc-backref" href="posts/fcdialog/#id7">add_action_widget function</a></h4>
<p>The <tt class="docutils literal">add_action_widget</tt> adds activatable widgets to the action area and hold a response value. This includes widgets of the <em>Gtk.Activatable</em> class: <em>Buttons</em>, <em>MenuItem</em>, <em>RecentChooserMenu</em>, <em>Switch</em> and <em>ToolItem</em>.</p>
<p>The scheme for creating a button is</p>
<pre class="code python"><a name="rest_code_5fb6322318284341acef334c829ecb6b-1"></a><span class="n">widget</span><span class="o">.</span><span class="n">add_action_widget</span><span class="p">(</span><span class="n">button</span><span class="p">,</span><span class="n">response</span><span class="p">)</span>
</pre>
<p>The widget property "can-default" of the button must be activated:</p>
<pre class="code python"><a name="rest_code_528dc5f81bb3430b92952458aeeed140-1"></a><span class="n">button</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"can-default"</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
</pre>
<p>In the example the standard buttons "apply/cancel" are added to the file dialog:</p>
<pre class="code python"><a name="rest_code_704adc7088e2414d81c083f6d95d6577-1"></a><span class="n">button</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="n">new_from_stock</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_CANCEL</span><span class="p">)</span>
<a name="rest_code_704adc7088e2414d81c083f6d95d6577-2"></a><span class="n">button</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"can-default"</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
<a name="rest_code_704adc7088e2414d81c083f6d95d6577-3"></a><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">"filechooser_dialog"</span><span class="p">)</span><span class="o">.</span><span class="n">add_action_widget</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ResponseType</span><span class="o">.</span><span class="n">CANCEL</span><span class="p">)</span>
<a name="rest_code_704adc7088e2414d81c083f6d95d6577-4"></a><span class="n">button</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="n">new_from_stock</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_APPLY</span><span class="p">)</span>
<a name="rest_code_704adc7088e2414d81c083f6d95d6577-5"></a><span class="n">button</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">"can-default"</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
<a name="rest_code_704adc7088e2414d81c083f6d95d6577-6"></a><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">"filechooser_dialog"</span><span class="p">)</span><span class="o">.</span><span class="n">add_action_widget</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ResponseType</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
<a name="rest_code_704adc7088e2414d81c083f6d95d6577-7"></a><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">"filechooser_dialog"</span><span class="p">)</span><span class="o">.</span><span class="n">add_action_widget</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="n">new</span><span class="p">(),</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ResponseType</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
</pre>
<p>To apply file selection on doubleclick the <em>file-activated</em> is also required in addition to the <em>response</em> signal.</p>
</div>
</div>
<div class="section" id="preview-widget">
<h3><a class="toc-backref" href="posts/fcdialog/#id8">Preview widget</a></h3>
<p>The dialogue can contain an optional preview widget. To use it activate <em>"Preview Widget Active"</em> and choose a free widget (p.e. a <em>GtkImage</em>). It may be necessary to create the preview widget in an empty container widget and pull it into a free area.</p>
<p>If the preview requires a refresh the <em>update-preview</em> signal is emitted.</p>
</div>
<div class="section" id="filefilter">
<h3><a class="toc-backref" href="posts/fcdialog/#id9">FileFilter</a></h3>
<p>Files can be filtered according to certain criteria by using <em>FileFilter</em>. There can be defined several (shell style glob) patterns or MIME-types for each filter.</p>
<p>In Glade filters can be found in the widget sidebar in the <em>"Miscellaneous"</em> group. A filter for a dialog can be selected in the general widget properties. This corresponds to the <tt class="docutils literal">set_filter</tt> function.</p>
</div>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="posts/fcdialog/#id10">Python</a></h2>
<div class="section" id="dialog-without-glade">
<h3><a class="toc-backref" href="posts/fcdialog/#id11">Dialog without Glade</a></h3>
<p>The <em>FileChooserDialog</em> is a complex but also easy to use graphic interface item. Realizing the dialog without Glade also avoids the headerbar problem discussed above. Creating a dialog follows the scheme</p>
<pre class="code python"><a name="rest_code_32cae5404e674bee86bae910b156b8be-1"></a><span class="n">dialog</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">FileChooserDialog</span><span class="p">(</span><span class="s2">"window title"</span><span class="p">,</span>
<a name="rest_code_32cae5404e674bee86bae910b156b8be-2"></a>                               <span class="n">parent_window</span><span class="p">,</span>
<a name="rest_code_32cae5404e674bee86bae910b156b8be-3"></a>                               <span class="n">file_chooser_action</span><span class="p">,</span>
<a name="rest_code_32cae5404e674bee86bae910b156b8be-4"></a>                               <span class="p">(</span><span class="n">button1</span><span class="p">,</span><span class="n">response1</span><span class="p">,</span>
<a name="rest_code_32cae5404e674bee86bae910b156b8be-5"></a>                               <span class="n">button2</span><span class="p">,</span><span class="n">response2</span><span class="p">))</span>
</pre>
<p>The dialog then can be directly run and processed:</p>
<pre class="code python"><a name="rest_code_bc002d56410941bdb020496305aed415-1"></a><span class="n">response</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a name="rest_code_bc002d56410941bdb020496305aed415-2"></a><span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="n">response1</span><span class="p">:</span>
<a name="rest_code_bc002d56410941bdb020496305aed415-3"></a>    <span class="o">...</span>
<a name="rest_code_bc002d56410941bdb020496305aed415-4"></a><span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="n">response2</span><span class="p">:</span>
<a name="rest_code_bc002d56410941bdb020496305aed415-5"></a>    <span class="o">...</span>
<a name="rest_code_bc002d56410941bdb020496305aed415-6"></a><span class="n">dialog</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
</pre>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="posts/fcdialog/#id12">FileFilter</a></h3>
<p>There are two possibilities to apply a <em>FileFilter</em>:</p>
<ol class="arabic simple">
<li>No user choice. The applied filter is preset:</li>
</ol>
<pre class="code python"><a name="rest_code_4b35d4e720f44d3a914ac13959b37347-1"></a><span class="n">dialog</span><span class="o">.</span><span class="n">set_filter</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span>
</pre>
<ol class="arabic simple" start="2">
<li>Selection per dropdown menu. The user can choose between different defined filters:</li>
</ol>
<pre class="code python"><a name="rest_code_4f5088ede4f14ea48f82f21fe874ce21-1"></a><span class="n">dialog</span><span class="o">.</span><span class="n">add_filter</span><span class="p">(</span><span class="n">filter1</span><span class="p">)</span>
<a name="rest_code_4f5088ede4f14ea48f82f21fe874ce21-2"></a><span class="n">dialog</span><span class="o">.</span><span class="n">add_filter</span><span class="p">(</span><span class="n">filter2</span><span class="p">)</span>
<a name="rest_code_4f5088ede4f14ea48f82f21fe874ce21-3"></a><span class="o">...</span>
</pre>
<p class="more"><a href="posts/fcdialog/">Read more…</a></p>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/application-fortsetzung/">Desktop integration</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-01-15T13:51:29+01:00">2017-01-15 13:51</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/application-fortsetzung/#disqus_thread" data-disqus-identifier="cache/posts/application-fortsetzung.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="contents warning pull-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li>
<a class="reference internal" href="posts/application-fortsetzung/#glade" id="id3">Glade</a><ul>
<li><a class="reference internal" href="posts/application-fortsetzung/#icon" id="id4">Icon</a></li>
<li><a class="reference internal" href="posts/application-fortsetzung/#headerbar" id="id5">Headerbar</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/application-fortsetzung/#commandline-options" id="id6">Commandline options</a><ul>
<li><a class="reference internal" href="posts/application-fortsetzung/#create-options" id="id7">Create Options</a></li>
<li><a class="reference internal" href="posts/application-fortsetzung/#connect-signal" id="id8">Connect signal</a></li>
<li><a class="reference internal" href="posts/application-fortsetzung/#processing-options" id="id9">Processing options</a></li>
<li><a class="reference internal" href="posts/application-fortsetzung/#run-application-with-options" id="id10">Run application with options</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/application-fortsetzung/#listings" id="id11">Listings</a><ul>
<li><a class="reference internal" href="posts/application-fortsetzung/#id2" id="id12">Glade</a></li>
<li><a class="reference internal" href="posts/application-fortsetzung/#python" id="id13">Python</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Desktop integration: icon, headerbar, commndline options</strong></p>
<p>(Continuation if the <a class="reference external" href="posts/application">GtkApplication article</a>)</p>
<a class="reference external image-reference" href="../images/15_application.png"><img alt="/images/15_application.thumbnail.png" src="../images/15_application.thumbnail.png"></a>
<div class="section" id="glade">
<h2><a class="toc-backref" href="posts/application-fortsetzung/#id3">Glade</a></h2>
<div class="section" id="icon">
<h3><a class="toc-backref" href="posts/application-fortsetzung/#id4">Icon</a></h3>
<p>To assign an icon to an window just select <em>"General Appearance &gt; Icon File"</em>. Problematic here is that Glade only shows image files located in the same folder as the Glade file even if an image from another folder is chosen.</p>
<p>A simple solution is editing the Glade file in a text editor and add the relative path to the <a class="reference external" href="https://openclipart.org/detail/22535/ducky-icon">icon</a>. This edit is preserved even when changing and saving the file with Glade again:</p>
<pre class="code xml"><a name="rest_code_83bbfeb8e3ba4f79ac7f7988453b639e-1"></a><span class="nt">&lt;object</span> <span class="na">class=</span><span class="s">"GtkApplicationWindow"</span> <span class="na">id=</span><span class="s">"window"</span><span class="nt">&gt;</span>
<a name="rest_code_83bbfeb8e3ba4f79ac7f7988453b639e-2"></a>  ...
<a name="rest_code_83bbfeb8e3ba4f79ac7f7988453b639e-3"></a>  <span class="c">&lt;!-- &lt;property name="icon"&gt;duckyou.svg&lt;/property&gt; --&gt;</span>
<a name="rest_code_83bbfeb8e3ba4f79ac7f7988453b639e-4"></a>  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"icon"</span><span class="nt">&gt;</span>../files/duckyou.svg<span class="nt">&lt;/property&gt;</span>
<a name="rest_code_83bbfeb8e3ba4f79ac7f7988453b639e-5"></a>  ...
</pre>
</div>
<div class="section" id="headerbar">
<h3><a class="toc-backref" href="posts/application-fortsetzung/#id5">Headerbar</a></h3>
<p>Headerbars were introduced in GNOME 3.10 and unite titlebar and toolbar. Besides title and subtitle there is room for widgets such as buttons or menus and client side window controls.</p>
<p>A headerbar is optional. To make use of it <em>"General &gt; Appearance &gt; Client side window decorations"</em> has to be activated if not set yet. This prepares a reserved container area in the upper window area to add the headerbar widget in. If a headerbar is placed out of this specific area a regular titlebar is generated in addition to the headerbar.</p>
<img alt="/images/15_headerbarglade.png" src="../images/15_headerbarglade.png">
</div>
</div>
<div class="section" id="commandline-options">
<h2><a class="toc-backref" href="posts/application-fortsetzung/#id6">Commandline options</a></h2>
<p><em>GtkApplication</em> provides functions to define individual commandline options of the applications (<a class="reference external" href="https://wiki.gnome.org/HowDoI/GtkApplication/CommandLine">Handling command line options in GApplication</a>).</p>
<div class="section" id="create-options">
<h3><a class="toc-backref" href="posts/application-fortsetzung/#id7">Create Options</a></h3>
<p>Options are added by the <tt class="docutils literal">add_main_option_entries(entrylist)</tt> function. The entries must be <em>GLib.OptionEntry</em> formatted which requires a bunch of parameters.</p>
<pre class="code python"><a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-1"></a><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-2"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Application</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"org.application.test"</span><span class="p">,</span> <span class="n">Gio</span><span class="o">.</span><span class="n">ApplicationFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">add_main_option_entries</span><span class="p">([</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_option_entry</span><span class="p">(</span><span class="s2">"--version"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Show version numbers and exit"</span><span class="p">),</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_option_entry</span><span class="p">(</span><span class="s2">"--setlabel"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Set label widget"</span><span class="p">,</span><span class="n">arg</span><span class="o">=</span><span class="n">GLib</span><span class="o">.</span><span class="n">OptionArg</span><span class="o">.</span><span class="n">STRING</span><span class="p">,),</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_option_entry</span><span class="p">(</span><span class="s2">"--bollocks"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Additional test option - exit"</span><span class="p">),</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-7"></a>    <span class="p">])</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-8"></a>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-9"></a><span class="k">def</span> <span class="nf">create_option_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">long_name</span><span class="p">,</span> <span class="n">short_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">GLib</span><span class="o">.</span><span class="n">OptionArg</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span><span class="n">arg_data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">arg_description</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-10"></a>    <span class="n">option</span> <span class="o">=</span> <span class="n">GLib</span><span class="o">.</span><span class="n">OptionEntry</span><span class="p">()</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-11"></a>    <span class="n">option</span><span class="o">.</span><span class="n">long_name</span> <span class="o">=</span> <span class="n">long_name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-12"></a>    <span class="n">option</span><span class="o">.</span><span class="n">short_name</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_name</span> <span class="k">else</span> <span class="n">short_name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-13"></a>    <span class="n">option</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-14"></a>    <span class="n">option</span><span class="o">.</span><span class="n">arg</span> <span class="o">=</span> <span class="n">arg</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-15"></a>    <span class="n">option</span><span class="o">.</span><span class="n">arg_data</span> <span class="o">=</span> <span class="n">arg_data</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-16"></a>    <span class="n">option</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-17"></a>    <span class="n">option</span><span class="o">.</span><span class="n">arg_description</span> <span class="o">=</span> <span class="n">arg_description</span>
<a name="rest_code_20806f8745ba4c2b944a5005bde0fc18-18"></a>    <span class="k">return</span> <span class="n">option</span>
</pre>
</div>
<div class="section" id="connect-signal">
<h3><a class="toc-backref" href="posts/application-fortsetzung/#id8">Connect signal</a></h3>
<p>The "handle-local-options" signal of <em>Gtk.Application</em> handles commandline options. If the signal is connected the signal is emitted before the "startup" signal.</p>
<pre class="code python"><a name="rest_code_2e1cae02d2d646faa543b0661bb83236-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"handle-local-options"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_local_option</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="processing-options">
<h3><a class="toc-backref" href="posts/application-fortsetzung/#id9">Processing options</a></h3>
<p>The <tt class="docutils literal">option</tt> will be passed as an element of the <em>GLib.VariantDict</em> class which can be searched for by calling <tt class="docutils literal"><span class="pre">contains("option")</span></tt>:</p>
<pre class="code python"><a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-1"></a><span class="k">def</span> <span class="nf">on_local_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">,</span> <span class="n">option</span><span class="p">):</span>
<a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-2"></a>    <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"option1"</span><span class="p">):</span>
<a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-3"></a>        <span class="c1">#do something and exit normally</span>
<a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-4"></a>        <span class="k">return</span> <span class="mi">0</span>
<a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-5"></a>    <span class="k">elif</span> <span class="n">option</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"option2"</span><span class="p">):</span>
<a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-6"></a>        <span class="c1">#do something different and exit</span>
<a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-7"></a>        <span class="k">return</span> <span class="mi">0</span>
<a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-8"></a>    <span class="k">elif</span> <span class="n">option</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"option3"</span><span class="p">):</span>
<a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-9"></a>        <span class="c1">#do more and continue</span>
<a name="rest_code_d64e5f3a23344a609c5d56c6ae0be217-10"></a>    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</pre>
<p>A string can be extracted by calling <tt class="docutils literal">end()</tt> which converts <em>GLib.VariantDict</em> to a <em>GLib.Variant</em> element. That <em>GLib.Variant</em> then can be culled by calling <tt class="docutils literal">keys()</tt>:</p>
<pre class="code python"><a name="rest_code_e3bf16e0ff3542038b4409441a6baa3d-1"></a><span class="n">var</span> <span class="o">=</span> <span class="n">GLib</span><span class="o">.</span><span class="n">VariantDict</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
<a name="rest_code_e3bf16e0ff3542038b4409441a6baa3d-2"></a><span class="n">option_string</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span>
</pre>
<p>The handler function demands a return value that corresponds to the exit status:</p>
<blockquote>
<ul class="simple">
<li>
<strong>-1</strong>: application execution will be continued</li>
<li>
<strong>0</strong>: execution successful, application will be quit, "startup/activate" will not be emitted</li>
<li>
<strong>1</strong> or positive value: execution was not successful, application will be quit</li>
</ul>
</blockquote>
</div>
<div class="section" id="run-application-with-options">
<h3><a class="toc-backref" href="posts/application-fortsetzung/#id10">Run application with options</a></h3>
<p>The option <tt class="docutils literal"><span class="pre">--help</span></tt> is always available and lists all defined options of the application and their descriptions.</p>
<p>The options of the example file now can be executed:</p>
<pre class="code console"><a name="rest_code_32df56faaa4d4f1ab7024f0af175fb97-1"></a><span class="gp">$</span> python script.py --version
<a name="rest_code_32df56faaa4d4f1ab7024f0af175fb97-2"></a><span class="go">Python: 3.6.0</span>
<a name="rest_code_32df56faaa4d4f1ab7024f0af175fb97-3"></a><span class="go">GTK+:   3.22.6</span>
</pre>
<p>or pass a string to the application's <em>Gtk.Label</em>:</p>
<pre class="code console"><a name="rest_code_837ae8877f2a45f6ab5be0e7cb83fa02-1"></a><span class="gp">$</span> python script.py --setlabel <span class="s2">"I can haz options!"</span>
</pre>
<p class="more"><a href="posts/application-fortsetzung/">Read more…</a></p>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/application/">Stand-alone</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-01-14T13:51:29+01:00">2017-01-14 13:51</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/application/#disqus_thread" data-disqus-identifier="cache/posts/application.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="contents warning pull-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li>
<a class="reference internal" href="posts/application/#xml-files" id="id6">XML files</a><ul>
<li><a class="reference internal" href="posts/application/#glade" id="id7">Glade</a></li>
<li><a class="reference internal" href="posts/application/#gmenu" id="id8">GMenu</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/application/#python" id="id9">Python</a><ul>
<li><a class="reference internal" href="posts/application/#initialize-gtkapplication" id="id10">Initialize <em>GtkApplication</em></a></li>
<li><a class="reference internal" href="posts/application/#appmenu" id="id11">Appmenu</a></li>
<li><a class="reference internal" href="posts/application/#start-and-quit" id="id12">Start and quit</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/application/#links" id="id13">Links</a></li>
<li>
<a class="reference internal" href="posts/application/#listings" id="id14">Listings</a><ul>
<li><a class="reference internal" href="posts/application/#id3" id="id15">Glade</a></li>
<li><a class="reference internal" href="posts/application/#id4" id="id16">GMenu</a></li>
<li><a class="reference internal" href="posts/application/#id5" id="id17">Python</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Run program as GtkApplication</strong></p>
<p><em>GtkApplication</em> handles different important aspects of a GTK+ application like GTK+ initialization, session management and desktop integration.</p>
<a class="reference external image-reference" href="../images/14_application.png"><img alt="/images/14_application.thumbnail.png" src="../images/14_application.thumbnail.png"></a>
<div class="section" id="xml-files">
<h2><a class="toc-backref" href="posts/application/#id6">XML files</a></h2>
<div class="section" id="glade">
<h3><a class="toc-backref" href="posts/application/#id7">Glade</a></h3>
<p>Glade is used as usual, main windows should be <a href="posts/application/#id1"><span class="problematic" id="id2">**</span></a>GtkApplicationWindows*. As example the file from the <a class="reference external" href="posts/dialoge">dialogue article</a> is reused.</p>
<div class="system-message" id="id1">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">&lt;string&gt;</tt>, line 17); <em><a href="posts/application/#id2">backlink</a></em></p>
Inline strong start-string without end-string.</div>
</div>
<div class="section" id="gmenu">
<h3><a class="toc-backref" href="posts/application/#id8">GMenu</a></h3>
<p>The GNOME Shell supports appmenus residing in the (top) panel. The Gmenu XML file must be formatted to be recognized as <em>GioMenu</em>:</p>
<pre class="code xml"><a name="rest_code_474e017ed3c14c4cbacc90562497554e-1"></a><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-2"></a><span class="nt">&lt;interface&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-3"></a> <span class="nt">&lt;menu</span> <span class="na">id=</span><span class="s">"appmenu"</span><span class="nt">&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-4"></a>    <span class="nt">&lt;section&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-5"></a>      <span class="nt">&lt;item&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-6"></a>        <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">"label"</span> <span class="na">translatable=</span><span class="s">"yes"</span><span class="nt">&gt;</span>Menu Item<span class="nt">&lt;/attribute&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-7"></a>        <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">"action"</span><span class="nt">&gt;</span>app.item<span class="nt">&lt;/attribute&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-8"></a>      <span class="nt">&lt;/item&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-9"></a>    <span class="nt">&lt;/section&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-10"></a>  <span class="nt">&lt;/menu&gt;</span>
<a name="rest_code_474e017ed3c14c4cbacc90562497554e-11"></a><span class="nt">&lt;/interface&gt;</span>
</pre>
<p>Glade identifies this file format as an outdated Glade file and refuses to open it. Apart from that <em>GtkBuilder</em> can handle the menu and address identifiers.</p>
</div>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="posts/application/#id9">Python</a></h2>
<div class="section" id="initialize-gtkapplication">
<h3><a class="toc-backref" href="posts/application/#id10">Initialize <em>GtkApplication</em></a></h3>
<p>The initialization process requires the parameters <em>application_id</em> and <em>flags</em>. Flags can normally set to 0 being the same as FLAGS_NONE (see <a class="reference external" href="https://lazka.github.io/pgi-docs/Gio-2.0/flags.html#Gio.ApplicationFlags">Gio.ApplicationFlags</a>), naming conventions for application_id are <a class="reference external" href="https://people.gnome.org/~gcampagna/docs/Gio-2.0/Gio.Application.id_is_valid.html">listed here</a>.</p>
<p>The application can be connected to different signals being emitted on preassigned events. It is mandatory to at least define an <tt class="docutils literal">activate</tt> signal:</p>
<pre class="code python"><a name="rest_code_d0578e1372764864a4b75ace548319ad-1"></a><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-2"></a>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Application</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"org.application.test"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-4"></a>    <span class="c1">#self.app.connect("startup", self.on_app_startup) #optional</span>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-5"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"activate"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_app_activate</span><span class="p">)</span>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-6"></a>    <span class="c1">#self.app.connect("shutdown", self.on_app_shutdown) #optional</span>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-7"></a>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-8"></a><span class="k">def</span> <span class="nf">on_app_activate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-9"></a>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-10"></a>    <span class="c1">#setting up GtkBuilder etc.</span>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-11"></a>    <span class="o">...</span>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-12"></a>    <span class="o">...</span>
<a name="rest_code_d0578e1372764864a4b75ace548319ad-13"></a>    <span class="o">...</span>
</pre>
</div>
<div class="section" id="appmenu">
<h3><a class="toc-backref" href="posts/application/#id11">Appmenu</a></h3>
<p>GMenu XML files are loaded by <em>GtkBuilder</em>:</p>
<pre class="code python"><a name="rest_code_7d9e8c0c7e134977b5a4bc8347cd6b71-1"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_from_file</span><span class="p">(</span><span class="s2">"menu.ui"</span><span class="p">)</span>
<a name="rest_code_7d9e8c0c7e134977b5a4bc8347cd6b71-2"></a><span class="n">app</span><span class="o">.</span><span class="n">set_app_menu</span><span class="p">(</span><span class="n">builder</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">"appmenu"</span><span class="p">))</span>
</pre>
<p>Menu entries now have to be connected to actions which are created as <em>GioSimpleActions</em>:</p>
<pre class="code python"><a name="rest_code_3b0e8f0bf8674a5c9017c22c09e0813f-1"></a><span class="k">def</span> <span class="nf">add_simple_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
<a name="rest_code_3b0e8f0bf8674a5c9017c22c09e0813f-2"></a>    <span class="n">action</span> <span class="o">=</span> <span class="n">Gio</span><span class="o">.</span><span class="n">SimpleAction</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<a name="rest_code_3b0e8f0bf8674a5c9017c22c09e0813f-3"></a>    <span class="n">action</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"activate"</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
<a name="rest_code_3b0e8f0bf8674a5c9017c22c09e0813f-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</pre>
<p>In the example file actions invokes dialog windows.</p>
</div>
<div class="section" id="start-and-quit">
<h3><a class="toc-backref" href="posts/application/#id12">Start and quit</a></h3>
<p><em>GtkApplication</em> takes over the handling of the GTK+ mainloop so there is no need of starting and quitting GTK+ manually and <tt class="docutils literal">run()</tt> and <tt class="docutils literal">quit()</tt> called instead:</p>
<pre class="code text"><a name="rest_code_ae34b22f99a74ee3b071cfb2701ee826-1"></a>Gtk.main()      -&gt;  app.run(argv)
<a name="rest_code_ae34b22f99a74ee3b071cfb2701ee826-2"></a>Gtk.main_quit() -&gt;  app.quit()
</pre>
</div>
</div>
<div class="section" id="links">
<h2><a class="toc-backref" href="posts/application/#id13">Links</a></h2>
<blockquote>
<ul class="simple">
<li><a class="reference external" href="https://developer.gnome.org/gtk3/stable/GtkApplication.html">GNOME Developer: GtkApplication</a></li>
<li><a class="reference external" href="http://www.bachsau.com/2015/07/13/how-to-use-gtk-3-in-python-to-manage-your-whole-application/">How to use GTK+ 3 in Python to manage your whole application</a></li>
<li><a class="reference external" href="http://stackoverflow.com/questions/19481439/how-to-create-a-complete-menu-using-gio-actions-in-pygi-gtk">Stackoverflow: How to create a complete menu using GIO Actions in PyGI GTK?</a></li>
</ul>
</blockquote>
<p class="more"><a href="posts/application/">Read more…</a></p>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/non-fortschritte/">NoN: progress</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-01-08T22:18:52+01:00">2017-01-08 22:18</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/non-fortschritte/#disqus_thread" data-disqus-identifier="cache/posts/non-fortschritte.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/nikola/" rel="tag">nikola</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p><strong>Knights of Ni - progress</strong></p>
<p>As <a href="posts/non-fortschritte/#id1"><span class="problematic" id="id2">`said before&lt;link://slug/neues-projekt-knights-of-ni&gt;`_</span></a> I am currently working on a GUI for <a class="reference external" href="https://getnikola.com">Nikola</a> doing some progress:</p>
<ul class="simple">
<li>removed titlebar, using headerbar instead</li>
<li>switch between multiple Nikola instances</li>
<li>bookmark local Nikola instances (only adding for now)</li>
<li><dl class="first docutils">
<dt>support for multilinual sites:</dt>
<dd><ul class="first last">
<li>display of configured languages</li>
<li>show existent translations in posts/pages tab</li>
<li>"Translation" tab: show files, generate new translation file for post/page (<em>this is somehow redundant to the posts/pages tab, I still think about it...</em>)</li>
</ul></dd>
</dl></li>
<li>if there is no title the "Title" column will show the slug or (if this does not exist neither) filename</li>
<li>some mor log messages to pretent important things happen</li>
</ul>
<a class="reference external image-reference" href="../images/non2.png"><img alt="/images/non2.thumbnail.png" src="../images/non2.thumbnail.png"></a>
<div class="system-messages section">
<h2>Docutils System Messages</h2>
<div class="system-message" id="id1">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">&lt;string&gt;</tt>, line 3); <em><a href="posts/non-fortschritte/#id2">backlink</a></em></p>
Unknown target name: "said before&lt;link://slug/neues-projekt-knights-of-ni&gt;".</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/artikelubersetzungen/">Translating articles</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-01-04T21:54:21+01:00">2017-01-04 21:54</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/artikelubersetzungen/#disqus_thread" data-disqus-identifier="cache/posts/artikelubersetzungen.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/nikola/" rel="tag">nikola</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>As soon as I figured out multilinguality in Nikola I will translate the tutorial series into English.</p>
<p>...</p>
<p>Well, that was kinda easy...(but I will need some time for translation and writing new stuff and improving the new project).</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/youniversity-python-tricks/">YouNiversity: Python Tricks</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-01-04T20:51:38+01:00">2017-01-04 20:51</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/youniversity-python-tricks/#disqus_thread" data-disqus-identifier="cache/posts/youniversity-python-tricks.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
           <li><a class="tag p-category" href="categories/video/" rel="tag">video</a></li>
           <li><a class="tag p-category" href="categories/youtube/" rel="tag">youtube</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p>Daniel Bader zeigt auf seinem YouTube-Kanal allerlei Nützliches zum Thema Python.</p>
<div class="youtube-video">
<iframe width="480" height="344" src="https://www.youtube.com/embed/gllUwQnYVww?rel=0&amp;hd=1&amp;wmode=transparent"></iframe>
</div>
<p>Aktuell gibt es sein in Arbeit befindliches Buch <em>"Python Tricks. The Book"</em> gerade zum unschlagbaren Preis von 9 $ (+ 1,71 $ deutsche Umsatzsteuer): <a class="reference external" href="https://dbader.org/products/python-tricks-book/">Klick</a></p>
<p>Es bestehen keine persönlichen oder/und finanziellen Verbindungen.</p>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/dialoge/">Dialogues</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2016-12-31T17:51:29+01:00">2016-12-31 17:51</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/dialoge/#disqus_thread" data-disqus-identifier="cache/posts/dialoge.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="contents warning pull-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li>
<a class="reference internal" href="posts/dialoge/#glade" id="id3">Glade</a><ul>
<li><a class="reference internal" href="posts/dialoge/#aboutdialog" id="id4">AboutDialog</a></li>
<li><a class="reference internal" href="posts/dialoge/#messagedialog" id="id5">MessageDialog</a></li>
<li><a class="reference internal" href="posts/dialoge/#buttons-and-responses" id="id6">Buttons and responses</a></li>
<li><a class="reference internal" href="posts/dialoge/#reestablish-dialogues" id="id7">Reestablish dialogues</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/dialoge/#python" id="id8">Python</a><ul>
<li><a class="reference internal" href="posts/dialoge/#responses" id="id9">Responses</a></li>
<li><a class="reference internal" href="posts/dialoge/#delete-event" id="id10">Delete-event</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/dialoge/#listings" id="id11">Listings</a><ul>
<li><a class="reference internal" href="posts/dialoge/#id1" id="id12">Glade</a></li>
<li><a class="reference internal" href="posts/dialoge/#id2" id="id13">Python</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Handle dialogue windows</strong></p>
<p>Dialogues are complementary windows which are useful in interaction with the user, to show some relevant information or demand input. The <em>GtkDialog</em> class provides subclasses for common dialogue use cases like the <em>AboutDialog</em> and <em>MessageDialog</em> used in the example file. (<a class="reference external" href="posts/fcdialog">FileChooserDialog article</a>).</p>
<a class="reference external image-reference" href="../images/13_dialoge.png"><img alt="/images/13_dialoge.thumbnail.png" src="../images/13_dialoge.thumbnail.png"></a>
<div class="section" id="glade">
<h2><a class="toc-backref" href="posts/dialoge/#id3">Glade</a></h2>
<p>In the widget sidebar dialog widgets are integrated to the <em>"Toplevel</em>" section next to window widgets.</p>
<p>Dialogs are complementary windows to grab the user's focus. They can fixed to a superordinated window but at least be configured transient to a parent window via <em>General &gt; Window Attributes Transient For:"</em>.</p>
<div class="section" id="aboutdialog">
<h3><a class="toc-backref" href="posts/dialoge/#id4">AboutDialog</a></h3>
<p>The "About" dialog window in general gives information about the project, its version, license, participating programmers, translators etc. All this can be directly typed into Glade.</p>
</div>
<div class="section" id="messagedialog">
<h3><a class="toc-backref" href="posts/dialoge/#id5">MessageDialog</a></h3>
<p>The MessageDialog is a standard dialog to show information or call for input. It is configurated to be drawn without window decoration or showing up seperately in the taskbar. Furthermore there is the possibility to add standard buttons.</p>
</div>
<div class="section" id="buttons-and-responses">
<h3><a class="toc-backref" href="posts/dialoge/#id6">Buttons and responses</a></h3>
<p>Dialogs already own an intern <em>GtkButtonBox</em> to place any buttons in.</p>
<p>In constrast to regular windows the <em>clicked</em> signals of the buttons do not have to be assigned in these Buttonboxes (it's still possible to do so, of course). Instead in the <em>"General"</em> button properties you define a response answer (int) and assign the <em>response</em> signal of the <em>GtkDialog</em>.</p>
<p>Standard buttons available for example in MessageDialogs have a fixed response (see also <a class="reference external" href="https://lazka.github.io/pgi-docs/#Gtk-3.0/enums.html#Gtk.ResponseType">Python GI API Reference</a>):</p>
<blockquote>
<ul class="simple">
<li>
<strong>Ok</strong> -5</li>
<li>
<strong>Abort</strong> -6</li>
<li>
<strong>Close</strong> -7</li>
<li>
<strong>Yes</strong> -8</li>
<li>
<strong>No</strong> -9</li>
<li>
<strong>[X]</strong> -4</li>
</ul>
</blockquote>
<p>The huge advantage of that procedure is that the response refers to the dialog object so the responses can be processed by a single function.</p>
</div>
<div class="section" id="reestablish-dialogues">
<h3><a class="toc-backref" href="posts/dialoge/#id7">Reestablish dialogues</a></h3>
<p>The problem of windows closed via <em>destroy</em> signal is that they cannot be reactivated therefore the <em>delete-event</em> signal is used here.</p>
</div>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="posts/dialoge/#id8">Python</a></h2>
<div class="section" id="responses">
<h3><a class="toc-backref" href="posts/dialoge/#id9">Responses</a></h3>
<p>When emitting the <em>response</em> signal the response is passed as parameter. As said before this offers the option to process all responses in one function:</p>
<pre class="code python"><a name="rest_code_cf75d91f0b7c4d9ba434e5dcf0ad0ac5-1"></a><span class="k">def</span> <span class="nf">on_dialog_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">,</span><span class="n">response</span><span class="p">):</span>
<a name="rest_code_cf75d91f0b7c4d9ba434e5dcf0ad0ac5-2"></a>    <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a name="rest_code_cf75d91f0b7c4d9ba434e5dcf0ad0ac5-3"></a>        <span class="n">widget</span><span class="o">.</span><span class="n">hide_on_delete</span><span class="p">()</span>
<a name="rest_code_cf75d91f0b7c4d9ba434e5dcf0ad0ac5-4"></a>    <span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a name="rest_code_cf75d91f0b7c4d9ba434e5dcf0ad0ac5-5"></a>        <span class="n">do</span><span class="o">.</span><span class="n">something</span><span class="p">()</span>
<a name="rest_code_cf75d91f0b7c4d9ba434e5dcf0ad0ac5-6"></a>    <span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="p">(</span><span class="mi">2</span> <span class="ow">or</span> <span class="mi">3</span><span class="p">):</span>
<a name="rest_code_cf75d91f0b7c4d9ba434e5dcf0ad0ac5-7"></a>        <span class="n">do</span><span class="o">.</span><span class="n">something</span><span class="o">.</span><span class="n">different</span><span class="p">()</span>
</pre>
</div>
<div class="section" id="delete-event">
<h3><a class="toc-backref" href="posts/dialoge/#id10">Delete-event</a></h3>
<p>The <tt class="docutils literal">hide_on_delete()</tt> function removes a window but can be reestablished by <tt class="docutils literal">show_all()</tt>:</p>
<pre class="code python"><a name="rest_code_3060d66489b04c2ba271fdd8b4079595-1"></a><span class="k">def</span> <span class="nf">on_dialog_delete_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
<a name="rest_code_3060d66489b04c2ba271fdd8b4079595-2"></a>    <span class="n">widget</span><span class="o">.</span><span class="n">hide_on_delete</span><span class="p">()</span>
<a name="rest_code_3060d66489b04c2ba271fdd8b4079595-3"></a>    <span class="k">return</span> <span class="bp">True</span>
</pre>
<p class="more"><a href="posts/dialoge/">Read more…</a></p>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/ansichtssache/">Data view</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2016-12-22T00:02:20+01:00">2016-12-22 00:02</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/ansichtssache/#disqus_thread" data-disqus-identifier="cache/posts/ansichtssache.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<div class="contents warning pull-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="posts/ansichtssache/#treestore-vs-liststore" id="id5">TreeStore vs. ListStore</a></li>
<li>
<a class="reference internal" href="posts/ansichtssache/#glade" id="id6">Glade</a><ul>
<li><a class="reference internal" href="posts/ansichtssache/#treemodelsort" id="id7">TreeModelSort</a></li>
<li><a class="reference internal" href="posts/ansichtssache/#treemodelfilter" id="id8">TreeModelFilter</a></li>
<li><a class="reference internal" href="posts/ansichtssache/#load-formatting-values-from-the-model" id="id9">Load formatting values from the model</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/ansichtssache/#python" id="id10">Python</a><ul>
<li><a class="reference internal" href="posts/ansichtssache/#id1" id="id11">TreeModelSort</a></li>
<li><a class="reference internal" href="posts/ansichtssache/#id2" id="id12">TreeModelFilter</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/ansichtssache/#listings" id="id13">Listings</a><ul>
<li><a class="reference internal" href="posts/ansichtssache/#id3" id="id14">Glade</a></li>
<li><a class="reference internal" href="posts/ansichtssache/#id4" id="id15">Python</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>Display TreeStore data</strong></p>
<p>(Continuation of the <a class="reference external" href="posts/uberlistet">ListStore article</a>)</p>
<a class="reference external image-reference" href="../images/12_treestore.png"><img alt="/images/12_treestore.thumbnail.png" src="../images/12_treestore.thumbnail.png" style="width: 480px;"></a>
<div class="section" id="treestore-vs-liststore">
<h2><a class="toc-backref" href="posts/ansichtssache/#id5">TreeStore vs. ListStore</a></h2>
<p>In contrast to ListStores TreeStore rows can possess child rows. That's why the <tt class="docutils literal">append</tt> function requires another parameter that specifies the parent row reference:</p>
<pre class="code python"><a name="rest_code_be45f229e1c845ddb0afb64775f695f5-1"></a><span class="c1">#append row to liststore</span>
<a name="rest_code_be45f229e1c845ddb0afb64775f695f5-2"></a><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">value1</span><span class="p">,</span><span class="n">value2</span><span class="p">,</span><span class="n">value3</span><span class="p">])</span>
<a name="rest_code_be45f229e1c845ddb0afb64775f695f5-3"></a>
<a name="rest_code_be45f229e1c845ddb0afb64775f695f5-4"></a><span class="c1">#append row to treestore</span>
<a name="rest_code_be45f229e1c845ddb0afb64775f695f5-5"></a><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parent</span><span class="p">,[</span><span class="n">value1</span><span class="p">,</span><span class="n">value2</span><span class="p">,</span><span class="n">value3</span><span class="p">])</span>
</pre>
<p>The <em>parent</em> value is either</p>
<ul class="simple">
<li>
<strong>None</strong> if the current row is not a child row of another, or</li>
<li>
<strong>TreeIter</strong> pointing to the superordinate row.</li>
</ul>
<p>The <em>TreeIter</em> value is generated when creating a row, subordinate rows are created by</p>
<pre class="code python"><a name="rest_code_7ba0d6a25bf0441f8deb3d077efa344f-1"></a><span class="n">row1</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">,[</span><span class="n">value1</span><span class="p">,</span><span class="n">value2</span><span class="p">,</span><span class="n">value3</span><span class="p">])</span>
<a name="rest_code_7ba0d6a25bf0441f8deb3d077efa344f-2"></a><span class="n">row2</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row1</span><span class="p">,[</span><span class="n">value1</span><span class="p">,</span><span class="n">value2</span><span class="p">,</span><span class="n">value3</span><span class="p">])</span>
</pre>
<p>The TreeIter of a cell is obtained by calling the <tt class="docutils literal">get_selection</tt> function of the automatically generated <em>GtkTreeSelection</em> widget.</p>
</div>
<div class="section" id="glade">
<h2><a class="toc-backref" href="posts/ansichtssache/#id6">Glade</a></h2>
<p>In the example there are two TreeStores with some columns and the coresponding TreeView widgets to display the data columns.</p>
<div class="section" id="treemodelsort">
<h3><a class="toc-backref" href="posts/ansichtssache/#id7">TreeModelSort</a></h3>
<p>Sorting a column is set by calling <tt class="docutils literal">set_sort_column_id</tt>. If this is applied to the TreeStore all TreeView widgets using this store are equally sorted.</p>
<p>If this behaviour is not diesired <em>TreeModelSort</em> elements come into play and which are "interposed" between store and view widgets. First the TreeModelSort is created via <em>"Miscellaneous &gt; Tree Model Sort"</em> from the widget sidebar. Then you choose a source TreeView to use data from. After that the model in the TreeView widget is replaced by the newly created TreeModelSort.</p>
<p>The sort function is now simply applied to the TreeModelSort object instead to the TreeView object.</p>
</div>
<div class="section" id="treemodelfilter">
<h3><a class="toc-backref" href="posts/ansichtssache/#id8">TreeModelFilter</a></h3>
<p><em>TreeModelFilter</em> allows to only show data that matches the specified filter criteria. Handling this object is analogue to TreeModelSort.</p>
<p>In the example the varieties can be filtered according to fruit colour so there is a <em>GtkButtonBox</em> required to put the corresponding buttons into.</p>
</div>
<div class="section" id="load-formatting-values-from-the-model">
<h3><a class="toc-backref" href="posts/ansichtssache/#id9">Load formatting values from the model</a></h3>
<p>Besides the columns containing displayed data there is a "weight" column in the first TreeStore. This value is used to show the cell in bold text. It is realized by setting the CellRenderer's property of <em>"Font weight"</em> to the column containing the corresponding value (normal font is 400). In this way the appearance of cells can be defined, for example colours or font formating.</p>
</div>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="posts/ansichtssache/#id10">Python</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="posts/ansichtssache/#id11">TreeModelSort</a></h3>
<p>Requesting a position by calling <tt class="docutils literal">GtkTreeSelection.get_selected()</tt> returns a tuple (model, pos), <em>pos</em> of <em>model</em> points to TreeModelSort (or TreeModelFilter) and requires conversion to the TreeStore position:</p>
<pre class="code python"><a name="rest_code_4f1db1304374497cbc0580a32846ce9d-1"></a><span class="n">model</span><span class="p">,</span><span class="n">pos</span> <span class="o">=</span> <span class="n">selection</span><span class="o">.</span><span class="n">get_selected</span><span class="p">()</span>
<a name="rest_code_4f1db1304374497cbc0580a32846ce9d-2"></a><span class="n">converted_iter</span> <span class="o">=</span> <span class="n">treesort</span><span class="o">.</span><span class="n">convert_iter_to_child_iter</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
<a name="rest_code_4f1db1304374497cbc0580a32846ce9d-3"></a><span class="n">store</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">converted_iter</span><span class="p">,</span><span class="n">column</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="posts/ansichtssache/#id12">TreeModelFilter</a></h3>
<p>First of all a filter function is required defining the visibility of cells, in the example it's the variable <em>self.color</em>:</p>
<pre class="code python"><a name="rest_code_64ed9714f7064d27b88d070ed54c3a0a-1"></a><span class="k">def</span> <span class="nf">color_filter_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">model</span><span class="p">,</span><span class="nb">iter</span><span class="p">,</span><span class="n">data</span><span class="p">):</span>
<a name="rest_code_64ed9714f7064d27b88d070ed54c3a0a-2"></a>    <span class="k">if</span> <span class="n">model</span><span class="p">[</span><span class="nb">iter</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">:</span>
<a name="rest_code_64ed9714f7064d27b88d070ed54c3a0a-3"></a>        <span class="k">return</span> <span class="bp">True</span>
<a name="rest_code_64ed9714f7064d27b88d070ed54c3a0a-4"></a>    <span class="k">else</span><span class="p">:</span>
<a name="rest_code_64ed9714f7064d27b88d070ed54c3a0a-5"></a>        <span class="k">return</span> <span class="bp">False</span>
</pre>
<p>This function has to be assigned to TreeFilter</p>
<pre class="code python"><a name="rest_code_f377f028a42140358098d4f6d137289e-1"></a><span class="n">treefilter</span><span class="o">.</span><span class="n">set_visible_func</span><span class="p">(</span><span class="n">filter_func</span><span class="p">)</span>
</pre>
<p>A filter process is then executed by calling the <tt class="docutils literal">refilter()</tt> function on the TreeFilter object:</p>
<pre class="code python"><a name="rest_code_7f44afa7424942b392044b735e45fbb0-1"></a><span class="k">def</span> <span class="nf">on_button_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>
<a name="rest_code_7f44afa7424942b392044b735e45fbb0-2"></a>    <span class="n">x</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
<a name="rest_code_7f44afa7424942b392044b735e45fbb0-3"></a>    <span class="n">x</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="s2">"treefilter"</span><span class="p">)</span><span class="o">.</span><span class="n">refilter</span><span class="p">()</span>
</pre>
<p class="more"><a href="posts/ansichtssache/">Read more…</a></p>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/neues-projekt-knights-of-ni/">New project: Knights of Ni</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2016-12-11T17:57:35+01:00">2016-12-11 17:57</time>
</div>
                <div class="stats">
                    
        
    <a href="posts/neues-projekt-knights-of-ni/#disqus_thread" data-disqus-identifier="cache/posts/neues-projekt-knights-of-ni.html">Comments</a>


                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="categories/glade/" rel="tag">glade</a></li>
           <li><a class="tag p-category" href="categories/nikola/" rel="tag">nikola</a></li>
           <li><a class="tag p-category" href="categories/python/" rel="tag">python</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<p><strong>Knights of Ni - small managing tool for the static website generator Nikola</strong></p>
<a class="reference external image-reference" href="../images/non_window.png"><img alt="/images/non_window.thumbnail.png" src="../images/non_window.thumbnail.png"></a>
<p>New little project made of Glade and Python on GitHub: <a class="reference external" href="https://github.com/encarsia/non">Knights of Ni</a>.</p>
</div>
            </div>
        </div>
    
        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-2.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="bahnfreikartoffelbrei";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2017 <a href="mailto:An.Ke@bahnfreikartoffelbrei.de">Anke (encarsia)</a> - 
Powered by <a href="http://getnikola.com">Nikola</a> - 
Zen theme based in <a href="https://github.com/arusahni/website-template">Arusahni's website-template</a><br></p>
            
        </footer>
</div>
    </section><script src="../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
